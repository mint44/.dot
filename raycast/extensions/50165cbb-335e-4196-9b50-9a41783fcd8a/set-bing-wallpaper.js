"use strict";var Cc=Object.create;var pn=Object.defineProperty;var Ac=Object.getOwnPropertyDescriptor;var kc=Object.getOwnPropertyNames;var Dc=Object.getPrototypeOf,Bc=Object.prototype.hasOwnProperty;var br=(t,r)=>()=>(t&&(r=t(t=0)),r);var B=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports),ua=(t,r)=>{for(var o in r)pn(t,o,{get:r[o],enumerable:!0})},ca=(t,r,o,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of kc(r))!Bc.call(t,s)&&s!==o&&pn(t,s,{get:()=>r[s],enumerable:!(i=Ac(r,s))||i.enumerable});return t};var Fe=(t,r,o)=>(o=t!=null?Cc(Dc(t)):{},ca(r||!t||!t.__esModule?pn(o,"default",{value:t,enumerable:!0}):o,t)),Oc=t=>ca(pn({},"__esModule",{value:!0}),t);var ba=B((yn,ya)=>{(function(t,r){typeof yn=="object"&&typeof ya<"u"?r(yn):typeof define=="function"&&define.amd?define(["exports"],r):(t=typeof globalThis<"u"?globalThis:t||self,r(t.WebStreamsPolyfill={}))})(yn,function(t){"use strict";let r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function o(){}function i(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let s=i();function l(e){return typeof e=="object"&&e!==null||typeof e=="function"}let c=o,d=Promise,S=Promise.prototype.then,w=Promise.resolve.bind(d),y=Promise.reject.bind(d);function _(e){return new d(e)}function g(e){return w(e)}function m(e){return y(e)}function p(e,n,a){return S.call(e,n,a)}function T(e,n,a){p(p(e,n,a),void 0,c)}function R(e,n){T(e,n)}function C(e,n){T(e,void 0,n)}function A(e,n,a){return p(e,n,a)}function Z(e){p(e,void 0,c)}let D=(()=>{let e=s&&s.queueMicrotask;if(typeof e=="function")return e;let n=g(void 0);return a=>p(n,a)})();function H(e,n,a){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,n,a)}function q(e,n,a){try{return g(H(e,n,a))}catch(u){return m(u)}}let Pe=16384;class P{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(n){let a=this._back,u=a;a._elements.length===Pe-1&&(u={_elements:[],_next:void 0}),a._elements.push(n),u!==a&&(this._back=u,a._next=u),++this._size}shift(){let n=this._front,a=n,u=this._cursor,f=u+1,h=n._elements,b=h[u];return f===Pe&&(a=n._next,f=0),--this._size,this._cursor=f,n!==a&&(this._front=a),h[u]=void 0,b}forEach(n){let a=this._cursor,u=this._front,f=u._elements;for(;(a!==f.length||u._next!==void 0)&&!(a===f.length&&(u=u._next,f=u._elements,a=0,f.length===0));)n(f[a]),++a}peek(){let n=this._front,a=this._cursor;return n._elements[a]}}function L(e,n){e._ownerReadableStream=n,n._reader=e,n._state==="readable"?J(e):n._state==="closed"?oe(e):G(e,n._storedError)}function W(e,n){let a=e._ownerReadableStream;return Oe(a,n)}function N(e){e._ownerReadableStream._state==="readable"?$(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):de(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function V(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function J(e){e._closedPromise=_((n,a)=>{e._closedPromise_resolve=n,e._closedPromise_reject=a})}function G(e,n){J(e),$(e,n)}function oe(e){J(e),Q(e)}function $(e,n){e._closedPromise_reject!==void 0&&(Z(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function de(e,n){G(e,n)}function Q(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let jn=r("[[AbortSteps]]"),Zo=r("[[ErrorSteps]]"),Un=r("[[CancelSteps]]"),Hn=r("[[PullSteps]]"),Xo=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},ou=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function iu(e){return typeof e=="object"||typeof e=="function"}function Ve(e,n){if(e!==void 0&&!iu(e))throw new TypeError(`${n} is not an object.`)}function De(e,n){if(typeof e!="function")throw new TypeError(`${n} is not a function.`)}function au(e){return typeof e=="object"&&e!==null||typeof e=="function"}function ei(e,n){if(!au(e))throw new TypeError(`${n} is not an object.`)}function Ye(e,n,a){if(e===void 0)throw new TypeError(`Parameter ${n} is required in '${a}'.`)}function Vn(e,n,a){if(e===void 0)throw new TypeError(`${n} is required in '${a}'.`)}function Yn(e){return Number(e)}function ti(e){return e===0?0:e}function su(e){return ti(ou(e))}function ri(e,n){let u=Number.MAX_SAFE_INTEGER,f=Number(e);if(f=ti(f),!Xo(f))throw new TypeError(`${n} is not a finite number`);if(f=su(f),f<0||f>u)throw new TypeError(`${n} is outside the accepted range of 0 to ${u}, inclusive`);return!Xo(f)||f===0?0:f}function Gn(e,n){if(!st(e))throw new TypeError(`${n} is not a ReadableStream.`)}function Ft(e){return new rr(e)}function ni(e,n){e._reader._readRequests.push(n)}function Qn(e,n,a){let f=e._reader._readRequests.shift();a?f._closeSteps():f._chunkSteps(n)}function Lr(e){return e._reader._readRequests.length}function oi(e){let n=e._reader;return!(n===void 0||!nt(n))}class rr{constructor(n){if(Ye(n,1,"ReadableStreamDefaultReader"),Gn(n,"First parameter"),lt(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");L(this,n),this._readRequests=new P}get closed(){return nt(this)?this._closedPromise:m(Ir("closed"))}cancel(n=void 0){return nt(this)?this._ownerReadableStream===void 0?m(V("cancel")):W(this,n):m(Ir("cancel"))}read(){if(!nt(this))return m(Ir("read"));if(this._ownerReadableStream===void 0)return m(V("read from"));let n,a,u=_((h,b)=>{n=h,a=b});return nr(this,{_chunkSteps:h=>n({value:h,done:!1}),_closeSteps:()=>n({value:void 0,done:!0}),_errorSteps:h=>a(h)}),u}releaseLock(){if(!nt(this))throw Ir("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");N(this)}}}Object.defineProperties(rr.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(rr.prototype,r.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function nt(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof rr}function nr(e,n){let a=e._ownerReadableStream;a._disturbed=!0,a._state==="closed"?n._closeSteps():a._state==="errored"?n._errorSteps(a._storedError):a._readableStreamController[Hn](n)}function Ir(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let ii=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class ai{constructor(n,a){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=n,this._preventCancel=a}next(){let n=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?A(this._ongoingPromise,n,n):n(),this._ongoingPromise}return(n){let a=()=>this._returnSteps(n);return this._ongoingPromise?A(this._ongoingPromise,a,a):a()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let n=this._reader;if(n._ownerReadableStream===void 0)return m(V("iterate"));let a,u,f=_((b,E)=>{a=b,u=E});return nr(n,{_chunkSteps:b=>{this._ongoingPromise=void 0,D(()=>a({value:b,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,N(n),a({value:void 0,done:!0})},_errorSteps:b=>{this._ongoingPromise=void 0,this._isFinished=!0,N(n),u(b)}}),f}_returnSteps(n){if(this._isFinished)return Promise.resolve({value:n,done:!0});this._isFinished=!0;let a=this._reader;if(a._ownerReadableStream===void 0)return m(V("finish iterating"));if(!this._preventCancel){let u=W(a,n);return N(a),A(u,()=>({value:n,done:!0}))}return N(a),g({value:n,done:!0})}}let si={next(){return li(this)?this._asyncIteratorImpl.next():m(ui("next"))},return(e){return li(this)?this._asyncIteratorImpl.return(e):m(ui("return"))}};ii!==void 0&&Object.setPrototypeOf(si,ii);function lu(e,n){let a=Ft(e),u=new ai(a,n),f=Object.create(si);return f._asyncIteratorImpl=u,f}function li(e){if(!l(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof ai}catch{return!1}}function ui(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let ci=Number.isNaN||function(e){return e!==e};function or(e){return e.slice()}function fi(e,n,a,u,f){new Uint8Array(e).set(new Uint8Array(a,u,f),n)}function sm(e){return e}function xr(e){return!1}function di(e,n,a){if(e.slice)return e.slice(n,a);let u=a-n,f=new ArrayBuffer(u);return fi(f,0,e,n,u),f}function uu(e){return!(typeof e!="number"||ci(e)||e<0)}function mi(e){let n=di(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(n)}function Jn(e){let n=e._queue.shift();return e._queueTotalSize-=n.size,e._queueTotalSize<0&&(e._queueTotalSize=0),n.value}function Kn(e,n,a){if(!uu(a)||a===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:n,size:a}),e._queueTotalSize+=a}function cu(e){return e._queue.peek().value}function ot(e){e._queue=new P,e._queueTotalSize=0}class ir{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!Zn(this))throw ro("view");return this._view}respond(n){if(!Zn(this))throw ro("respond");if(Ye(n,1,"respond"),n=ri(n,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");xr(this._view.buffer),jr(this._associatedReadableByteStreamController,n)}respondWithNewView(n){if(!Zn(this))throw ro("respondWithNewView");if(Ye(n,1,"respondWithNewView"),!ArrayBuffer.isView(n))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");xr(n.buffer),Ur(this._associatedReadableByteStreamController,n)}}Object.defineProperties(ir.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(ir.prototype,r.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class qt{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!St(this))throw sr("byobRequest");return to(this)}get desiredSize(){if(!St(this))throw sr("desiredSize");return _i(this)}close(){if(!St(this))throw sr("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let n=this._controlledReadableByteStream._state;if(n!=="readable")throw new TypeError(`The stream (in ${n} state) is not in the readable state and cannot be closed`);ar(this)}enqueue(n){if(!St(this))throw sr("enqueue");if(Ye(n,1,"enqueue"),!ArrayBuffer.isView(n))throw new TypeError("chunk must be an array buffer view");if(n.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(n.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let a=this._controlledReadableByteStream._state;if(a!=="readable")throw new TypeError(`The stream (in ${a} state) is not in the readable state and cannot be enqueued to`);Mr(this,n)}error(n=void 0){if(!St(this))throw sr("error");Be(this,n)}[Un](n){hi(this),ot(this);let a=this._cancelAlgorithm(n);return Nr(this),a}[Hn](n){let a=this._controlledReadableByteStream;if(this._queueTotalSize>0){let f=this._queue.shift();this._queueTotalSize-=f.byteLength,gi(this);let h=new Uint8Array(f.buffer,f.byteOffset,f.byteLength);n._chunkSteps(h);return}let u=this._autoAllocateChunkSize;if(u!==void 0){let f;try{f=new ArrayBuffer(u)}catch(b){n._errorSteps(b);return}let h={buffer:f,bufferByteLength:u,byteOffset:0,byteLength:u,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(h)}ni(a,n),wt(this)}}Object.defineProperties(qt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(qt.prototype,r.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function St(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof qt}function Zn(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof ir}function wt(e){if(!hu(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let a=e._pullAlgorithm();T(a,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,wt(e))},u=>{Be(e,u)})}function hi(e){eo(e),e._pendingPullIntos=new P}function Xn(e,n){let a=!1;e._state==="closed"&&(a=!0);let u=pi(n);n.readerType==="default"?Qn(e,u,a):bu(e,u,a)}function pi(e){let n=e.bytesFilled,a=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,n/a)}function $r(e,n,a,u){e._queue.push({buffer:n,byteOffset:a,byteLength:u}),e._queueTotalSize+=u}function yi(e,n){let a=n.elementSize,u=n.bytesFilled-n.bytesFilled%a,f=Math.min(e._queueTotalSize,n.byteLength-n.bytesFilled),h=n.bytesFilled+f,b=h-h%a,E=f,k=!1;b>u&&(E=b-n.bytesFilled,k=!0);let F=e._queue;for(;E>0;){let I=F.peek(),x=Math.min(E,I.byteLength),X=n.byteOffset+n.bytesFilled;fi(n.buffer,X,I.buffer,I.byteOffset,x),I.byteLength===x?F.shift():(I.byteOffset+=x,I.byteLength-=x),e._queueTotalSize-=x,bi(e,x,n),E-=x}return k}function bi(e,n,a){a.bytesFilled+=n}function gi(e){e._queueTotalSize===0&&e._closeRequested?(Nr(e),pr(e._controlledReadableByteStream)):wt(e)}function eo(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Si(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let n=e._pendingPullIntos.peek();yi(e,n)&&(zr(e),Xn(e._controlledReadableByteStream,n))}}function fu(e,n,a){let u=e._controlledReadableByteStream,f=1;n.constructor!==DataView&&(f=n.constructor.BYTES_PER_ELEMENT);let h=n.constructor,b=n.buffer,E={buffer:b,bufferByteLength:b.byteLength,byteOffset:n.byteOffset,byteLength:n.byteLength,bytesFilled:0,elementSize:f,viewConstructor:h,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(E),Pi(u,a);return}if(u._state==="closed"){let k=new h(E.buffer,E.byteOffset,0);a._closeSteps(k);return}if(e._queueTotalSize>0){if(yi(e,E)){let k=pi(E);gi(e),a._chunkSteps(k);return}if(e._closeRequested){let k=new TypeError("Insufficient bytes to fill elements in the given buffer");Be(e,k),a._errorSteps(k);return}}e._pendingPullIntos.push(E),Pi(u,a),wt(e)}function du(e,n){let a=e._controlledReadableByteStream;if(no(a))for(;Ti(a)>0;){let u=zr(e);Xn(a,u)}}function mu(e,n,a){if(bi(e,n,a),a.bytesFilled<a.elementSize)return;zr(e);let u=a.bytesFilled%a.elementSize;if(u>0){let f=a.byteOffset+a.bytesFilled,h=di(a.buffer,f-u,f);$r(e,h,0,h.byteLength)}a.bytesFilled-=u,Xn(e._controlledReadableByteStream,a),Si(e)}function wi(e,n){let a=e._pendingPullIntos.peek();eo(e),e._controlledReadableByteStream._state==="closed"?du(e):mu(e,n,a),wt(e)}function zr(e){return e._pendingPullIntos.shift()}function hu(e){let n=e._controlledReadableByteStream;return n._state!=="readable"||e._closeRequested||!e._started?!1:!!(oi(n)&&Lr(n)>0||no(n)&&Ti(n)>0||_i(e)>0)}function Nr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function ar(e){let n=e._controlledReadableByteStream;if(!(e._closeRequested||n._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let u=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Be(e,u),u}Nr(e),pr(n)}}function Mr(e,n){let a=e._controlledReadableByteStream;if(e._closeRequested||a._state!=="readable")return;let u=n.buffer,f=n.byteOffset,h=n.byteLength,b=u;if(e._pendingPullIntos.length>0){let E=e._pendingPullIntos.peek();xr(E.buffer),E.buffer=E.buffer}if(eo(e),oi(a))if(Lr(a)===0)$r(e,b,f,h);else{e._pendingPullIntos.length>0&&zr(e);let E=new Uint8Array(b,f,h);Qn(a,E,!1)}else no(a)?($r(e,b,f,h),Si(e)):$r(e,b,f,h);wt(e)}function Be(e,n){let a=e._controlledReadableByteStream;a._state==="readable"&&(hi(e),ot(e),Nr(e),Qi(a,n))}function to(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let n=e._pendingPullIntos.peek(),a=new Uint8Array(n.buffer,n.byteOffset+n.bytesFilled,n.byteLength-n.bytesFilled),u=Object.create(ir.prototype);yu(u,e,a),e._byobRequest=u}return e._byobRequest}function _i(e){let n=e._controlledReadableByteStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function jr(e,n){let a=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(n===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(a.bytesFilled+n>a.byteLength)throw new RangeError("bytesWritten out of range")}a.buffer=a.buffer,wi(e,n)}function Ur(e,n){let a=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(n.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(a.byteOffset+a.bytesFilled!==n.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(a.bufferByteLength!==n.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(a.bytesFilled+n.byteLength>a.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let f=n.byteLength;a.buffer=n.buffer,wi(e,f)}function Ri(e,n,a,u,f,h,b){n._controlledReadableByteStream=e,n._pullAgain=!1,n._pulling=!1,n._byobRequest=null,n._queue=n._queueTotalSize=void 0,ot(n),n._closeRequested=!1,n._started=!1,n._strategyHWM=h,n._pullAlgorithm=u,n._cancelAlgorithm=f,n._autoAllocateChunkSize=b,n._pendingPullIntos=new P,e._readableStreamController=n;let E=a();T(g(E),()=>{n._started=!0,wt(n)},k=>{Be(n,k)})}function pu(e,n,a){let u=Object.create(qt.prototype),f=()=>{},h=()=>g(void 0),b=()=>g(void 0);n.start!==void 0&&(f=()=>n.start(u)),n.pull!==void 0&&(h=()=>n.pull(u)),n.cancel!==void 0&&(b=k=>n.cancel(k));let E=n.autoAllocateChunkSize;if(E===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Ri(e,u,f,h,b,a,E)}function yu(e,n,a){e._associatedReadableByteStreamController=n,e._view=a}function ro(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function sr(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function Ei(e){return new lr(e)}function Pi(e,n){e._reader._readIntoRequests.push(n)}function bu(e,n,a){let f=e._reader._readIntoRequests.shift();a?f._closeSteps(n):f._chunkSteps(n)}function Ti(e){return e._reader._readIntoRequests.length}function no(e){let n=e._reader;return!(n===void 0||!_t(n))}class lr{constructor(n){if(Ye(n,1,"ReadableStreamBYOBReader"),Gn(n,"First parameter"),lt(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!St(n._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");L(this,n),this._readIntoRequests=new P}get closed(){return _t(this)?this._closedPromise:m(Hr("closed"))}cancel(n=void 0){return _t(this)?this._ownerReadableStream===void 0?m(V("cancel")):W(this,n):m(Hr("cancel"))}read(n){if(!_t(this))return m(Hr("read"));if(!ArrayBuffer.isView(n))return m(new TypeError("view must be an array buffer view"));if(n.byteLength===0)return m(new TypeError("view must have non-zero byteLength"));if(n.buffer.byteLength===0)return m(new TypeError("view's buffer must have non-zero byteLength"));if(xr(n.buffer),this._ownerReadableStream===void 0)return m(V("read from"));let a,u,f=_((b,E)=>{a=b,u=E});return vi(this,n,{_chunkSteps:b=>a({value:b,done:!1}),_closeSteps:b=>a({value:b,done:!0}),_errorSteps:b=>u(b)}),f}releaseLock(){if(!_t(this))throw Hr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");N(this)}}}Object.defineProperties(lr.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(lr.prototype,r.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function _t(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof lr}function vi(e,n,a){let u=e._ownerReadableStream;u._disturbed=!0,u._state==="errored"?a._errorSteps(u._storedError):fu(u._readableStreamController,n,a)}function Hr(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function ur(e,n){let{highWaterMark:a}=e;if(a===void 0)return n;if(ci(a)||a<0)throw new RangeError("Invalid highWaterMark");return a}function Vr(e){let{size:n}=e;return n||(()=>1)}function Yr(e,n){Ve(e,n);let a=e?.highWaterMark,u=e?.size;return{highWaterMark:a===void 0?void 0:Yn(a),size:u===void 0?void 0:gu(u,`${n} has member 'size' that`)}}function gu(e,n){return De(e,n),a=>Yn(e(a))}function Su(e,n){Ve(e,n);let a=e?.abort,u=e?.close,f=e?.start,h=e?.type,b=e?.write;return{abort:a===void 0?void 0:wu(a,e,`${n} has member 'abort' that`),close:u===void 0?void 0:_u(u,e,`${n} has member 'close' that`),start:f===void 0?void 0:Ru(f,e,`${n} has member 'start' that`),write:b===void 0?void 0:Eu(b,e,`${n} has member 'write' that`),type:h}}function wu(e,n,a){return De(e,a),u=>q(e,n,[u])}function _u(e,n,a){return De(e,a),()=>q(e,n,[])}function Ru(e,n,a){return De(e,a),u=>H(e,n,[u])}function Eu(e,n,a){return De(e,a),(u,f)=>q(e,n,[u,f])}function Ci(e,n){if(!Lt(e))throw new TypeError(`${n} is not a WritableStream.`)}function Pu(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let Tu=typeof AbortController=="function";function vu(){if(Tu)return new AbortController}class cr{constructor(n={},a={}){n===void 0?n=null:ei(n,"First parameter");let u=Yr(a,"Second parameter"),f=Su(n,"First parameter");if(ki(this),f.type!==void 0)throw new RangeError("Invalid type is specified");let b=Vr(u),E=ur(u,1);zu(this,f,E,b)}get locked(){if(!Lt(this))throw Zr("locked");return It(this)}abort(n=void 0){return Lt(this)?It(this)?m(new TypeError("Cannot abort a stream that already has a writer")):Gr(this,n):m(Zr("abort"))}close(){return Lt(this)?It(this)?m(new TypeError("Cannot close a stream that already has a writer")):$e(this)?m(new TypeError("Cannot close an already-closing stream")):Di(this):m(Zr("close"))}getWriter(){if(!Lt(this))throw Zr("getWriter");return Ai(this)}}Object.defineProperties(cr.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(cr.prototype,r.toStringTag,{value:"WritableStream",configurable:!0});function Ai(e){return new fr(e)}function Cu(e,n,a,u,f=1,h=()=>1){let b=Object.create(cr.prototype);ki(b);let E=Object.create(xt.prototype);return Li(b,E,e,n,a,u,f,h),b}function ki(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new P,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function Lt(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof cr}function It(e){return e._writer!==void 0}function Gr(e,n){var a;if(e._state==="closed"||e._state==="errored")return g(void 0);e._writableStreamController._abortReason=n,(a=e._writableStreamController._abortController)===null||a===void 0||a.abort();let u=e._state;if(u==="closed"||u==="errored")return g(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let f=!1;u==="erroring"&&(f=!0,n=void 0);let h=_((b,E)=>{e._pendingAbortRequest={_promise:void 0,_resolve:b,_reject:E,_reason:n,_wasAlreadyErroring:f}});return e._pendingAbortRequest._promise=h,f||io(e,n),h}function Di(e){let n=e._state;if(n==="closed"||n==="errored")return m(new TypeError(`The stream (in ${n} state) is not in the writable state and cannot be closed`));let a=_((f,h)=>{let b={_resolve:f,_reject:h};e._closeRequest=b}),u=e._writer;return u!==void 0&&e._backpressure&&n==="writable"&&po(u),Nu(e._writableStreamController),a}function Au(e){return _((a,u)=>{let f={_resolve:a,_reject:u};e._writeRequests.push(f)})}function oo(e,n){if(e._state==="writable"){io(e,n);return}ao(e)}function io(e,n){let a=e._writableStreamController;e._state="erroring",e._storedError=n;let u=e._writer;u!==void 0&&Oi(u,n),!Wu(e)&&a._started&&ao(e)}function ao(e){e._state="errored",e._writableStreamController[Zo]();let n=e._storedError;if(e._writeRequests.forEach(f=>{f._reject(n)}),e._writeRequests=new P,e._pendingAbortRequest===void 0){Qr(e);return}let a=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,a._wasAlreadyErroring){a._reject(n),Qr(e);return}let u=e._writableStreamController[jn](a._reason);T(u,()=>{a._resolve(),Qr(e)},f=>{a._reject(f),Qr(e)})}function ku(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function Du(e,n){e._inFlightWriteRequest._reject(n),e._inFlightWriteRequest=void 0,oo(e,n)}function Bu(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let a=e._writer;a!==void 0&&zi(a)}function Ou(e,n){e._inFlightCloseRequest._reject(n),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(n),e._pendingAbortRequest=void 0),oo(e,n)}function $e(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function Wu(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function Fu(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function qu(e){e._inFlightWriteRequest=e._writeRequests.shift()}function Qr(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let n=e._writer;n!==void 0&&mo(n,e._storedError)}function so(e,n){let a=e._writer;a!==void 0&&n!==e._backpressure&&(n?Gu(a):po(a)),e._backpressure=n}class fr{constructor(n){if(Ye(n,1,"WritableStreamDefaultWriter"),Ci(n,"First parameter"),It(n))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=n,n._writer=this;let a=n._state;if(a==="writable")!$e(n)&&n._backpressure?en(this):Ni(this),Xr(this);else if(a==="erroring")ho(this,n._storedError),Xr(this);else if(a==="closed")Ni(this),Vu(this);else{let u=n._storedError;ho(this,u),$i(this,u)}}get closed(){return Rt(this)?this._closedPromise:m(Et("closed"))}get desiredSize(){if(!Rt(this))throw Et("desiredSize");if(this._ownerWritableStream===void 0)throw dr("desiredSize");return $u(this)}get ready(){return Rt(this)?this._readyPromise:m(Et("ready"))}abort(n=void 0){return Rt(this)?this._ownerWritableStream===void 0?m(dr("abort")):Lu(this,n):m(Et("abort"))}close(){if(!Rt(this))return m(Et("close"));let n=this._ownerWritableStream;return n===void 0?m(dr("close")):$e(n)?m(new TypeError("Cannot close an already-closing stream")):Bi(this)}releaseLock(){if(!Rt(this))throw Et("releaseLock");this._ownerWritableStream!==void 0&&Wi(this)}write(n=void 0){return Rt(this)?this._ownerWritableStream===void 0?m(dr("write to")):Fi(this,n):m(Et("write"))}}Object.defineProperties(fr.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(fr.prototype,r.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Rt(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof fr}function Lu(e,n){let a=e._ownerWritableStream;return Gr(a,n)}function Bi(e){let n=e._ownerWritableStream;return Di(n)}function Iu(e){let n=e._ownerWritableStream,a=n._state;return $e(n)||a==="closed"?g(void 0):a==="errored"?m(n._storedError):Bi(e)}function xu(e,n){e._closedPromiseState==="pending"?mo(e,n):Yu(e,n)}function Oi(e,n){e._readyPromiseState==="pending"?Mi(e,n):Qu(e,n)}function $u(e){let n=e._ownerWritableStream,a=n._state;return a==="errored"||a==="erroring"?null:a==="closed"?0:Ii(n._writableStreamController)}function Wi(e){let n=e._ownerWritableStream,a=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Oi(e,a),xu(e,a),n._writer=void 0,e._ownerWritableStream=void 0}function Fi(e,n){let a=e._ownerWritableStream,u=a._writableStreamController,f=Mu(u,n);if(a!==e._ownerWritableStream)return m(dr("write to"));let h=a._state;if(h==="errored")return m(a._storedError);if($e(a)||h==="closed")return m(new TypeError("The stream is closing or closed and cannot be written to"));if(h==="erroring")return m(a._storedError);let b=Au(a);return ju(u,n,f),b}let qi={};class xt{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!lo(this))throw fo("abortReason");return this._abortReason}get signal(){if(!lo(this))throw fo("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(n=void 0){if(!lo(this))throw fo("error");this._controlledWritableStream._state==="writable"&&xi(this,n)}[jn](n){let a=this._abortAlgorithm(n);return Jr(this),a}[Zo](){ot(this)}}Object.defineProperties(xt.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(xt.prototype,r.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function lo(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof xt}function Li(e,n,a,u,f,h,b,E){n._controlledWritableStream=e,e._writableStreamController=n,n._queue=void 0,n._queueTotalSize=void 0,ot(n),n._abortReason=void 0,n._abortController=vu(),n._started=!1,n._strategySizeAlgorithm=E,n._strategyHWM=b,n._writeAlgorithm=u,n._closeAlgorithm=f,n._abortAlgorithm=h;let k=co(n);so(e,k);let F=a(),I=g(F);T(I,()=>{n._started=!0,Kr(n)},x=>{n._started=!0,oo(e,x)})}function zu(e,n,a,u){let f=Object.create(xt.prototype),h=()=>{},b=()=>g(void 0),E=()=>g(void 0),k=()=>g(void 0);n.start!==void 0&&(h=()=>n.start(f)),n.write!==void 0&&(b=F=>n.write(F,f)),n.close!==void 0&&(E=()=>n.close()),n.abort!==void 0&&(k=F=>n.abort(F)),Li(e,f,h,b,E,k,a,u)}function Jr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Nu(e){Kn(e,qi,0),Kr(e)}function Mu(e,n){try{return e._strategySizeAlgorithm(n)}catch(a){return uo(e,a),1}}function Ii(e){return e._strategyHWM-e._queueTotalSize}function ju(e,n,a){try{Kn(e,n,a)}catch(f){uo(e,f);return}let u=e._controlledWritableStream;if(!$e(u)&&u._state==="writable"){let f=co(e);so(u,f)}Kr(e)}function Kr(e){let n=e._controlledWritableStream;if(!e._started||n._inFlightWriteRequest!==void 0)return;if(n._state==="erroring"){ao(n);return}if(e._queue.length===0)return;let u=cu(e);u===qi?Uu(e):Hu(e,u)}function uo(e,n){e._controlledWritableStream._state==="writable"&&xi(e,n)}function Uu(e){let n=e._controlledWritableStream;Fu(n),Jn(e);let a=e._closeAlgorithm();Jr(e),T(a,()=>{Bu(n)},u=>{Ou(n,u)})}function Hu(e,n){let a=e._controlledWritableStream;qu(a);let u=e._writeAlgorithm(n);T(u,()=>{ku(a);let f=a._state;if(Jn(e),!$e(a)&&f==="writable"){let h=co(e);so(a,h)}Kr(e)},f=>{a._state==="writable"&&Jr(e),Du(a,f)})}function co(e){return Ii(e)<=0}function xi(e,n){let a=e._controlledWritableStream;Jr(e),io(a,n)}function Zr(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function fo(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function Et(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function dr(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function Xr(e){e._closedPromise=_((n,a)=>{e._closedPromise_resolve=n,e._closedPromise_reject=a,e._closedPromiseState="pending"})}function $i(e,n){Xr(e),mo(e,n)}function Vu(e){Xr(e),zi(e)}function mo(e,n){e._closedPromise_reject!==void 0&&(Z(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function Yu(e,n){$i(e,n)}function zi(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function en(e){e._readyPromise=_((n,a)=>{e._readyPromise_resolve=n,e._readyPromise_reject=a}),e._readyPromiseState="pending"}function ho(e,n){en(e),Mi(e,n)}function Ni(e){en(e),po(e)}function Mi(e,n){e._readyPromise_reject!==void 0&&(Z(e._readyPromise),e._readyPromise_reject(n),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function Gu(e){en(e)}function Qu(e,n){ho(e,n)}function po(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let ji=typeof DOMException<"u"?DOMException:void 0;function Ju(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function Ku(){let e=function(a,u){this.message=a||"",this.name=u||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let Zu=Ju(ji)?ji:Ku();function Ui(e,n,a,u,f,h){let b=Ft(e),E=Ai(n);e._disturbed=!0;let k=!1,F=g(void 0);return _((I,x)=>{let X;if(h!==void 0){if(X=()=>{let v=new Zu("Aborted","AbortError"),O=[];u||O.push(()=>n._state==="writable"?Gr(n,v):g(void 0)),f||O.push(()=>e._state==="readable"?Oe(e,v):g(void 0)),me(()=>Promise.all(O.map(M=>M())),!0,v)},h.aborted){X();return}h.addEventListener("abort",X)}function We(){return _((v,O)=>{function M(ge){ge?v():p(Nt(),M,O)}M(!1)})}function Nt(){return k?g(!0):p(E._readyPromise,()=>_((v,O)=>{nr(b,{_chunkSteps:M=>{F=p(Fi(E,M),void 0,o),v(!1)},_closeSteps:()=>v(!0),_errorSteps:O})}))}if(Ge(e,b._closedPromise,v=>{u?Te(!0,v):me(()=>Gr(n,v),!0,v)}),Ge(n,E._closedPromise,v=>{f?Te(!0,v):me(()=>Oe(e,v),!0,v)}),se(e,b._closedPromise,()=>{a?Te():me(()=>Iu(E))}),$e(n)||n._state==="closed"){let v=new TypeError("the destination writable stream closed before all data could be piped to it");f?Te(!0,v):me(()=>Oe(e,v),!0,v)}Z(We());function ut(){let v=F;return p(F,()=>v!==F?ut():void 0)}function Ge(v,O,M){v._state==="errored"?M(v._storedError):C(O,M)}function se(v,O,M){v._state==="closed"?M():R(O,M)}function me(v,O,M){if(k)return;k=!0,n._state==="writable"&&!$e(n)?R(ut(),ge):ge();function ge(){T(v(),()=>Qe(O,M),Mt=>Qe(!0,Mt))}}function Te(v,O){k||(k=!0,n._state==="writable"&&!$e(n)?R(ut(),()=>Qe(v,O)):Qe(v,O))}function Qe(v,O){Wi(E),N(b),h!==void 0&&h.removeEventListener("abort",X),v?x(O):I(void 0)}})}class $t{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!tn(this))throw on("desiredSize");return yo(this)}close(){if(!tn(this))throw on("close");if(!zt(this))throw new TypeError("The stream is not in a state that permits close");hr(this)}enqueue(n=void 0){if(!tn(this))throw on("enqueue");if(!zt(this))throw new TypeError("The stream is not in a state that permits enqueue");return nn(this,n)}error(n=void 0){if(!tn(this))throw on("error");it(this,n)}[Un](n){ot(this);let a=this._cancelAlgorithm(n);return rn(this),a}[Hn](n){let a=this._controlledReadableStream;if(this._queue.length>0){let u=Jn(this);this._closeRequested&&this._queue.length===0?(rn(this),pr(a)):mr(this),n._chunkSteps(u)}else ni(a,n),mr(this)}}Object.defineProperties($t.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty($t.prototype,r.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function tn(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof $t}function mr(e){if(!Hi(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let a=e._pullAlgorithm();T(a,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,mr(e))},u=>{it(e,u)})}function Hi(e){let n=e._controlledReadableStream;return!zt(e)||!e._started?!1:!!(lt(n)&&Lr(n)>0||yo(e)>0)}function rn(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function hr(e){if(!zt(e))return;let n=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(rn(e),pr(n))}function nn(e,n){if(!zt(e))return;let a=e._controlledReadableStream;if(lt(a)&&Lr(a)>0)Qn(a,n,!1);else{let u;try{u=e._strategySizeAlgorithm(n)}catch(f){throw it(e,f),f}try{Kn(e,n,u)}catch(f){throw it(e,f),f}}mr(e)}function it(e,n){let a=e._controlledReadableStream;a._state==="readable"&&(ot(e),rn(e),Qi(a,n))}function yo(e){let n=e._controlledReadableStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function Xu(e){return!Hi(e)}function zt(e){let n=e._controlledReadableStream._state;return!e._closeRequested&&n==="readable"}function Vi(e,n,a,u,f,h,b){n._controlledReadableStream=e,n._queue=void 0,n._queueTotalSize=void 0,ot(n),n._started=!1,n._closeRequested=!1,n._pullAgain=!1,n._pulling=!1,n._strategySizeAlgorithm=b,n._strategyHWM=h,n._pullAlgorithm=u,n._cancelAlgorithm=f,e._readableStreamController=n;let E=a();T(g(E),()=>{n._started=!0,mr(n)},k=>{it(n,k)})}function ec(e,n,a,u){let f=Object.create($t.prototype),h=()=>{},b=()=>g(void 0),E=()=>g(void 0);n.start!==void 0&&(h=()=>n.start(f)),n.pull!==void 0&&(b=()=>n.pull(f)),n.cancel!==void 0&&(E=k=>n.cancel(k)),Vi(e,f,h,b,E,a,u)}function on(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function tc(e,n){return St(e._readableStreamController)?nc(e):rc(e)}function rc(e,n){let a=Ft(e),u=!1,f=!1,h=!1,b=!1,E,k,F,I,x,X=_(se=>{x=se});function We(){return u?(f=!0,g(void 0)):(u=!0,nr(a,{_chunkSteps:me=>{D(()=>{f=!1;let Te=me,Qe=me;h||nn(F._readableStreamController,Te),b||nn(I._readableStreamController,Qe),u=!1,f&&We()})},_closeSteps:()=>{u=!1,h||hr(F._readableStreamController),b||hr(I._readableStreamController),(!h||!b)&&x(void 0)},_errorSteps:()=>{u=!1}}),g(void 0))}function Nt(se){if(h=!0,E=se,b){let me=or([E,k]),Te=Oe(e,me);x(Te)}return X}function ut(se){if(b=!0,k=se,h){let me=or([E,k]),Te=Oe(e,me);x(Te)}return X}function Ge(){}return F=bo(Ge,We,Nt),I=bo(Ge,We,ut),C(a._closedPromise,se=>{it(F._readableStreamController,se),it(I._readableStreamController,se),(!h||!b)&&x(void 0)}),[F,I]}function nc(e){let n=Ft(e),a=!1,u=!1,f=!1,h=!1,b=!1,E,k,F,I,x,X=_(v=>{x=v});function We(v){C(v._closedPromise,O=>{v===n&&(Be(F._readableStreamController,O),Be(I._readableStreamController,O),(!h||!b)&&x(void 0))})}function Nt(){_t(n)&&(N(n),n=Ft(e),We(n)),nr(n,{_chunkSteps:O=>{D(()=>{u=!1,f=!1;let M=O,ge=O;if(!h&&!b)try{ge=mi(O)}catch(Mt){Be(F._readableStreamController,Mt),Be(I._readableStreamController,Mt),x(Oe(e,Mt));return}h||Mr(F._readableStreamController,M),b||Mr(I._readableStreamController,ge),a=!1,u?Ge():f&&se()})},_closeSteps:()=>{a=!1,h||ar(F._readableStreamController),b||ar(I._readableStreamController),F._readableStreamController._pendingPullIntos.length>0&&jr(F._readableStreamController,0),I._readableStreamController._pendingPullIntos.length>0&&jr(I._readableStreamController,0),(!h||!b)&&x(void 0)},_errorSteps:()=>{a=!1}})}function ut(v,O){nt(n)&&(N(n),n=Ei(e),We(n));let M=O?I:F,ge=O?F:I;vi(n,v,{_chunkSteps:jt=>{D(()=>{u=!1,f=!1;let Ut=O?b:h;if(O?h:b)Ut||Ur(M._readableStreamController,jt);else{let la;try{la=mi(jt)}catch(So){Be(M._readableStreamController,So),Be(ge._readableStreamController,So),x(Oe(e,So));return}Ut||Ur(M._readableStreamController,jt),Mr(ge._readableStreamController,la)}a=!1,u?Ge():f&&se()})},_closeSteps:jt=>{a=!1;let Ut=O?b:h,hn=O?h:b;Ut||ar(M._readableStreamController),hn||ar(ge._readableStreamController),jt!==void 0&&(Ut||Ur(M._readableStreamController,jt),!hn&&ge._readableStreamController._pendingPullIntos.length>0&&jr(ge._readableStreamController,0)),(!Ut||!hn)&&x(void 0)},_errorSteps:()=>{a=!1}})}function Ge(){if(a)return u=!0,g(void 0);a=!0;let v=to(F._readableStreamController);return v===null?Nt():ut(v._view,!1),g(void 0)}function se(){if(a)return f=!0,g(void 0);a=!0;let v=to(I._readableStreamController);return v===null?Nt():ut(v._view,!0),g(void 0)}function me(v){if(h=!0,E=v,b){let O=or([E,k]),M=Oe(e,O);x(M)}return X}function Te(v){if(b=!0,k=v,h){let O=or([E,k]),M=Oe(e,O);x(M)}return X}function Qe(){}return F=Gi(Qe,Ge,me),I=Gi(Qe,se,Te),We(n),[F,I]}function oc(e,n){Ve(e,n);let a=e,u=a?.autoAllocateChunkSize,f=a?.cancel,h=a?.pull,b=a?.start,E=a?.type;return{autoAllocateChunkSize:u===void 0?void 0:ri(u,`${n} has member 'autoAllocateChunkSize' that`),cancel:f===void 0?void 0:ic(f,a,`${n} has member 'cancel' that`),pull:h===void 0?void 0:ac(h,a,`${n} has member 'pull' that`),start:b===void 0?void 0:sc(b,a,`${n} has member 'start' that`),type:E===void 0?void 0:lc(E,`${n} has member 'type' that`)}}function ic(e,n,a){return De(e,a),u=>q(e,n,[u])}function ac(e,n,a){return De(e,a),u=>q(e,n,[u])}function sc(e,n,a){return De(e,a),u=>H(e,n,[u])}function lc(e,n){if(e=`${e}`,e!=="bytes")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function uc(e,n){Ve(e,n);let a=e?.mode;return{mode:a===void 0?void 0:cc(a,`${n} has member 'mode' that`)}}function cc(e,n){if(e=`${e}`,e!=="byob")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function fc(e,n){return Ve(e,n),{preventCancel:!!e?.preventCancel}}function Yi(e,n){Ve(e,n);let a=e?.preventAbort,u=e?.preventCancel,f=e?.preventClose,h=e?.signal;return h!==void 0&&dc(h,`${n} has member 'signal' that`),{preventAbort:!!a,preventCancel:!!u,preventClose:!!f,signal:h}}function dc(e,n){if(!Pu(e))throw new TypeError(`${n} is not an AbortSignal.`)}function mc(e,n){Ve(e,n);let a=e?.readable;Vn(a,"readable","ReadableWritablePair"),Gn(a,`${n} has member 'readable' that`);let u=e?.writable;return Vn(u,"writable","ReadableWritablePair"),Ci(u,`${n} has member 'writable' that`),{readable:a,writable:u}}class at{constructor(n={},a={}){n===void 0?n=null:ei(n,"First parameter");let u=Yr(a,"Second parameter"),f=oc(n,"First parameter");if(go(this),f.type==="bytes"){if(u.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let h=ur(u,0);pu(this,f,h)}else{let h=Vr(u),b=ur(u,1);ec(this,f,b,h)}}get locked(){if(!st(this))throw Pt("locked");return lt(this)}cancel(n=void 0){return st(this)?lt(this)?m(new TypeError("Cannot cancel a stream that already has a reader")):Oe(this,n):m(Pt("cancel"))}getReader(n=void 0){if(!st(this))throw Pt("getReader");return uc(n,"First parameter").mode===void 0?Ft(this):Ei(this)}pipeThrough(n,a={}){if(!st(this))throw Pt("pipeThrough");Ye(n,1,"pipeThrough");let u=mc(n,"First parameter"),f=Yi(a,"Second parameter");if(lt(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(It(u.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let h=Ui(this,u.writable,f.preventClose,f.preventAbort,f.preventCancel,f.signal);return Z(h),u.readable}pipeTo(n,a={}){if(!st(this))return m(Pt("pipeTo"));if(n===void 0)return m("Parameter 1 is required in 'pipeTo'.");if(!Lt(n))return m(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let u;try{u=Yi(a,"Second parameter")}catch(f){return m(f)}return lt(this)?m(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):It(n)?m(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Ui(this,n,u.preventClose,u.preventAbort,u.preventCancel,u.signal)}tee(){if(!st(this))throw Pt("tee");let n=tc(this);return or(n)}values(n=void 0){if(!st(this))throw Pt("values");let a=fc(n,"First parameter");return lu(this,a.preventCancel)}}Object.defineProperties(at.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(at.prototype,r.toStringTag,{value:"ReadableStream",configurable:!0}),typeof r.asyncIterator=="symbol"&&Object.defineProperty(at.prototype,r.asyncIterator,{value:at.prototype.values,writable:!0,configurable:!0});function bo(e,n,a,u=1,f=()=>1){let h=Object.create(at.prototype);go(h);let b=Object.create($t.prototype);return Vi(h,b,e,n,a,u,f),h}function Gi(e,n,a){let u=Object.create(at.prototype);go(u);let f=Object.create(qt.prototype);return Ri(u,f,e,n,a,0,void 0),u}function go(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function st(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof at}function lt(e){return e._reader!==void 0}function Oe(e,n){if(e._disturbed=!0,e._state==="closed")return g(void 0);if(e._state==="errored")return m(e._storedError);pr(e);let a=e._reader;a!==void 0&&_t(a)&&(a._readIntoRequests.forEach(f=>{f._closeSteps(void 0)}),a._readIntoRequests=new P);let u=e._readableStreamController[Un](n);return A(u,o)}function pr(e){e._state="closed";let n=e._reader;n!==void 0&&(Q(n),nt(n)&&(n._readRequests.forEach(a=>{a._closeSteps()}),n._readRequests=new P))}function Qi(e,n){e._state="errored",e._storedError=n;let a=e._reader;a!==void 0&&($(a,n),nt(a)?(a._readRequests.forEach(u=>{u._errorSteps(n)}),a._readRequests=new P):(a._readIntoRequests.forEach(u=>{u._errorSteps(n)}),a._readIntoRequests=new P))}function Pt(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function Ji(e,n){Ve(e,n);let a=e?.highWaterMark;return Vn(a,"highWaterMark","QueuingStrategyInit"),{highWaterMark:Yn(a)}}let Ki=e=>e.byteLength;Object.defineProperty(Ki,"name",{value:"size",configurable:!0});class an{constructor(n){Ye(n,1,"ByteLengthQueuingStrategy"),n=Ji(n,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!Xi(this))throw Zi("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Xi(this))throw Zi("size");return Ki}}Object.defineProperties(an.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(an.prototype,r.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function Zi(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Xi(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof an}let ea=()=>1;Object.defineProperty(ea,"name",{value:"size",configurable:!0});class sn{constructor(n){Ye(n,1,"CountQueuingStrategy"),n=Ji(n,"First parameter"),this._countQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!ra(this))throw ta("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!ra(this))throw ta("size");return ea}}Object.defineProperties(sn.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(sn.prototype,r.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function ta(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function ra(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof sn}function hc(e,n){Ve(e,n);let a=e?.flush,u=e?.readableType,f=e?.start,h=e?.transform,b=e?.writableType;return{flush:a===void 0?void 0:pc(a,e,`${n} has member 'flush' that`),readableType:u,start:f===void 0?void 0:yc(f,e,`${n} has member 'start' that`),transform:h===void 0?void 0:bc(h,e,`${n} has member 'transform' that`),writableType:b}}function pc(e,n,a){return De(e,a),u=>q(e,n,[u])}function yc(e,n,a){return De(e,a),u=>H(e,n,[u])}function bc(e,n,a){return De(e,a),(u,f)=>q(e,n,[u,f])}class ln{constructor(n={},a={},u={}){n===void 0&&(n=null);let f=Yr(a,"Second parameter"),h=Yr(u,"Third parameter"),b=hc(n,"First parameter");if(b.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(b.writableType!==void 0)throw new RangeError("Invalid writableType specified");let E=ur(h,0),k=Vr(h),F=ur(f,1),I=Vr(f),x,X=_(We=>{x=We});gc(this,X,F,I,E,k),wc(this,b),b.start!==void 0?x(b.start(this._transformStreamController)):x(void 0)}get readable(){if(!na(this))throw sa("readable");return this._readable}get writable(){if(!na(this))throw sa("writable");return this._writable}}Object.defineProperties(ln.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(ln.prototype,r.toStringTag,{value:"TransformStream",configurable:!0});function gc(e,n,a,u,f,h){function b(){return n}function E(X){return Ec(e,X)}function k(X){return Pc(e,X)}function F(){return Tc(e)}e._writable=Cu(b,E,F,k,a,u);function I(){return vc(e)}function x(X){return cn(e,X),g(void 0)}e._readable=bo(b,I,x,f,h),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,fn(e,!0),e._transformStreamController=void 0}function na(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof ln}function un(e,n){it(e._readable._readableStreamController,n),cn(e,n)}function cn(e,n){oa(e._transformStreamController),uo(e._writable._writableStreamController,n),e._backpressure&&fn(e,!1)}function fn(e,n){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=_(a=>{e._backpressureChangePromise_resolve=a}),e._backpressure=n}class yr{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!dn(this))throw mn("desiredSize");let n=this._controlledTransformStream._readable._readableStreamController;return yo(n)}enqueue(n=void 0){if(!dn(this))throw mn("enqueue");ia(this,n)}error(n=void 0){if(!dn(this))throw mn("error");_c(this,n)}terminate(){if(!dn(this))throw mn("terminate");Rc(this)}}Object.defineProperties(yr.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(yr.prototype,r.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function dn(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof yr}function Sc(e,n,a,u){n._controlledTransformStream=e,e._transformStreamController=n,n._transformAlgorithm=a,n._flushAlgorithm=u}function wc(e,n){let a=Object.create(yr.prototype),u=h=>{try{return ia(a,h),g(void 0)}catch(b){return m(b)}},f=()=>g(void 0);n.transform!==void 0&&(u=h=>n.transform(h,a)),n.flush!==void 0&&(f=()=>n.flush(a)),Sc(e,a,u,f)}function oa(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function ia(e,n){let a=e._controlledTransformStream,u=a._readable._readableStreamController;if(!zt(u))throw new TypeError("Readable side is not in a state that permits enqueue");try{nn(u,n)}catch(h){throw cn(a,h),a._readable._storedError}Xu(u)!==a._backpressure&&fn(a,!0)}function _c(e,n){un(e._controlledTransformStream,n)}function aa(e,n){let a=e._transformAlgorithm(n);return A(a,void 0,u=>{throw un(e._controlledTransformStream,u),u})}function Rc(e){let n=e._controlledTransformStream,a=n._readable._readableStreamController;hr(a);let u=new TypeError("TransformStream terminated");cn(n,u)}function Ec(e,n){let a=e._transformStreamController;if(e._backpressure){let u=e._backpressureChangePromise;return A(u,()=>{let f=e._writable;if(f._state==="erroring")throw f._storedError;return aa(a,n)})}return aa(a,n)}function Pc(e,n){return un(e,n),g(void 0)}function Tc(e){let n=e._readable,a=e._transformStreamController,u=a._flushAlgorithm();return oa(a),A(u,()=>{if(n._state==="errored")throw n._storedError;hr(n._readableStreamController)},f=>{throw un(e,f),n._storedError})}function vc(e){return fn(e,!1),e._backpressureChangePromise}function mn(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function sa(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}t.ByteLengthQueuingStrategy=an,t.CountQueuingStrategy=sn,t.ReadableByteStreamController=qt,t.ReadableStream=at,t.ReadableStreamBYOBReader=lr,t.ReadableStreamBYOBRequest=ir,t.ReadableStreamDefaultController=$t,t.ReadableStreamDefaultReader=rr,t.TransformStream=ln,t.TransformStreamDefaultController=yr,t.WritableStream=cr,t.WritableStreamDefaultController=xt,t.WritableStreamDefaultWriter=fr,Object.defineProperty(t,"__esModule",{value:!0})})});var ga=B(()=>{if(!globalThis.ReadableStream)try{let t=require("node:process"),{emitWarning:r}=t;try{t.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),t.emitWarning=r}catch(o){throw t.emitWarning=r,o}}catch{Object.assign(globalThis,ba())}try{let{Blob:t}=require("buffer");t&&!t.prototype.stream&&(t.prototype.stream=function(o){let i=0,s=this;return new ReadableStream({type:"bytes",async pull(l){let d=await s.slice(i,Math.min(s.size,i+65536)).arrayBuffer();i+=d.byteLength,l.enqueue(new Uint8Array(d)),i===s.size&&l.close()}})})}catch{}});async function*wo(t,r=!0){for(let o of t)if("stream"in o)yield*o.stream();else if(ArrayBuffer.isView(o))if(r){let i=o.byteOffset,s=o.byteOffset+o.byteLength;for(;i!==s;){let l=Math.min(s-i,Sa),c=o.buffer.slice(i,i+l);i+=c.byteLength,yield new Uint8Array(c)}}else yield o;else{let i=0,s=o;for(;i!==s.size;){let c=await s.slice(i,Math.min(s.size,i+Sa)).arrayBuffer();i+=c.byteLength,yield new Uint8Array(c)}}}var mm,Sa,wa,Fc,Je,gr=br(()=>{mm=Fe(ga(),1);Sa=65536;wa=class _o{#e=[];#t="";#r=0;#n="transparent";constructor(r=[],o={}){if(typeof r!="object"||r===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof r[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof o!="object"&&typeof o!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");o===null&&(o={});let i=new TextEncoder;for(let l of r){let c;ArrayBuffer.isView(l)?c=new Uint8Array(l.buffer.slice(l.byteOffset,l.byteOffset+l.byteLength)):l instanceof ArrayBuffer?c=new Uint8Array(l.slice(0)):l instanceof _o?c=l:c=i.encode(`${l}`);let d=ArrayBuffer.isView(c)?c.byteLength:c.size;d&&(this.#r+=d,this.#e.push(c))}this.#n=`${o.endings===void 0?"transparent":o.endings}`;let s=o.type===void 0?"":String(o.type);this.#t=/^[\x20-\x7E]*$/.test(s)?s:""}get size(){return this.#r}get type(){return this.#t}async text(){let r=new TextDecoder,o="";for await(let i of wo(this.#e,!1))o+=r.decode(i,{stream:!0});return o+=r.decode(),o}async arrayBuffer(){let r=new Uint8Array(this.size),o=0;for await(let i of wo(this.#e,!1))r.set(i,o),o+=i.length;return r.buffer}stream(){let r=wo(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(o){let i=await r.next();i.done?o.close():o.enqueue(i.value)},async cancel(){await r.return()}})}slice(r=0,o=this.size,i=""){let{size:s}=this,l=r<0?Math.max(s+r,0):Math.min(r,s),c=o<0?Math.max(s+o,0):Math.min(o,s),d=Math.max(c-l,0),S=this.#e,w=[],y=0;for(let g of S){if(y>=d)break;let m=ArrayBuffer.isView(g)?g.byteLength:g.size;if(l&&m<=l)l-=m,c-=m;else{let p;ArrayBuffer.isView(g)?(p=g.subarray(l,Math.min(m,c)),y+=p.byteLength):(p=g.slice(l,Math.min(m,c)),y+=p.size),c-=m,w.push(p),l=0}}let _=new _o([],{type:String(i).toLowerCase()});return _.#r=d,_.#e=w,_}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](r){return r&&typeof r=="object"&&typeof r.constructor=="function"&&(typeof r.stream=="function"||typeof r.arrayBuffer=="function")&&/^(Blob|File)$/.test(r[Symbol.toStringTag])}};Object.defineProperties(wa.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Fc=wa,Je=Fc});var qc,Lc,Yt,Ro=br(()=>{gr();qc=class extends Je{#e=0;#t="";constructor(r,o,i={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(r,i),i===null&&(i={});let s=i.lastModified===void 0?Date.now():Number(i.lastModified);Number.isNaN(s)||(this.#e=s),this.#t=String(o)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](r){return!!r&&r instanceof Je&&/^(File)$/.test(r[Symbol.toStringTag])}},Lc=qc,Yt=Lc});function Ea(t,r=Je){var o=`${_a()}${_a()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),i=[],s=`--${o}\r
Content-Disposition: form-data; name="`;return t.forEach((l,c)=>typeof l=="string"?i.push(s+Eo(c)+`"\r
\r
${l.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):i.push(s+Eo(c)+`"; filename="${Eo(l.name,1)}"\r
Content-Type: ${l.type||"application/octet-stream"}\r
\r
`,l,`\r
`)),i.push(`--${o}--`),new r(i,{type:"multipart/form-data; boundary="+o})}var Sr,Ic,xc,_a,$c,Ra,Eo,Tt,vt,bn=br(()=>{gr();Ro();({toStringTag:Sr,iterator:Ic,hasInstance:xc}=Symbol),_a=Math.random,$c="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),Ra=(t,r,o)=>(t+="",/^(Blob|File)$/.test(r&&r[Sr])?[(o=o!==void 0?o+"":r[Sr]=="File"?r.name:"blob",t),r.name!==o||r[Sr]=="blob"?new Yt([r],o,r):r]:[t,r+""]),Eo=(t,r)=>(r?t:t.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),Tt=(t,r,o)=>{if(r.length<o)throw new TypeError(`Failed to execute '${t}' on 'FormData': ${o} arguments required, but only ${r.length} present.`)},vt=class{#e=[];constructor(...r){if(r.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[Sr](){return"FormData"}[Ic](){return this.entries()}static[xc](r){return r&&typeof r=="object"&&r[Sr]==="FormData"&&!$c.some(o=>typeof r[o]!="function")}append(...r){Tt("append",arguments,2),this.#e.push(Ra(...r))}delete(r){Tt("delete",arguments,1),r+="",this.#e=this.#e.filter(([o])=>o!==r)}get(r){Tt("get",arguments,1),r+="";for(var o=this.#e,i=o.length,s=0;s<i;s++)if(o[s][0]===r)return o[s][1];return null}getAll(r,o){return Tt("getAll",arguments,1),o=[],r+="",this.#e.forEach(i=>i[0]===r&&o.push(i[1])),o}has(r){return Tt("has",arguments,1),r+="",this.#e.some(o=>o[0]===r)}forEach(r,o){Tt("forEach",arguments,1);for(var[i,s]of this)r.call(o,s,i,this)}set(...r){Tt("set",arguments,2);var o=[],i=!0;r=Ra(...r),this.#e.forEach(s=>{s[0]===r[0]?i&&(i=!o.push(r)):o.push(s)}),i&&o.push(r),this.#e=o}*entries(){yield*this.#e}*keys(){for(var[r]of this)yield r}*values(){for(var[,r]of this)yield r}}});var Aa=B((vm,Ca)=>{if(!globalThis.DOMException)try{let{MessageChannel:t}=require("worker_threads"),r=new t().port1,o=new ArrayBuffer;r.postMessage(o,[o,o])}catch(t){t.constructor.name==="DOMException"&&(globalThis.DOMException=t.constructor)}Ca.exports=globalThis.DOMException});var Sn,zc,km,To=br(()=>{Sn=require("node:fs"),zc=Fe(Aa(),1);Ro();gr();({stat:km}=Sn.promises)});var Da={};ua(Da,{toFormData:()=>Yc});function Vc(t){let r=t.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!r)return;let o=r[2]||r[3]||"",i=o.slice(o.lastIndexOf("\\")+1);return i=i.replace(/%22/g,'"'),i=i.replace(/&#(\d{4});/g,(s,l)=>String.fromCharCode(l)),i}async function Yc(t,r){if(!/multipart/i.test(r))throw new TypeError("Failed to fetch");let o=r.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!o)throw new TypeError("no or bad content-type header, no multipart boundary");let i=new vo(o[1]||o[2]),s,l,c,d,S,w,y=[],_=new vt,g=C=>{c+=R.decode(C,{stream:!0})},m=C=>{y.push(C)},p=()=>{let C=new Yt(y,w,{type:S});_.append(d,C)},T=()=>{_.append(d,c)},R=new TextDecoder("utf-8");R.decode(),i.onPartBegin=function(){i.onPartData=g,i.onPartEnd=T,s="",l="",c="",d="",S="",w=null,y.length=0},i.onHeaderField=function(C){s+=R.decode(C,{stream:!0})},i.onHeaderValue=function(C){l+=R.decode(C,{stream:!0})},i.onHeaderEnd=function(){if(l+=R.decode(),s=s.toLowerCase(),s==="content-disposition"){let C=l.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);C&&(d=C[2]||C[3]||""),w=Vc(l),w&&(i.onPartData=m,i.onPartEnd=p)}else s==="content-type"&&(S=l);l="",s=""};for await(let C of t)i.write(C);return i.end(),_}var ze,j,ka,dt,wn,_n,Nc,_r,Mc,jc,Uc,Hc,Ct,vo,Ba=br(()=>{To();bn();ze=0,j={START_BOUNDARY:ze++,HEADER_FIELD_START:ze++,HEADER_FIELD:ze++,HEADER_VALUE_START:ze++,HEADER_VALUE:ze++,HEADER_VALUE_ALMOST_DONE:ze++,HEADERS_ALMOST_DONE:ze++,PART_DATA_START:ze++,PART_DATA:ze++,END:ze++},ka=1,dt={PART_BOUNDARY:ka,LAST_BOUNDARY:ka*=2},wn=10,_n=13,Nc=32,_r=45,Mc=58,jc=97,Uc=122,Hc=t=>t|32,Ct=()=>{},vo=class{constructor(r){this.index=0,this.flags=0,this.onHeaderEnd=Ct,this.onHeaderField=Ct,this.onHeadersEnd=Ct,this.onHeaderValue=Ct,this.onPartBegin=Ct,this.onPartData=Ct,this.onPartEnd=Ct,this.boundaryChars={},r=`\r
--`+r;let o=new Uint8Array(r.length);for(let i=0;i<r.length;i++)o[i]=r.charCodeAt(i),this.boundaryChars[o[i]]=!0;this.boundary=o,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=j.START_BOUNDARY}write(r){let o=0,i=r.length,s=this.index,{lookbehind:l,boundary:c,boundaryChars:d,index:S,state:w,flags:y}=this,_=this.boundary.length,g=_-1,m=r.length,p,T,R=D=>{this[D+"Mark"]=o},C=D=>{delete this[D+"Mark"]},A=(D,H,q,Pe)=>{(H===void 0||H!==q)&&this[D](Pe&&Pe.subarray(H,q))},Z=(D,H)=>{let q=D+"Mark";q in this&&(H?(A(D,this[q],o,r),delete this[q]):(A(D,this[q],r.length,r),this[q]=0))};for(o=0;o<i;o++)switch(p=r[o],w){case j.START_BOUNDARY:if(S===c.length-2){if(p===_r)y|=dt.LAST_BOUNDARY;else if(p!==_n)return;S++;break}else if(S-1===c.length-2){if(y&dt.LAST_BOUNDARY&&p===_r)w=j.END,y=0;else if(!(y&dt.LAST_BOUNDARY)&&p===wn)S=0,A("onPartBegin"),w=j.HEADER_FIELD_START;else return;break}p!==c[S+2]&&(S=-2),p===c[S+2]&&S++;break;case j.HEADER_FIELD_START:w=j.HEADER_FIELD,R("onHeaderField"),S=0;case j.HEADER_FIELD:if(p===_n){C("onHeaderField"),w=j.HEADERS_ALMOST_DONE;break}if(S++,p===_r)break;if(p===Mc){if(S===1)return;Z("onHeaderField",!0),w=j.HEADER_VALUE_START;break}if(T=Hc(p),T<jc||T>Uc)return;break;case j.HEADER_VALUE_START:if(p===Nc)break;R("onHeaderValue"),w=j.HEADER_VALUE;case j.HEADER_VALUE:p===_n&&(Z("onHeaderValue",!0),A("onHeaderEnd"),w=j.HEADER_VALUE_ALMOST_DONE);break;case j.HEADER_VALUE_ALMOST_DONE:if(p!==wn)return;w=j.HEADER_FIELD_START;break;case j.HEADERS_ALMOST_DONE:if(p!==wn)return;A("onHeadersEnd"),w=j.PART_DATA_START;break;case j.PART_DATA_START:w=j.PART_DATA,R("onPartData");case j.PART_DATA:if(s=S,S===0){for(o+=g;o<m&&!(r[o]in d);)o+=_;o-=g,p=r[o]}if(S<c.length)c[S]===p?(S===0&&Z("onPartData",!0),S++):S=0;else if(S===c.length)S++,p===_n?y|=dt.PART_BOUNDARY:p===_r?y|=dt.LAST_BOUNDARY:S=0;else if(S-1===c.length)if(y&dt.PART_BOUNDARY){if(S=0,p===wn){y&=~dt.PART_BOUNDARY,A("onPartEnd"),A("onPartBegin"),w=j.HEADER_FIELD_START;break}}else y&dt.LAST_BOUNDARY&&p===_r?(A("onPartEnd"),w=j.END,y=0):S=0;if(S>0)l[S-1]=p;else if(s>0){let D=new Uint8Array(l.buffer,l.byteOffset,l.byteLength);A("onPartData",0,s,D),s=0,R("onPartData"),o--}break;case j.END:break;default:throw new Error(`Unexpected state entered: ${w}`)}Z("onHeaderField"),Z("onHeaderValue"),Z("onPartData"),this.index=S,this.state=w,this.flags=y}end(){if(this.state===j.HEADER_FIELD_START&&this.index===0||this.state===j.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==j.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var re=B(Bo=>{"use strict";Bo.fromCallback=function(t){return Object.defineProperty(function(...r){if(typeof r[r.length-1]=="function")t.apply(this,r);else return new Promise((o,i)=>{t.call(this,...r,(s,l)=>s!=null?i(s):o(l))})},"name",{value:t.name})};Bo.fromPromise=function(t){return Object.defineProperty(function(...r){let o=r[r.length-1];if(typeof o!="function")return t.apply(this,r);t.apply(this,r.slice(0,-1)).then(i=>o(null,i),o)},"name",{value:t.name})}});var Ja=B((wh,Qa)=>{var mt=require("constants"),tf=process.cwd,Tn=null,rf=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return Tn||(Tn=tf.call(process)),Tn};try{process.cwd()}catch{}typeof process.chdir=="function"&&(Oo=process.chdir,process.chdir=function(t){Tn=null,Oo.call(process,t)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Oo));var Oo;Qa.exports=nf;function nf(t){mt.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&r(t),t.lutimes||o(t),t.chown=l(t.chown),t.fchown=l(t.fchown),t.lchown=l(t.lchown),t.chmod=i(t.chmod),t.fchmod=i(t.fchmod),t.lchmod=i(t.lchmod),t.chownSync=c(t.chownSync),t.fchownSync=c(t.fchownSync),t.lchownSync=c(t.lchownSync),t.chmodSync=s(t.chmodSync),t.fchmodSync=s(t.fchmodSync),t.lchmodSync=s(t.lchmodSync),t.stat=d(t.stat),t.fstat=d(t.fstat),t.lstat=d(t.lstat),t.statSync=S(t.statSync),t.fstatSync=S(t.fstatSync),t.lstatSync=S(t.lstatSync),t.lchmod||(t.lchmod=function(y,_,g){g&&process.nextTick(g)},t.lchmodSync=function(){}),t.lchown||(t.lchown=function(y,_,g,m){m&&process.nextTick(m)},t.lchownSync=function(){}),rf==="win32"&&(t.rename=function(y){return function(_,g,m){var p=Date.now(),T=0;y(_,g,function R(C){if(C&&(C.code==="EACCES"||C.code==="EPERM")&&Date.now()-p<6e4){setTimeout(function(){t.stat(g,function(A,Z){A&&A.code==="ENOENT"?y(_,g,R):m(C)})},T),T<100&&(T+=10);return}m&&m(C)})}}(t.rename)),t.read=function(y){function _(g,m,p,T,R,C){var A;if(C&&typeof C=="function"){var Z=0;A=function(D,H,q){if(D&&D.code==="EAGAIN"&&Z<10)return Z++,y.call(t,g,m,p,T,R,A);C.apply(this,arguments)}}return y.call(t,g,m,p,T,R,A)}return Object.setPrototypeOf&&Object.setPrototypeOf(_,y),_}(t.read),t.readSync=function(y){return function(_,g,m,p,T){for(var R=0;;)try{return y.call(t,_,g,m,p,T)}catch(C){if(C.code==="EAGAIN"&&R<10){R++;continue}throw C}}}(t.readSync);function r(y){y.lchmod=function(_,g,m){y.open(_,mt.O_WRONLY|mt.O_SYMLINK,g,function(p,T){if(p){m&&m(p);return}y.fchmod(T,g,function(R){y.close(T,function(C){m&&m(R||C)})})})},y.lchmodSync=function(_,g){var m=y.openSync(_,mt.O_WRONLY|mt.O_SYMLINK,g),p=!0,T;try{T=y.fchmodSync(m,g),p=!1}finally{if(p)try{y.closeSync(m)}catch{}else y.closeSync(m)}return T}}function o(y){mt.hasOwnProperty("O_SYMLINK")?(y.lutimes=function(_,g,m,p){y.open(_,mt.O_SYMLINK,function(T,R){if(T){p&&p(T);return}y.futimes(R,g,m,function(C){y.close(R,function(A){p&&p(C||A)})})})},y.lutimesSync=function(_,g,m){var p=y.openSync(_,mt.O_SYMLINK),T,R=!0;try{T=y.futimesSync(p,g,m),R=!1}finally{if(R)try{y.closeSync(p)}catch{}else y.closeSync(p)}return T}):(y.lutimes=function(_,g,m,p){p&&process.nextTick(p)},y.lutimesSync=function(){})}function i(y){return y&&function(_,g,m){return y.call(t,_,g,function(p){w(p)&&(p=null),m&&m.apply(this,arguments)})}}function s(y){return y&&function(_,g){try{return y.call(t,_,g)}catch(m){if(!w(m))throw m}}}function l(y){return y&&function(_,g,m,p){return y.call(t,_,g,m,function(T){w(T)&&(T=null),p&&p.apply(this,arguments)})}}function c(y){return y&&function(_,g,m){try{return y.call(t,_,g,m)}catch(p){if(!w(p))throw p}}}function d(y){return y&&function(_,g,m){typeof g=="function"&&(m=g,g=null);function p(T,R){R&&(R.uid<0&&(R.uid+=4294967296),R.gid<0&&(R.gid+=4294967296)),m&&m.apply(this,arguments)}return g?y.call(t,_,g,p):y.call(t,_,p)}}function S(y){return y&&function(_,g){var m=g?y.call(t,_,g):y.call(t,_);return m&&(m.uid<0&&(m.uid+=4294967296),m.gid<0&&(m.gid+=4294967296)),m}}function w(y){if(!y||y.code==="ENOSYS")return!0;var _=!process.getuid||process.getuid()!==0;return!!(_&&(y.code==="EINVAL"||y.code==="EPERM"))}}});var Xa=B((_h,Za)=>{var Ka=require("stream").Stream;Za.exports=of;function of(t){return{ReadStream:r,WriteStream:o};function r(i,s){if(!(this instanceof r))return new r(i,s);Ka.call(this);var l=this;this.path=i,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,s=s||{};for(var c=Object.keys(s),d=0,S=c.length;d<S;d++){var w=c[d];this[w]=s[w]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){l._read()});return}t.open(this.path,this.flags,this.mode,function(y,_){if(y){l.emit("error",y),l.readable=!1;return}l.fd=_,l.emit("open",_),l._read()})}function o(i,s){if(!(this instanceof o))return new o(i,s);Ka.call(this),this.path=i,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,s=s||{};for(var l=Object.keys(s),c=0,d=l.length;c<d;c++){var S=l[c];this[S]=s[S]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var ts=B((Rh,es)=>{"use strict";es.exports=sf;var af=Object.getPrototypeOf||function(t){return t.__proto__};function sf(t){if(t===null||typeof t!="object")return t;if(t instanceof Object)var r={__proto__:af(t)};else var r=Object.create(null);return Object.getOwnPropertyNames(t).forEach(function(o){Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(t,o))}),r}});var Zt=B((Eh,qo)=>{var Y=require("fs"),lf=Ja(),uf=Xa(),cf=ts(),vn=require("util"),ie,An;typeof Symbol=="function"&&typeof Symbol.for=="function"?(ie=Symbol.for("graceful-fs.queue"),An=Symbol.for("graceful-fs.previous")):(ie="___graceful-fs.queue",An="___graceful-fs.previous");function ff(){}function os(t,r){Object.defineProperty(t,ie,{get:function(){return r}})}var Dt=ff;vn.debuglog?Dt=vn.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(Dt=function(){var t=vn.format.apply(vn,arguments);t="GFS4: "+t.split(/\n/).join(`
GFS4: `),console.error(t)});Y[ie]||(rs=global[ie]||[],os(Y,rs),Y.close=function(t){function r(o,i){return t.call(Y,o,function(s){s||ns(),typeof i=="function"&&i.apply(this,arguments)})}return Object.defineProperty(r,An,{value:t}),r}(Y.close),Y.closeSync=function(t){function r(o){t.apply(Y,arguments),ns()}return Object.defineProperty(r,An,{value:t}),r}(Y.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){Dt(Y[ie]),require("assert").equal(Y[ie].length,0)}));var rs;global[ie]||os(global,Y[ie]);qo.exports=Wo(cf(Y));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!Y.__patched&&(qo.exports=Wo(Y),Y.__patched=!0);function Wo(t){lf(t),t.gracefulify=Wo,t.createReadStream=D,t.createWriteStream=H;var r=t.readFile;t.readFile=o;function o(P,L,W){return typeof L=="function"&&(W=L,L=null),N(P,L,W);function N(V,J,G,oe){return r(V,J,function($){$&&($.code==="EMFILE"||$.code==="ENFILE")?Kt([N,[V,J,G],$,oe||Date.now(),Date.now()]):typeof G=="function"&&G.apply(this,arguments)})}}var i=t.writeFile;t.writeFile=s;function s(P,L,W,N){return typeof W=="function"&&(N=W,W=null),V(P,L,W,N);function V(J,G,oe,$,de){return i(J,G,oe,function(Q){Q&&(Q.code==="EMFILE"||Q.code==="ENFILE")?Kt([V,[J,G,oe,$],Q,de||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}var l=t.appendFile;l&&(t.appendFile=c);function c(P,L,W,N){return typeof W=="function"&&(N=W,W=null),V(P,L,W,N);function V(J,G,oe,$,de){return l(J,G,oe,function(Q){Q&&(Q.code==="EMFILE"||Q.code==="ENFILE")?Kt([V,[J,G,oe,$],Q,de||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}var d=t.copyFile;d&&(t.copyFile=S);function S(P,L,W,N){return typeof W=="function"&&(N=W,W=0),V(P,L,W,N);function V(J,G,oe,$,de){return d(J,G,oe,function(Q){Q&&(Q.code==="EMFILE"||Q.code==="ENFILE")?Kt([V,[J,G,oe,$],Q,de||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}var w=t.readdir;t.readdir=y;function y(P,L,W){return typeof L=="function"&&(W=L,L=null),N(P,L,W);function N(V,J,G,oe){return w(V,J,function($,de){$&&($.code==="EMFILE"||$.code==="ENFILE")?Kt([N,[V,J,G],$,oe||Date.now(),Date.now()]):(de&&de.sort&&de.sort(),typeof G=="function"&&G.call(this,$,de))})}}if(process.version.substr(0,4)==="v0.8"){var _=uf(t);R=_.ReadStream,A=_.WriteStream}var g=t.ReadStream;g&&(R.prototype=Object.create(g.prototype),R.prototype.open=C);var m=t.WriteStream;m&&(A.prototype=Object.create(m.prototype),A.prototype.open=Z),Object.defineProperty(t,"ReadStream",{get:function(){return R},set:function(P){R=P},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return A},set:function(P){A=P},enumerable:!0,configurable:!0});var p=R;Object.defineProperty(t,"FileReadStream",{get:function(){return p},set:function(P){p=P},enumerable:!0,configurable:!0});var T=A;Object.defineProperty(t,"FileWriteStream",{get:function(){return T},set:function(P){T=P},enumerable:!0,configurable:!0});function R(P,L){return this instanceof R?(g.apply(this,arguments),this):R.apply(Object.create(R.prototype),arguments)}function C(){var P=this;Pe(P.path,P.flags,P.mode,function(L,W){L?(P.autoClose&&P.destroy(),P.emit("error",L)):(P.fd=W,P.emit("open",W),P.read())})}function A(P,L){return this instanceof A?(m.apply(this,arguments),this):A.apply(Object.create(A.prototype),arguments)}function Z(){var P=this;Pe(P.path,P.flags,P.mode,function(L,W){L?(P.destroy(),P.emit("error",L)):(P.fd=W,P.emit("open",W))})}function D(P,L){return new t.ReadStream(P,L)}function H(P,L){return new t.WriteStream(P,L)}var q=t.open;t.open=Pe;function Pe(P,L,W,N){return typeof W=="function"&&(N=W,W=null),V(P,L,W,N);function V(J,G,oe,$,de){return q(J,G,oe,function(Q,jn){Q&&(Q.code==="EMFILE"||Q.code==="ENFILE")?Kt([V,[J,G,oe,$],Q,de||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}return t}function Kt(t){Dt("ENQUEUE",t[0].name,t[1]),Y[ie].push(t),Fo()}var Cn;function ns(){for(var t=Date.now(),r=0;r<Y[ie].length;++r)Y[ie][r].length>2&&(Y[ie][r][3]=t,Y[ie][r][4]=t);Fo()}function Fo(){if(clearTimeout(Cn),Cn=void 0,Y[ie].length!==0){var t=Y[ie].shift(),r=t[0],o=t[1],i=t[2],s=t[3],l=t[4];if(s===void 0)Dt("RETRY",r.name,o),r.apply(null,o);else if(Date.now()-s>=6e4){Dt("TIMEOUT",r.name,o);var c=o.pop();typeof c=="function"&&c.call(null,i)}else{var d=Date.now()-l,S=Math.max(l-s,1),w=Math.min(S*1.2,100);d>=w?(Dt("RETRY",r.name,o),r.apply(null,o.concat([s]))):Y[ie].push(t)}Cn===void 0&&(Cn=setTimeout(Fo,0))}}});var ue=B(et=>{"use strict";var is=re().fromCallback,le=Zt(),df=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(t=>typeof le[t]=="function");Object.assign(et,le);df.forEach(t=>{et[t]=is(le[t])});et.exists=function(t,r){return typeof r=="function"?le.exists(t,r):new Promise(o=>le.exists(t,o))};et.read=function(t,r,o,i,s,l){return typeof l=="function"?le.read(t,r,o,i,s,l):new Promise((c,d)=>{le.read(t,r,o,i,s,(S,w,y)=>{if(S)return d(S);c({bytesRead:w,buffer:y})})})};et.write=function(t,r,...o){return typeof o[o.length-1]=="function"?le.write(t,r,...o):new Promise((i,s)=>{le.write(t,r,...o,(l,c,d)=>{if(l)return s(l);i({bytesWritten:c,buffer:d})})})};et.readv=function(t,r,...o){return typeof o[o.length-1]=="function"?le.readv(t,r,...o):new Promise((i,s)=>{le.readv(t,r,...o,(l,c,d)=>{if(l)return s(l);i({bytesRead:c,buffers:d})})})};et.writev=function(t,r,...o){return typeof o[o.length-1]=="function"?le.writev(t,r,...o):new Promise((i,s)=>{le.writev(t,r,...o,(l,c,d)=>{if(l)return s(l);i({bytesWritten:c,buffers:d})})})};typeof le.realpath.native=="function"?et.realpath.native=is(le.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var ss=B((Th,as)=>{"use strict";var mf=require("path");as.exports.checkPath=function(r){if(process.platform==="win32"&&/[<>:"|?*]/.test(r.replace(mf.parse(r).root,""))){let i=new Error(`Path contains invalid characters: ${r}`);throw i.code="EINVAL",i}}});var fs=B((vh,Lo)=>{"use strict";var ls=ue(),{checkPath:us}=ss(),cs=t=>{let r={mode:511};return typeof t=="number"?t:{...r,...t}.mode};Lo.exports.makeDir=async(t,r)=>(us(t),ls.mkdir(t,{mode:cs(r),recursive:!0}));Lo.exports.makeDirSync=(t,r)=>(us(t),ls.mkdirSync(t,{mode:cs(r),recursive:!0}))});var Le=B((Ch,ds)=>{"use strict";var hf=re().fromPromise,{makeDir:pf,makeDirSync:Io}=fs(),xo=hf(pf);ds.exports={mkdirs:xo,mkdirsSync:Io,mkdirp:xo,mkdirpSync:Io,ensureDir:xo,ensureDirSync:Io}});var ht=B((Ah,hs)=>{"use strict";var yf=re().fromPromise,ms=ue();function bf(t){return ms.access(t).then(()=>!0).catch(()=>!1)}hs.exports={pathExists:yf(bf),pathExistsSync:ms.existsSync}});var $o=B((kh,ps)=>{"use strict";var Xt=ue(),gf=re().fromPromise;async function Sf(t,r,o){let i=await Xt.open(t,"r+"),s=null;try{await Xt.futimes(i,r,o)}finally{try{await Xt.close(i)}catch(l){s=l}}if(s)throw s}function wf(t,r,o){let i=Xt.openSync(t,"r+");return Xt.futimesSync(i,r,o),Xt.closeSync(i)}ps.exports={utimesMillis:gf(Sf),utimesMillisSync:wf}});var Bt=B((Dh,Ss)=>{"use strict";var er=ue(),ne=require("path"),ys=re().fromPromise;function _f(t,r,o){let i=o.dereference?s=>er.stat(s,{bigint:!0}):s=>er.lstat(s,{bigint:!0});return Promise.all([i(t),i(r).catch(s=>{if(s.code==="ENOENT")return null;throw s})]).then(([s,l])=>({srcStat:s,destStat:l}))}function Rf(t,r,o){let i,s=o.dereference?c=>er.statSync(c,{bigint:!0}):c=>er.lstatSync(c,{bigint:!0}),l=s(t);try{i=s(r)}catch(c){if(c.code==="ENOENT")return{srcStat:l,destStat:null};throw c}return{srcStat:l,destStat:i}}async function Ef(t,r,o,i){let{srcStat:s,destStat:l}=await _f(t,r,i);if(l){if(Tr(s,l)){let c=ne.basename(t),d=ne.basename(r);if(o==="move"&&c!==d&&c.toLowerCase()===d.toLowerCase())return{srcStat:s,destStat:l,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(s.isDirectory()&&!l.isDirectory())throw new Error(`Cannot overwrite non-directory '${r}' with directory '${t}'.`);if(!s.isDirectory()&&l.isDirectory())throw new Error(`Cannot overwrite directory '${r}' with non-directory '${t}'.`)}if(s.isDirectory()&&zo(t,r))throw new Error(kn(t,r,o));return{srcStat:s,destStat:l}}function Pf(t,r,o,i){let{srcStat:s,destStat:l}=Rf(t,r,i);if(l){if(Tr(s,l)){let c=ne.basename(t),d=ne.basename(r);if(o==="move"&&c!==d&&c.toLowerCase()===d.toLowerCase())return{srcStat:s,destStat:l,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(s.isDirectory()&&!l.isDirectory())throw new Error(`Cannot overwrite non-directory '${r}' with directory '${t}'.`);if(!s.isDirectory()&&l.isDirectory())throw new Error(`Cannot overwrite directory '${r}' with non-directory '${t}'.`)}if(s.isDirectory()&&zo(t,r))throw new Error(kn(t,r,o));return{srcStat:s,destStat:l}}async function bs(t,r,o,i){let s=ne.resolve(ne.dirname(t)),l=ne.resolve(ne.dirname(o));if(l===s||l===ne.parse(l).root)return;let c;try{c=await er.stat(l,{bigint:!0})}catch(d){if(d.code==="ENOENT")return;throw d}if(Tr(r,c))throw new Error(kn(t,o,i));return bs(t,r,l,i)}function gs(t,r,o,i){let s=ne.resolve(ne.dirname(t)),l=ne.resolve(ne.dirname(o));if(l===s||l===ne.parse(l).root)return;let c;try{c=er.statSync(l,{bigint:!0})}catch(d){if(d.code==="ENOENT")return;throw d}if(Tr(r,c))throw new Error(kn(t,o,i));return gs(t,r,l,i)}function Tr(t,r){return r.ino&&r.dev&&r.ino===t.ino&&r.dev===t.dev}function zo(t,r){let o=ne.resolve(t).split(ne.sep).filter(s=>s),i=ne.resolve(r).split(ne.sep).filter(s=>s);return o.every((s,l)=>i[l]===s)}function kn(t,r,o){return`Cannot ${o} '${t}' to a subdirectory of itself, '${r}'.`}Ss.exports={checkPaths:ys(Ef),checkPathsSync:Pf,checkParentPaths:ys(bs),checkParentPathsSync:gs,isSrcSubdir:zo,areIdentical:Tr}});var Ps=B((Bh,Es)=>{"use strict";var ae=ue(),vr=require("path"),{mkdirs:Tf}=Le(),{pathExists:vf}=ht(),{utimesMillis:Cf}=$o(),Cr=Bt();async function Af(t,r,o={}){typeof o=="function"&&(o={filter:o}),o.clobber="clobber"in o?!!o.clobber:!0,o.overwrite="overwrite"in o?!!o.overwrite:o.clobber,o.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001");let{srcStat:i,destStat:s}=await Cr.checkPaths(t,r,"copy",o);if(await Cr.checkParentPaths(t,i,r,"copy"),!await _s(t,r,o))return;let c=vr.dirname(r);await vf(c)||await Tf(c),await Rs(s,t,r,o)}async function _s(t,r,o){return o.filter?o.filter(t,r):!0}async function Rs(t,r,o,i){let l=await(i.dereference?ae.stat:ae.lstat)(r);if(l.isDirectory())return Of(l,t,r,o,i);if(l.isFile()||l.isCharacterDevice()||l.isBlockDevice())return kf(l,t,r,o,i);if(l.isSymbolicLink())return Wf(t,r,o,i);throw l.isSocket()?new Error(`Cannot copy a socket file: ${r}`):l.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${r}`):new Error(`Unknown file: ${r}`)}async function kf(t,r,o,i,s){if(!r)return ws(t,o,i,s);if(s.overwrite)return await ae.unlink(i),ws(t,o,i,s);if(s.errorOnExist)throw new Error(`'${i}' already exists`)}async function ws(t,r,o,i){if(await ae.copyFile(r,o),i.preserveTimestamps){Df(t.mode)&&await Bf(o,t.mode);let s=await ae.stat(r);await Cf(o,s.atime,s.mtime)}return ae.chmod(o,t.mode)}function Df(t){return(t&128)===0}function Bf(t,r){return ae.chmod(t,r|128)}async function Of(t,r,o,i,s){r||await ae.mkdir(i);let l=await ae.readdir(o);await Promise.all(l.map(async c=>{let d=vr.join(o,c),S=vr.join(i,c);if(!await _s(d,S,s))return;let{destStat:y}=await Cr.checkPaths(d,S,"copy",s);return Rs(y,d,S,s)})),r||await ae.chmod(i,t.mode)}async function Wf(t,r,o,i){let s=await ae.readlink(r);if(i.dereference&&(s=vr.resolve(process.cwd(),s)),!t)return ae.symlink(s,o);let l=null;try{l=await ae.readlink(o)}catch(c){if(c.code==="EINVAL"||c.code==="UNKNOWN")return ae.symlink(s,o);throw c}if(i.dereference&&(l=vr.resolve(process.cwd(),l)),Cr.isSrcSubdir(s,l))throw new Error(`Cannot copy '${s}' to a subdirectory of itself, '${l}'.`);if(Cr.isSrcSubdir(l,s))throw new Error(`Cannot overwrite '${l}' with '${s}'.`);return await ae.unlink(o),ae.symlink(s,o)}Es.exports=Af});var ks=B((Oh,As)=>{"use strict";var ce=Zt(),Ar=require("path"),Ff=Le().mkdirsSync,qf=$o().utimesMillisSync,kr=Bt();function Lf(t,r,o){typeof o=="function"&&(o={filter:o}),o=o||{},o.clobber="clobber"in o?!!o.clobber:!0,o.overwrite="overwrite"in o?!!o.overwrite:o.clobber,o.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:i,destStat:s}=kr.checkPathsSync(t,r,"copy",o);if(kr.checkParentPathsSync(t,i,r,"copy"),o.filter&&!o.filter(t,r))return;let l=Ar.dirname(r);return ce.existsSync(l)||Ff(l),Ts(s,t,r,o)}function Ts(t,r,o,i){let l=(i.dereference?ce.statSync:ce.lstatSync)(r);if(l.isDirectory())return jf(l,t,r,o,i);if(l.isFile()||l.isCharacterDevice()||l.isBlockDevice())return If(l,t,r,o,i);if(l.isSymbolicLink())return Vf(t,r,o,i);throw l.isSocket()?new Error(`Cannot copy a socket file: ${r}`):l.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${r}`):new Error(`Unknown file: ${r}`)}function If(t,r,o,i,s){return r?xf(t,o,i,s):vs(t,o,i,s)}function xf(t,r,o,i){if(i.overwrite)return ce.unlinkSync(o),vs(t,r,o,i);if(i.errorOnExist)throw new Error(`'${o}' already exists`)}function vs(t,r,o,i){return ce.copyFileSync(r,o),i.preserveTimestamps&&$f(t.mode,r,o),No(o,t.mode)}function $f(t,r,o){return zf(t)&&Nf(o,t),Mf(r,o)}function zf(t){return(t&128)===0}function Nf(t,r){return No(t,r|128)}function No(t,r){return ce.chmodSync(t,r)}function Mf(t,r){let o=ce.statSync(t);return qf(r,o.atime,o.mtime)}function jf(t,r,o,i,s){return r?Cs(o,i,s):Uf(t.mode,o,i,s)}function Uf(t,r,o,i){return ce.mkdirSync(o),Cs(r,o,i),No(o,t)}function Cs(t,r,o){ce.readdirSync(t).forEach(i=>Hf(i,t,r,o))}function Hf(t,r,o,i){let s=Ar.join(r,t),l=Ar.join(o,t);if(i.filter&&!i.filter(s,l))return;let{destStat:c}=kr.checkPathsSync(s,l,"copy",i);return Ts(c,s,l,i)}function Vf(t,r,o,i){let s=ce.readlinkSync(r);if(i.dereference&&(s=Ar.resolve(process.cwd(),s)),t){let l;try{l=ce.readlinkSync(o)}catch(c){if(c.code==="EINVAL"||c.code==="UNKNOWN")return ce.symlinkSync(s,o);throw c}if(i.dereference&&(l=Ar.resolve(process.cwd(),l)),kr.isSrcSubdir(s,l))throw new Error(`Cannot copy '${s}' to a subdirectory of itself, '${l}'.`);if(kr.isSrcSubdir(l,s))throw new Error(`Cannot overwrite '${l}' with '${s}'.`);return Yf(s,o)}else return ce.symlinkSync(s,o)}function Yf(t,r){return ce.unlinkSync(r),ce.symlinkSync(t,r)}As.exports=Lf});var Dn=B((Wh,Ds)=>{"use strict";var Gf=re().fromPromise;Ds.exports={copy:Gf(Ps()),copySync:ks()}});var Dr=B((Fh,Os)=>{"use strict";var Bs=Zt(),Qf=re().fromCallback;function Jf(t,r){Bs.rm(t,{recursive:!0,force:!0},r)}function Kf(t){Bs.rmSync(t,{recursive:!0,force:!0})}Os.exports={remove:Qf(Jf),removeSync:Kf}});var zs=B((qh,$s)=>{"use strict";var Zf=re().fromPromise,qs=ue(),Ls=require("path"),Is=Le(),xs=Dr(),Ws=Zf(async function(r){let o;try{o=await qs.readdir(r)}catch{return Is.mkdirs(r)}return Promise.all(o.map(i=>xs.remove(Ls.join(r,i))))});function Fs(t){let r;try{r=qs.readdirSync(t)}catch{return Is.mkdirsSync(t)}r.forEach(o=>{o=Ls.join(t,o),xs.removeSync(o)})}$s.exports={emptyDirSync:Fs,emptydirSync:Fs,emptyDir:Ws,emptydir:Ws}});var Us=B((Lh,js)=>{"use strict";var Xf=re().fromPromise,Ns=require("path"),tt=ue(),Ms=Le();async function ed(t){let r;try{r=await tt.stat(t)}catch{}if(r&&r.isFile())return;let o=Ns.dirname(t),i=null;try{i=await tt.stat(o)}catch(s){if(s.code==="ENOENT"){await Ms.mkdirs(o),await tt.writeFile(t,"");return}else throw s}i.isDirectory()?await tt.writeFile(t,""):await tt.readdir(o)}function td(t){let r;try{r=tt.statSync(t)}catch{}if(r&&r.isFile())return;let o=Ns.dirname(t);try{tt.statSync(o).isDirectory()||tt.readdirSync(o)}catch(i){if(i&&i.code==="ENOENT")Ms.mkdirsSync(o);else throw i}tt.writeFileSync(t,"")}js.exports={createFile:Xf(ed),createFileSync:td}});var Qs=B((Ih,Gs)=>{"use strict";var rd=re().fromPromise,Hs=require("path"),pt=ue(),Vs=Le(),{pathExists:nd}=ht(),{areIdentical:Ys}=Bt();async function od(t,r){let o;try{o=await pt.lstat(r)}catch{}let i;try{i=await pt.lstat(t)}catch(c){throw c.message=c.message.replace("lstat","ensureLink"),c}if(o&&Ys(i,o))return;let s=Hs.dirname(r);await nd(s)||await Vs.mkdirs(s),await pt.link(t,r)}function id(t,r){let o;try{o=pt.lstatSync(r)}catch{}try{let l=pt.lstatSync(t);if(o&&Ys(l,o))return}catch(l){throw l.message=l.message.replace("lstat","ensureLink"),l}let i=Hs.dirname(r);return pt.existsSync(i)||Vs.mkdirsSync(i),pt.linkSync(t,r)}Gs.exports={createLink:rd(od),createLinkSync:id}});var Ks=B((xh,Js)=>{"use strict";var yt=require("path"),Br=ue(),{pathExists:ad}=ht(),sd=re().fromPromise;async function ld(t,r){if(yt.isAbsolute(t)){try{await Br.lstat(t)}catch(l){throw l.message=l.message.replace("lstat","ensureSymlink"),l}return{toCwd:t,toDst:t}}let o=yt.dirname(r),i=yt.join(o,t);if(await ad(i))return{toCwd:i,toDst:t};try{await Br.lstat(t)}catch(l){throw l.message=l.message.replace("lstat","ensureSymlink"),l}return{toCwd:t,toDst:yt.relative(o,t)}}function ud(t,r){if(yt.isAbsolute(t)){if(!Br.existsSync(t))throw new Error("absolute srcpath does not exist");return{toCwd:t,toDst:t}}let o=yt.dirname(r),i=yt.join(o,t);if(Br.existsSync(i))return{toCwd:i,toDst:t};if(!Br.existsSync(t))throw new Error("relative srcpath does not exist");return{toCwd:t,toDst:yt.relative(o,t)}}Js.exports={symlinkPaths:sd(ld),symlinkPathsSync:ud}});var el=B(($h,Xs)=>{"use strict";var Zs=ue(),cd=re().fromPromise;async function fd(t,r){if(r)return r;let o;try{o=await Zs.lstat(t)}catch{return"file"}return o&&o.isDirectory()?"dir":"file"}function dd(t,r){if(r)return r;let o;try{o=Zs.lstatSync(t)}catch{return"file"}return o&&o.isDirectory()?"dir":"file"}Xs.exports={symlinkType:cd(fd),symlinkTypeSync:dd}});var ol=B((zh,nl)=>{"use strict";var md=re().fromPromise,tl=require("path"),Me=ue(),{mkdirs:hd,mkdirsSync:pd}=Le(),{symlinkPaths:yd,symlinkPathsSync:bd}=Ks(),{symlinkType:gd,symlinkTypeSync:Sd}=el(),{pathExists:wd}=ht(),{areIdentical:rl}=Bt();async function _d(t,r,o){let i;try{i=await Me.lstat(r)}catch{}if(i&&i.isSymbolicLink()){let[d,S]=await Promise.all([Me.stat(t),Me.stat(r)]);if(rl(d,S))return}let s=await yd(t,r);t=s.toDst;let l=await gd(s.toCwd,o),c=tl.dirname(r);return await wd(c)||await hd(c),Me.symlink(t,r,l)}function Rd(t,r,o){let i;try{i=Me.lstatSync(r)}catch{}if(i&&i.isSymbolicLink()){let d=Me.statSync(t),S=Me.statSync(r);if(rl(d,S))return}let s=bd(t,r);t=s.toDst,o=Sd(s.toCwd,o);let l=tl.dirname(r);return Me.existsSync(l)||pd(l),Me.symlinkSync(t,r,o)}nl.exports={createSymlink:md(_d),createSymlinkSync:Rd}});var dl=B((Nh,fl)=>{"use strict";var{createFile:il,createFileSync:al}=Us(),{createLink:sl,createLinkSync:ll}=Qs(),{createSymlink:ul,createSymlinkSync:cl}=ol();fl.exports={createFile:il,createFileSync:al,ensureFile:il,ensureFileSync:al,createLink:sl,createLinkSync:ll,ensureLink:sl,ensureLinkSync:ll,createSymlink:ul,createSymlinkSync:cl,ensureSymlink:ul,ensureSymlinkSync:cl}});var Bn=B((Mh,ml)=>{function Ed(t,{EOL:r=`
`,finalEOL:o=!0,replacer:i=null,spaces:s}={}){let l=o?r:"";return JSON.stringify(t,i,s).replace(/\n/g,r)+l}function Pd(t){return Buffer.isBuffer(t)&&(t=t.toString("utf8")),t.replace(/^\uFEFF/,"")}ml.exports={stringify:Ed,stripBom:Pd}});var bl=B((jh,yl)=>{var tr;try{tr=Zt()}catch{tr=require("fs")}var On=re(),{stringify:hl,stripBom:pl}=Bn();async function Td(t,r={}){typeof r=="string"&&(r={encoding:r});let o=r.fs||tr,i="throws"in r?r.throws:!0,s=await On.fromCallback(o.readFile)(t,r);s=pl(s);let l;try{l=JSON.parse(s,r?r.reviver:null)}catch(c){if(i)throw c.message=`${t}: ${c.message}`,c;return null}return l}var vd=On.fromPromise(Td);function Cd(t,r={}){typeof r=="string"&&(r={encoding:r});let o=r.fs||tr,i="throws"in r?r.throws:!0;try{let s=o.readFileSync(t,r);return s=pl(s),JSON.parse(s,r.reviver)}catch(s){if(i)throw s.message=`${t}: ${s.message}`,s;return null}}async function Ad(t,r,o={}){let i=o.fs||tr,s=hl(r,o);await On.fromCallback(i.writeFile)(t,s,o)}var kd=On.fromPromise(Ad);function Dd(t,r,o={}){let i=o.fs||tr,s=hl(r,o);return i.writeFileSync(t,s,o)}var Bd={readFile:vd,readFileSync:Cd,writeFile:kd,writeFileSync:Dd};yl.exports=Bd});var Sl=B((Uh,gl)=>{"use strict";var Wn=bl();gl.exports={readJson:Wn.readFile,readJsonSync:Wn.readFileSync,writeJson:Wn.writeFile,writeJsonSync:Wn.writeFileSync}});var Fn=B((Hh,Rl)=>{"use strict";var Od=re().fromPromise,Mo=ue(),wl=require("path"),_l=Le(),Wd=ht().pathExists;async function Fd(t,r,o="utf-8"){let i=wl.dirname(t);return await Wd(i)||await _l.mkdirs(i),Mo.writeFile(t,r,o)}function qd(t,...r){let o=wl.dirname(t);Mo.existsSync(o)||_l.mkdirsSync(o),Mo.writeFileSync(t,...r)}Rl.exports={outputFile:Od(Fd),outputFileSync:qd}});var Pl=B((Vh,El)=>{"use strict";var{stringify:Ld}=Bn(),{outputFile:Id}=Fn();async function xd(t,r,o={}){let i=Ld(r,o);await Id(t,i,o)}El.exports=xd});var vl=B((Yh,Tl)=>{"use strict";var{stringify:$d}=Bn(),{outputFileSync:zd}=Fn();function Nd(t,r,o){let i=$d(r,o);zd(t,i,o)}Tl.exports=Nd});var Al=B((Gh,Cl)=>{"use strict";var Md=re().fromPromise,fe=Sl();fe.outputJson=Md(Pl());fe.outputJsonSync=vl();fe.outputJSON=fe.outputJson;fe.outputJSONSync=fe.outputJsonSync;fe.writeJSON=fe.writeJson;fe.writeJSONSync=fe.writeJsonSync;fe.readJSON=fe.readJson;fe.readJSONSync=fe.readJsonSync;Cl.exports=fe});var Wl=B((Qh,Ol)=>{"use strict";var jd=ue(),kl=require("path"),{copy:Ud}=Dn(),{remove:Bl}=Dr(),{mkdirp:Hd}=Le(),{pathExists:Vd}=ht(),Dl=Bt();async function Yd(t,r,o={}){let i=o.overwrite||o.clobber||!1,{srcStat:s,isChangingCase:l=!1}=await Dl.checkPaths(t,r,"move",o);await Dl.checkParentPaths(t,s,r,"move");let c=kl.dirname(r);return kl.parse(c).root!==c&&await Hd(c),Gd(t,r,i,l)}async function Gd(t,r,o,i){if(!i){if(o)await Bl(r);else if(await Vd(r))throw new Error("dest already exists.")}try{await jd.rename(t,r)}catch(s){if(s.code!=="EXDEV")throw s;await Qd(t,r,o)}}async function Qd(t,r,o){return await Ud(t,r,{overwrite:o,errorOnExist:!0,preserveTimestamps:!0}),Bl(t)}Ol.exports=Yd});var xl=B((Jh,Il)=>{"use strict";var ql=Zt(),Uo=require("path"),Jd=Dn().copySync,Ll=Dr().removeSync,Kd=Le().mkdirpSync,Fl=Bt();function Zd(t,r,o){o=o||{};let i=o.overwrite||o.clobber||!1,{srcStat:s,isChangingCase:l=!1}=Fl.checkPathsSync(t,r,"move",o);return Fl.checkParentPathsSync(t,s,r,"move"),Xd(r)||Kd(Uo.dirname(r)),em(t,r,i,l)}function Xd(t){let r=Uo.dirname(t);return Uo.parse(r).root===r}function em(t,r,o,i){if(i)return jo(t,r,o);if(o)return Ll(r),jo(t,r,o);if(ql.existsSync(r))throw new Error("dest already exists.");return jo(t,r,o)}function jo(t,r,o){try{ql.renameSync(t,r)}catch(i){if(i.code!=="EXDEV")throw i;return tm(t,r,o)}}function tm(t,r,o){return Jd(t,r,{overwrite:o,errorOnExist:!0,preserveTimestamps:!0}),Ll(t)}Il.exports=Zd});var zl=B((Kh,$l)=>{"use strict";var rm=re().fromPromise;$l.exports={move:rm(Wl()),moveSync:xl()}});var Ml=B((Zh,Nl)=>{"use strict";Nl.exports={...ue(),...Dn(),...zs(),...dl(),...Al(),...Le(),...zl(),...Fn(),...ht(),...Dr()}});var am={};ua(am,{default:()=>nu});module.exports=Oc(am);var fa=require("@raycast/api"),{layout:Ht,columns:da,applyTo:ma,downloadSize:Vt,downloadDirectory:ct,autoDownload:ha,includeDownloadedWallpapers:ft}=(0,fa.getPreferenceValues)();var Va=Fe(require("node:http"),1),Ya=Fe(require("node:https"),1),kt=Fe(require("node:zlib"),1),_e=Fe(require("node:stream"),1),Pr=require("node:buffer");function Wc(t){if(!/^data:/i.test(t))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');t=t.replace(/\r?\n/g,"");let r=t.indexOf(",");if(r===-1||r<=4)throw new TypeError("malformed data: URI");let o=t.substring(5,r).split(";"),i="",s=!1,l=o[0]||"text/plain",c=l;for(let y=1;y<o.length;y++)o[y]==="base64"?s=!0:(c+=`;${o[y]}`,o[y].indexOf("charset=")===0&&(i=o[y].substring(8)));!o[0]&&!i.length&&(c+=";charset=US-ASCII",i="US-ASCII");let d=s?"base64":"ascii",S=unescape(t.substring(r+1)),w=Buffer.from(S,d);return w.type=l,w.typeFull=c,w.charset=i,w}var pa=Wc;var ve=Fe(require("node:stream"),1),Ze=require("node:util"),Se=require("node:buffer");gr();bn();var Ke=class extends Error{constructor(r,o){super(r),Error.captureStackTrace(this,this.constructor),this.type=o}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var he=class extends Ke{constructor(r,o,i){super(r,o),i&&(this.code=this.errno=i.code,this.erroredSysCall=i.syscall)}};var gn=Symbol.toStringTag,Po=t=>typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&typeof t.sort=="function"&&t[gn]==="URLSearchParams",wr=t=>t&&typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&/^(Blob|File)$/.test(t[gn]),Pa=t=>typeof t=="object"&&(t[gn]==="AbortSignal"||t[gn]==="EventTarget"),Ta=(t,r)=>{let o=new URL(r).hostname,i=new URL(t).hostname;return o===i||o.endsWith(`.${i}`)},va=(t,r)=>{let o=new URL(r).protocol,i=new URL(t).protocol;return o===i};var Gc=(0,Ze.promisify)(ve.default.pipeline),pe=Symbol("Body internals"),Ne=class{constructor(r,{size:o=0}={}){let i=null;r===null?r=null:Po(r)?r=Se.Buffer.from(r.toString()):wr(r)||Se.Buffer.isBuffer(r)||(Ze.types.isAnyArrayBuffer(r)?r=Se.Buffer.from(r):ArrayBuffer.isView(r)?r=Se.Buffer.from(r.buffer,r.byteOffset,r.byteLength):r instanceof ve.default||(r instanceof vt?(r=Ea(r),i=r.type.split("=")[1]):r=Se.Buffer.from(String(r))));let s=r;Se.Buffer.isBuffer(r)?s=ve.default.Readable.from(r):wr(r)&&(s=ve.default.Readable.from(r.stream())),this[pe]={body:r,stream:s,boundary:i,disturbed:!1,error:null},this.size=o,r instanceof ve.default&&r.on("error",l=>{let c=l instanceof Ke?l:new he(`Invalid response body while trying to fetch ${this.url}: ${l.message}`,"system",l);this[pe].error=c})}get body(){return this[pe].stream}get bodyUsed(){return this[pe].disturbed}async arrayBuffer(){let{buffer:r,byteOffset:o,byteLength:i}=await Co(this);return r.slice(o,o+i)}async formData(){let r=this.headers.get("content-type");if(r.startsWith("application/x-www-form-urlencoded")){let i=new vt,s=new URLSearchParams(await this.text());for(let[l,c]of s)i.append(l,c);return i}let{toFormData:o}=await Promise.resolve().then(()=>(Ba(),Da));return o(this.body,r)}async blob(){let r=this.headers&&this.headers.get("content-type")||this[pe].body&&this[pe].body.type||"",o=await this.arrayBuffer();return new Je([o],{type:r})}async json(){let r=await this.text();return JSON.parse(r)}async text(){let r=await Co(this);return new TextDecoder().decode(r)}buffer(){return Co(this)}};Ne.prototype.buffer=(0,Ze.deprecate)(Ne.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(Ne.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Ze.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function Co(t){if(t[pe].disturbed)throw new TypeError(`body used already for: ${t.url}`);if(t[pe].disturbed=!0,t[pe].error)throw t[pe].error;let{body:r}=t;if(r===null)return Se.Buffer.alloc(0);if(!(r instanceof ve.default))return Se.Buffer.alloc(0);let o=[],i=0;try{for await(let s of r){if(t.size>0&&i+s.length>t.size){let l=new he(`content size at ${t.url} over limit: ${t.size}`,"max-size");throw r.destroy(l),l}i+=s.length,o.push(s)}}catch(s){throw s instanceof Ke?s:new he(`Invalid response body while trying to fetch ${t.url}: ${s.message}`,"system",s)}if(r.readableEnded===!0||r._readableState.ended===!0)try{return o.every(s=>typeof s=="string")?Se.Buffer.from(o.join("")):Se.Buffer.concat(o,i)}catch(s){throw new he(`Could not create Buffer from response body for ${t.url}: ${s.message}`,"system",s)}else throw new he(`Premature close of server response while trying to fetch ${t.url}`)}var Gt=(t,r)=>{let o,i,{body:s}=t[pe];if(t.bodyUsed)throw new Error("cannot clone body after it is used");return s instanceof ve.default&&typeof s.getBoundary!="function"&&(o=new ve.PassThrough({highWaterMark:r}),i=new ve.PassThrough({highWaterMark:r}),s.pipe(o),s.pipe(i),t[pe].stream=o,s=i),s},Qc=(0,Ze.deprecate)(t=>t.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),Rn=(t,r)=>t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":Po(t)?"application/x-www-form-urlencoded;charset=UTF-8":wr(t)?t.type||null:Se.Buffer.isBuffer(t)||Ze.types.isAnyArrayBuffer(t)||ArrayBuffer.isView(t)?null:t instanceof vt?`multipart/form-data; boundary=${r[pe].boundary}`:t&&typeof t.getBoundary=="function"?`multipart/form-data;boundary=${Qc(t)}`:t instanceof ve.default?null:"text/plain;charset=UTF-8",Oa=t=>{let{body:r}=t[pe];return r===null?0:wr(r)?r.size:Se.Buffer.isBuffer(r)?r.length:r&&typeof r.getLengthSync=="function"&&r.hasKnownLength&&r.hasKnownLength()?r.getLengthSync():null},Wa=async(t,{body:r})=>{r===null?t.end():await Gc(r,t)};var Ao=require("node:util"),Rr=Fe(require("node:http"),1),En=typeof Rr.default.validateHeaderName=="function"?Rr.default.validateHeaderName:t=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(t)){let r=new TypeError(`Header name must be a valid HTTP token [${t}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}},ko=typeof Rr.default.validateHeaderValue=="function"?Rr.default.validateHeaderValue:(t,r)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let o=new TypeError(`Invalid character in header content ["${t}"]`);throw Object.defineProperty(o,"code",{value:"ERR_INVALID_CHAR"}),o}},we=class t extends URLSearchParams{constructor(r){let o=[];if(r instanceof t){let i=r.raw();for(let[s,l]of Object.entries(i))o.push(...l.map(c=>[s,c]))}else if(r!=null)if(typeof r=="object"&&!Ao.types.isBoxedPrimitive(r)){let i=r[Symbol.iterator];if(i==null)o.push(...Object.entries(r));else{if(typeof i!="function")throw new TypeError("Header pairs must be iterable");o=[...r].map(s=>{if(typeof s!="object"||Ao.types.isBoxedPrimitive(s))throw new TypeError("Each header pair must be an iterable object");return[...s]}).map(s=>{if(s.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...s]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return o=o.length>0?o.map(([i,s])=>(En(i),ko(i,String(s)),[String(i).toLowerCase(),String(s)])):void 0,super(o),new Proxy(this,{get(i,s,l){switch(s){case"append":case"set":return(c,d)=>(En(c),ko(c,String(d)),URLSearchParams.prototype[s].call(i,String(c).toLowerCase(),String(d)));case"delete":case"has":case"getAll":return c=>(En(c),URLSearchParams.prototype[s].call(i,String(c).toLowerCase()));case"keys":return()=>(i.sort(),new Set(URLSearchParams.prototype.keys.call(i)).keys());default:return Reflect.get(i,s,l)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(r){let o=this.getAll(r);if(o.length===0)return null;let i=o.join(", ");return/^content-encoding$/i.test(r)&&(i=i.toLowerCase()),i}forEach(r,o=void 0){for(let i of this.keys())Reflect.apply(r,o,[this.get(i),i,this])}*values(){for(let r of this.keys())yield this.get(r)}*entries(){for(let r of this.keys())yield[r,this.get(r)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((r,o)=>(r[o]=this.getAll(o),r),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((r,o)=>{let i=this.getAll(o);return o==="host"?r[o]=i[0]:r[o]=i.length>1?i:i[0],r},{})}};Object.defineProperties(we.prototype,["get","entries","forEach","values"].reduce((t,r)=>(t[r]={enumerable:!0},t),{}));function Fa(t=[]){return new we(t.reduce((r,o,i,s)=>(i%2===0&&r.push(s.slice(i,i+2)),r),[]).filter(([r,o])=>{try{return En(r),ko(r,String(o)),!0}catch{return!1}}))}var Jc=new Set([301,302,303,307,308]),Pn=t=>Jc.has(t);var qe=Symbol("Response internals"),Ce=class t extends Ne{constructor(r=null,o={}){super(r,o);let i=o.status!=null?o.status:200,s=new we(o.headers);if(r!==null&&!s.has("Content-Type")){let l=Rn(r,this);l&&s.append("Content-Type",l)}this[qe]={type:"default",url:o.url,status:i,statusText:o.statusText||"",headers:s,counter:o.counter,highWaterMark:o.highWaterMark}}get type(){return this[qe].type}get url(){return this[qe].url||""}get status(){return this[qe].status}get ok(){return this[qe].status>=200&&this[qe].status<300}get redirected(){return this[qe].counter>0}get statusText(){return this[qe].statusText}get headers(){return this[qe].headers}get highWaterMark(){return this[qe].highWaterMark}clone(){return new t(Gt(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(r,o=302){if(!Pn(o))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new t(null,{headers:{location:new URL(r).toString()},status:o})}static error(){let r=new t(null,{status:0,statusText:""});return r[qe].type="error",r}static json(r=void 0,o={}){let i=JSON.stringify(r);if(i===void 0)throw new TypeError("data is not JSON serializable");let s=new we(o&&o.headers);return s.has("content-type")||s.set("content-type","application/json"),new t(i,{...o,headers:s})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(Ce.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var ja=require("node:url"),Ua=require("node:util");var qa=t=>{if(t.search)return t.search;let r=t.href.length-1,o=t.hash||(t.href[r]==="#"?"#":"");return t.href[r-o.length]==="?"?"?":""};var Ia=require("node:net");function La(t,r=!1){return t==null||(t=new URL(t),/^(about|blob|data):$/.test(t.protocol))?"no-referrer":(t.username="",t.password="",t.hash="",r&&(t.pathname="",t.search=""),t)}var xa=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),$a="strict-origin-when-cross-origin";function za(t){if(!xa.has(t))throw new TypeError(`Invalid referrerPolicy: ${t}`);return t}function Kc(t){if(/^(http|ws)s:$/.test(t.protocol))return!0;let r=t.host.replace(/(^\[)|(]$)/g,""),o=(0,Ia.isIP)(r);return o===4&&/^127\./.test(r)||o===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(r)?!0:t.host==="localhost"||t.host.endsWith(".localhost")?!1:t.protocol==="file:"}function Qt(t){return/^about:(blank|srcdoc)$/.test(t)||t.protocol==="data:"||/^(blob|filesystem):$/.test(t.protocol)?!0:Kc(t)}function Na(t,{referrerURLCallback:r,referrerOriginCallback:o}={}){if(t.referrer==="no-referrer"||t.referrerPolicy==="")return null;let i=t.referrerPolicy;if(t.referrer==="about:client")return"no-referrer";let s=t.referrer,l=La(s),c=La(s,!0);l.toString().length>4096&&(l=c),r&&(l=r(l)),o&&(c=o(c));let d=new URL(t.url);switch(i){case"no-referrer":return"no-referrer";case"origin":return c;case"unsafe-url":return l;case"strict-origin":return Qt(l)&&!Qt(d)?"no-referrer":c.toString();case"strict-origin-when-cross-origin":return l.origin===d.origin?l:Qt(l)&&!Qt(d)?"no-referrer":c;case"same-origin":return l.origin===d.origin?l:"no-referrer";case"origin-when-cross-origin":return l.origin===d.origin?l:c;case"no-referrer-when-downgrade":return Qt(l)&&!Qt(d)?"no-referrer":l;default:throw new TypeError(`Invalid referrerPolicy: ${i}`)}}function Ma(t){let r=(t.get("referrer-policy")||"").split(/[,\s]+/),o="";for(let i of r)i&&xa.has(i)&&(o=i);return o}var te=Symbol("Request internals"),Er=t=>typeof t=="object"&&typeof t[te]=="object",Zc=(0,Ua.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),At=class t extends Ne{constructor(r,o={}){let i;if(Er(r)?i=new URL(r.url):(i=new URL(r),r={}),i.username!==""||i.password!=="")throw new TypeError(`${i} is an url with embedded credentials.`);let s=o.method||r.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(s)&&(s=s.toUpperCase()),!Er(o)&&"data"in o&&Zc(),(o.body!=null||Er(r)&&r.body!==null)&&(s==="GET"||s==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let l=o.body?o.body:Er(r)&&r.body!==null?Gt(r):null;super(l,{size:o.size||r.size||0});let c=new we(o.headers||r.headers||{});if(l!==null&&!c.has("Content-Type")){let w=Rn(l,this);w&&c.set("Content-Type",w)}let d=Er(r)?r.signal:null;if("signal"in o&&(d=o.signal),d!=null&&!Pa(d))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let S=o.referrer==null?r.referrer:o.referrer;if(S==="")S="no-referrer";else if(S){let w=new URL(S);S=/^about:(\/\/)?client$/.test(w)?"client":w}else S=void 0;this[te]={method:s,redirect:o.redirect||r.redirect||"follow",headers:c,parsedURL:i,signal:d,referrer:S},this.follow=o.follow===void 0?r.follow===void 0?20:r.follow:o.follow,this.compress=o.compress===void 0?r.compress===void 0?!0:r.compress:o.compress,this.counter=o.counter||r.counter||0,this.agent=o.agent||r.agent,this.highWaterMark=o.highWaterMark||r.highWaterMark||16384,this.insecureHTTPParser=o.insecureHTTPParser||r.insecureHTTPParser||!1,this.referrerPolicy=o.referrerPolicy||r.referrerPolicy||""}get method(){return this[te].method}get url(){return(0,ja.format)(this[te].parsedURL)}get headers(){return this[te].headers}get redirect(){return this[te].redirect}get signal(){return this[te].signal}get referrer(){if(this[te].referrer==="no-referrer")return"";if(this[te].referrer==="client")return"about:client";if(this[te].referrer)return this[te].referrer.toString()}get referrerPolicy(){return this[te].referrerPolicy}set referrerPolicy(r){this[te].referrerPolicy=za(r)}clone(){return new t(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(At.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var Ha=t=>{let{parsedURL:r}=t[te],o=new we(t[te].headers);o.has("Accept")||o.set("Accept","*/*");let i=null;if(t.body===null&&/^(post|put)$/i.test(t.method)&&(i="0"),t.body!==null){let d=Oa(t);typeof d=="number"&&!Number.isNaN(d)&&(i=String(d))}i&&o.set("Content-Length",i),t.referrerPolicy===""&&(t.referrerPolicy=$a),t.referrer&&t.referrer!=="no-referrer"?t[te].referrer=Na(t):t[te].referrer="no-referrer",t[te].referrer instanceof URL&&o.set("Referer",t.referrer),o.has("User-Agent")||o.set("User-Agent","node-fetch"),t.compress&&!o.has("Accept-Encoding")&&o.set("Accept-Encoding","gzip, deflate, br");let{agent:s}=t;typeof s=="function"&&(s=s(r));let l=qa(r),c={path:r.pathname+l,method:t.method,headers:o[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:t.insecureHTTPParser,agent:s};return{parsedURL:r,options:c}};var Jt=class extends Ke{constructor(r,o="aborted"){super(r,o)}};bn();To();var Xc=new Set(["data:","http:","https:"]);async function Xe(t,r){return new Promise((o,i)=>{let s=new At(t,r),{parsedURL:l,options:c}=Ha(s);if(!Xc.has(l.protocol))throw new TypeError(`node-fetch cannot load ${t}. URL scheme "${l.protocol.replace(/:$/,"")}" is not supported.`);if(l.protocol==="data:"){let p=pa(s.url),T=new Ce(p,{headers:{"Content-Type":p.typeFull}});o(T);return}let d=(l.protocol==="https:"?Ya.default:Va.default).request,{signal:S}=s,w=null,y=()=>{let p=new Jt("The operation was aborted.");i(p),s.body&&s.body instanceof _e.default.Readable&&s.body.destroy(p),!(!w||!w.body)&&w.body.emit("error",p)};if(S&&S.aborted){y();return}let _=()=>{y(),m()},g=d(l.toString(),c);S&&S.addEventListener("abort",_);let m=()=>{g.abort(),S&&S.removeEventListener("abort",_)};g.on("error",p=>{i(new he(`request to ${s.url} failed, reason: ${p.message}`,"system",p)),m()}),ef(g,p=>{w&&w.body&&w.body.destroy(p)}),process.version<"v14"&&g.on("socket",p=>{let T;p.prependListener("end",()=>{T=p._eventsCount}),p.prependListener("close",R=>{if(w&&T<p._eventsCount&&!R){let C=new Error("Premature close");C.code="ERR_STREAM_PREMATURE_CLOSE",w.body.emit("error",C)}})}),g.on("response",p=>{g.setTimeout(0);let T=Fa(p.rawHeaders);if(Pn(p.statusCode)){let D=T.get("Location"),H=null;try{H=D===null?null:new URL(D,s.url)}catch{if(s.redirect!=="manual"){i(new he(`uri requested responds with an invalid redirect URL: ${D}`,"invalid-redirect")),m();return}}switch(s.redirect){case"error":i(new he(`uri requested responds with a redirect, redirect mode is set to error: ${s.url}`,"no-redirect")),m();return;case"manual":break;case"follow":{if(H===null)break;if(s.counter>=s.follow){i(new he(`maximum redirect reached at: ${s.url}`,"max-redirect")),m();return}let q={headers:new we(s.headers),follow:s.follow,counter:s.counter+1,agent:s.agent,compress:s.compress,method:s.method,body:Gt(s),signal:s.signal,size:s.size,referrer:s.referrer,referrerPolicy:s.referrerPolicy};if(!Ta(s.url,H)||!va(s.url,H))for(let P of["authorization","www-authenticate","cookie","cookie2"])q.headers.delete(P);if(p.statusCode!==303&&s.body&&r.body instanceof _e.default.Readable){i(new he("Cannot follow redirect with body being a readable stream","unsupported-redirect")),m();return}(p.statusCode===303||(p.statusCode===301||p.statusCode===302)&&s.method==="POST")&&(q.method="GET",q.body=void 0,q.headers.delete("content-length"));let Pe=Ma(T);Pe&&(q.referrerPolicy=Pe),o(Xe(new At(H,q))),m();return}default:return i(new TypeError(`Redirect option '${s.redirect}' is not a valid value of RequestRedirect`))}}S&&p.once("end",()=>{S.removeEventListener("abort",_)});let R=(0,_e.pipeline)(p,new _e.PassThrough,D=>{D&&i(D)});process.version<"v12.10"&&p.on("aborted",_);let C={url:s.url,status:p.statusCode,statusText:p.statusMessage,headers:T,size:s.size,counter:s.counter,highWaterMark:s.highWaterMark},A=T.get("Content-Encoding");if(!s.compress||s.method==="HEAD"||A===null||p.statusCode===204||p.statusCode===304){w=new Ce(R,C),o(w);return}let Z={flush:kt.default.Z_SYNC_FLUSH,finishFlush:kt.default.Z_SYNC_FLUSH};if(A==="gzip"||A==="x-gzip"){R=(0,_e.pipeline)(R,kt.default.createGunzip(Z),D=>{D&&i(D)}),w=new Ce(R,C),o(w);return}if(A==="deflate"||A==="x-deflate"){let D=(0,_e.pipeline)(p,new _e.PassThrough,H=>{H&&i(H)});D.once("data",H=>{(H[0]&15)===8?R=(0,_e.pipeline)(R,kt.default.createInflate(),q=>{q&&i(q)}):R=(0,_e.pipeline)(R,kt.default.createInflateRaw(),q=>{q&&i(q)}),w=new Ce(R,C),o(w)}),D.once("end",()=>{w||(w=new Ce(R,C),o(w))});return}if(A==="br"){R=(0,_e.pipeline)(R,kt.default.createBrotliDecompress(),D=>{D&&i(D)}),w=new Ce(R,C),o(w);return}w=new Ce(R,C),o(w)}),Wa(g,s).catch(i)})}function ef(t,r){let o=Pr.Buffer.from(`0\r
\r
`),i=!1,s=!1,l;t.on("response",c=>{let{headers:d}=c;i=d["transfer-encoding"]==="chunked"&&!d["content-length"]}),t.on("socket",c=>{let d=()=>{if(i&&!s){let w=new Error("Premature close");w.code="ERR_STREAM_PREMATURE_CLOSE",r(w)}},S=w=>{s=Pr.Buffer.compare(w.slice(-5),o)===0,!s&&l&&(s=Pr.Buffer.compare(l.slice(-3),o.slice(0,3))===0&&Pr.Buffer.compare(w.slice(-2),o.slice(3))===0),l=w};c.prependListener("close",d),c.on("data",S),t.on("close",()=>{c.removeListener("close",d),c.removeListener("data",S)})})}var Do=(t=0,r=8)=>`https://www.bing.com/HPImageArchive.aspx?format=js&idx=${t}&n=${r}&pid=hp&uhd=1&uhdwidth=3840&uhdheight=2160`,ye=(t,r="raw",o=3840,i=2160)=>{let s;switch(r){case"raw":{s=t.replace("&w=3840&h=2160&rs=1&c=4","");break}case"full":{s=t;break}case"regular":{s=t.replace("3840","2560").replace("2160","1440");break}case"small":{s=t.replace("3840","1920").replace("2160","1080");break}default:{s=t.replace("3840",o+"").replace("2160",i+"");break}}return"https://www.bing.com"+s},Ga=t=>"https://www.bing.com"+t,Re=t=>{let o=t.indexOf("_");return t.substring(11,o)};var bt=require("@raycast/api"),Ue=require("react");var z=require("@raycast/api"),je=Fe(Ml());var jl=Fe(require("node:process"),1),Ul=require("node:util"),Ho=require("node:child_process"),nm=(0,Ul.promisify)(Ho.execFile);async function Vo(t,{humanReadableOutput:r=!0}={}){if(jl.default.platform!=="darwin")throw new Error("macOS only");let o=r?[]:["-ss"],{stdout:i}=await nm("osascript",["-e",t,o]);return i.trim()}var xn=require("os");var qn=(i=>(i.ALL="All",i.ONLINE="Online",i.DOWNLOADED="Downloaded",i))(qn||{}),Ln=Object.entries(qn),Hl=[".png",".jpg",".heic"];var Go=require("path");var Yo=t=>`
      set temp_folder to (POSIX path of "${t}")
      set q_temp_folder to quoted form of temp_folder
      
      set x to alias (POSIX file temp_folder)

      try
        tell application "System Events"
          tell ${ma} desktop
            set picture to (x as text)
            return "ok"
          end tell
        end tell
      on error
        return "error"
      end try
    `;var In=z.environment.supportPath,om=t=>!(t!=null&&String(t).length>0),Vl=t=>`${In.endsWith("/")?In:`${In}/`}${t}.png`;async function im(t,r){let o=Vl(t);if((0,je.existsSync)(o))return o;let i=await Xe(r).catch(async s=>{await(0,z.showToast)(z.Toast.Style.Failure,String(s))});if(i){let s=await i.arrayBuffer();je.default.writeFile(Vl(t),Buffer.from(s),async l=>{l&&await(0,z.showToast)(z.Toast.Style.Failure,String(l))})}return o}var Or=async(t,r,o=!0)=>{let i=o?await(0,z.showToast)(z.Toast.Style.Animated,"Downloading wallpaper..."):void 0;await je.default.emptydir(In);try{let s=await im(t,r);i&&(i.title="Setting wallpaper...");let l=await Vo(Yo(s));l!=="ok"?o&&i&&(i.style=z.Toast.Style.Failure,i.title=l):i&&(i.style=z.Toast.Style.Success,i.title="Set wallpaper successfully!")}catch(s){console.error(s),i&&(i.style=z.Toast.Style.Failure,i.title="Something went wrong.",i.message="Try with another image or check your internet connection.")}},Wr=async(t,r=!0)=>{let o=r?await(0,z.showToast)(z.Toast.Style.Animated,"Setting wallpaper..."):void 0;try{let i=await Vo(Yo(t));i!=="ok"?r&&o&&(o.style=z.Toast.Style.Failure,o.title=i):o&&(o.style=z.Toast.Style.Success,o.title="Set wallpaper successfully!")}catch(i){console.error(i),o&&(o.style=z.Toast.Style.Failure,o.title="Something went wrong.",o.message="Try with another image.")}},Qo=()=>{let t=ct;return ct.startsWith("~")&&(t=ct.replace("~",`${(0,xn.homedir)()}`)),om(t)||!je.default.pathExistsSync(t)?(0,xn.homedir)()+"/Downloads":t.endsWith("/")?t.substring(0,-1):t};async function $n(t,r){await(0,z.showToast)(z.Toast.Style.Animated,"Downloading..."),Xe(ye(r.url,t)).then(function(o){return o.arrayBuffer()}).then(function(o){let i=`${Qo()}/${Re(r.url)}-${r.startdate}.png`;je.default.writeFile(i,Buffer.from(o),async s=>{if(s)await(0,z.showToast)(z.Toast.Style.Failure,String(s));else{let l={style:z.Toast.Style.Success,title:"Download picture success!",message:`${i.replace(`${(0,xn.homedir)()}`,"~")}`,primaryAction:{title:"Open picture",onAction:c=>{(0,z.open)(i),c.hide()}},secondaryAction:{title:"Show in finder",onAction:c=>{(0,z.showInFinder)(i),c.hide()}}};await(0,z.showToast)(l)}})})}async function Yl(t,r){r.forEach(o=>{let i=`${Qo()}/${Re(o.url)}-${o.startdate}.png`;je.default.existsSync(i)||Xe(ye(o.url,t)).then(function(s){return s.arrayBuffer()}).then(function(s){je.default.writeFile(i,Buffer.from(s),async l=>{l&&console.error(String(l))})})})}function Gl(){let t=[];try{let r=Qo();return je.default.readdirSync(r).forEach(i=>{Hl.includes((0,Go.parse)(i).ext)&&!i.startsWith(".")&&t.push({name:(0,Go.parse)(i).name,path:r+"/"+i})}),t}catch(r){return console.error(r),t}}var Ql=t=>{let[r,o]=(0,Ue.useState)([]),[i,s]=(0,Ue.useState)([]),[l,c]=(0,Ue.useState)(!0),d=(0,Ue.useCallback)(async()=>{try{Xe(Do(0,8)).then(S=>S.json()).then(S=>{Xe(Do(8,8)).then(w=>w.json()).then(w=>{w.images.shift();let y=S.images.concat(w.images);o(y),t&&s(Gl()),c(!1)}).catch(async w=>{await(0,bt.showToast)(bt.Toast.Style.Failure,String(w)),c(!1)})}).catch(async S=>{await(0,bt.showToast)(bt.Toast.Style.Failure,String(S)),c(!1)})}catch(S){if(S instanceof Jt)return;await(0,bt.showToast)(bt.Toast.Style.Failure,String(S))}},[]);return(0,Ue.useEffect)(()=>{d()},[d]),{bingWallpaperHD:r,downloadedBingWallpapers:i,isLoading:l}},Jl=t=>{let r=(0,Ue.useCallback)(async()=>{try{ha&&await Yl(Vt,t)}catch(o){console.error(String(o))}},[t]);(0,Ue.useEffect)(()=>{r()},[r])};var He=require("@raycast/api"),Xl=require("react");var Wt=require("@raycast/api");var gt=require("@raycast/api"),Jo=require("react/jsx-runtime");function rt(){return(0,Jo.jsx)(gt.ActionPanel.Section,{children:(0,Jo.jsx)(gt.Action,{icon:gt.Icon.Gear,title:"Configure Extension",shortcut:{modifiers:["shift","cmd"],key:","},onAction:gt.openExtensionPreferences})})}var Ot=require("react/jsx-runtime");function zn(t){let{layout:r}=t;return r==="List"?(0,Ot.jsx)(Wt.List.EmptyView,{icon:{source:{light:"empty-view-icon.png",dark:"empty-view-icon@dark.png"}},title:"No wallpapers",description:"",actions:(0,Ot.jsx)(Wt.ActionPanel,{children:(0,Ot.jsx)(rt,{})})}):(0,Ot.jsx)(Wt.Grid.EmptyView,{icon:{source:{light:"empty-view-icon.png",dark:"empty-view-icon@dark.png"}},title:"No wallpapers",description:"",actions:(0,Ot.jsx)(Wt.ActionPanel,{children:(0,Ot.jsx)(rt,{})})})}var U=require("@raycast/api");var ee=require("@raycast/api"),Zl=require("react");var Kl=Fe(require("path"),1);function Fr(t,r={}){if(typeof t!="string")throw new TypeError(`Expected a string, got ${typeof t}`);let{resolve:o=!0}=r,i=t;return o&&(i=Kl.default.resolve(t)),i=i.replace(/\\/g,"/"),i[0]!=="/"&&(i=`/${i}`),encodeURI(`file://${i}`).replace(/[?#]/g,encodeURIComponent)}var Ie=require("react/jsx-runtime");function qr(t){let{isOnline:r,index:o,onlineImages:i,downloadedImage:s}=t,l=i.length+s.length,[c,d]=(0,Zl.useState)({index:r?o:o+i.length,isOnline:r});return(0,Ie.jsx)(ee.Detail,{navigationTitle:c.isOnline?Re(i[c.index].url):s[c.index-i.length].name,markdown:`<img src="${c.isOnline?ye(i[c.index].url,"icon",960,540):Fr(s[c.index-i.length].path)}" alt="" height="360" />`,actions:(0,Ie.jsxs)(ee.ActionPanel,{children:[(0,Ie.jsx)(ee.Action,{icon:ee.Icon.ChevronDown,title:"Next",onAction:()=>{c.index!==l-1&&d({index:c.index+1,isOnline:c.index+1<i.length})}}),(0,Ie.jsx)(ee.Action,{icon:ee.Icon.ChevronUp,title:"Previous",onAction:()=>{c.index!==0&&d({index:c.index-1,isOnline:c.index-1<i.length})}}),(0,Ie.jsxs)(ee.ActionPanel.Section,{children:[(0,Ie.jsx)(ee.Action,{icon:ee.Icon.Desktop,title:"Set Desktop Wallpaper",shortcut:{modifiers:["cmd"],key:"s"},onAction:()=>{c.isOnline?Or(Re(i[c.index].url),ye(i[c.index].url,"raw")).then(()=>""):Wr(s[c.index-i.length].path).then(()=>"")}}),c.isOnline&&(0,Ie.jsx)(ee.Action,{icon:ee.Icon.Download,title:"Download Wallpaper",shortcut:{modifiers:["cmd"],key:"d"},onAction:async()=>{await $n(Vt,i[c.index])}}),(0,Ie.jsx)(ee.Action,{icon:ee.Icon.ChevronLeft,title:"Back",shortcut:{modifiers:["cmd"],key:"y"},onAction:(0,ee.useNavigation)().pop})]}),(0,Ie.jsx)(rt,{})]})})}var Ee=require("react/jsx-runtime");function Nn(t){let{index:r,bingImage:o,onlineImages:i,downloadedImages:s}=t;return(0,Ee.jsxs)(U.ActionPanel,{children:[(0,Ee.jsx)(U.Action,{icon:U.Icon.Desktop,title:"Set Desktop Wallpaper",onAction:()=>{Or(Re(o.url)+"-"+o.startdate,ye(o.url,"raw")).then(()=>"")}}),(0,Ee.jsx)(U.Action,{icon:U.Icon.Download,title:"Download Wallpaper",onAction:async()=>{await $n(Vt,o)}}),(0,Ee.jsx)(U.Action.Push,{icon:U.Icon.Eye,title:"Preview Wallpaper",shortcut:{modifiers:["cmd"],key:"y"},target:(0,Ee.jsx)(qr,{isOnline:!0,index:r,onlineImages:i,downloadedImage:s})}),(0,Ee.jsx)(U.Action,{icon:U.Icon.Finder,title:"Open Wallpaper Folder",shortcut:{modifiers:["shift","cmd"],key:"enter"},onAction:async()=>{await(0,U.open)(ct)}}),(0,Ee.jsxs)(U.ActionPanel.Section,{children:[(0,Ee.jsx)(U.Action,{icon:U.Icon.Repeat,title:"Set Random Wallpaper",shortcut:{modifiers:["cmd"],key:"r"},onAction:()=>{let l=i[Math.floor(Math.random()*i.length)];Or(Re(l.url)+"-"+l.startdate,ye(l.url,"raw")).then(()=>"")}}),(0,Ee.jsx)(U.Action,{icon:U.Icon.MagnifyingGlass,title:"Search Wallpaper",shortcut:{modifiers:["shift","cmd"],key:"s"},onAction:async()=>{await(0,U.open)(Ga(o.copyrightlink)),await(0,U.showHUD)("Search picture in browser")}}),(0,Ee.jsx)(U.Action,{icon:U.Icon.Globe,title:"More Bing Wallpaper",shortcut:{modifiers:["shift","cmd"],key:"m"},onAction:async()=>{await(0,U.open)("https://github.com/niumoo/bing-wallpaper"),await(0,U.showHUD)("Get more bing wallpaper")}})]}),(0,Ee.jsx)(rt,{})]})}var K=require("@raycast/api");var Ae=require("react/jsx-runtime");function Mn(t){let{index:r,bingImage:o,onlineImages:i,downloadedImages:s}=t;return(0,Ae.jsxs)(K.ActionPanel,{children:[(0,Ae.jsx)(K.Action,{icon:K.Icon.Desktop,title:"Set Desktop Wallpaper",onAction:()=>{Wr(o.path).then(()=>"")}}),(0,Ae.jsx)(K.Action.ShowInFinder,{path:o.path}),(0,Ae.jsx)(K.Action.Push,{icon:K.Icon.Sidebar,title:"Preview Wallpaper",shortcut:{modifiers:["cmd"],key:"y"},target:(0,Ae.jsx)(qr,{isOnline:!1,index:r,onlineImages:i,downloadedImage:s})}),(0,Ae.jsx)(K.Action,{icon:K.Icon.Finder,title:"Open Wallpaper Folder",shortcut:{modifiers:["shift","cmd"],key:"enter"},onAction:async()=>{await(0,K.open)(ct)}}),(0,Ae.jsxs)(K.ActionPanel.Section,{children:[(0,Ae.jsx)(K.Action,{icon:K.Icon.ArrowClockwise,title:"Set Random Wallpaper",shortcut:{modifiers:["cmd"],key:"r"},onAction:()=>{let l=s[Math.floor(Math.random()*s.length)];Wr(l.path).then(()=>"")}}),(0,Ae.jsx)(K.Action,{icon:K.Icon.Globe,title:"More Bing Wallpaper",shortcut:{modifiers:["shift","cmd"],key:"m"},onAction:async()=>{await(0,K.open)("https://github.com/niumoo/bing-wallpaper"),await(0,K.showHUD)("Get more bing wallpaper")}})]}),(0,Ae.jsx)(rt,{})]})}var be=require("react/jsx-runtime");function eu(t){let[r,o]=(0,Xl.useState)(""),{isLoading:i,bingWallpaperHD:s,downloadedBingWallpapers:l}=t;return(0,be.jsxs)(He.List,{isShowingDetail:s.length!==0&&!i,isLoading:i,searchBarPlaceholder:"Search wallpapers",searchBarAccessory:ft?(0,be.jsx)(He.List.Dropdown,{onChange:o,tooltip:"Wallpaper type",storeValue:!0,children:Ln.map((c,d)=>(0,be.jsx)(He.List.Dropdown.Item,{title:c[1],value:c[1]},d+"_"+c[0]))}):null,children:[(0,be.jsx)(zn,{layout:Ht}),(r==="All"||r==="Online"||r==="")&&(0,be.jsx)(He.List.Section,{title:"Online Wallpapers",children:s.map((c,d)=>(0,be.jsx)(He.List.Item,{id:d+c.url,icon:{source:ye(c.url,"icon",64,36)},title:Re(c.url),detail:(0,be.jsx)(He.List.Item.Detail,{isLoading:!1,markdown:`![](${ye(c.url,"icon",960,540)})
                    
## ${c.title}

${c.copyright}`}),actions:(0,be.jsx)(Nn,{index:d,bingImage:c,downloadedImages:l,onlineImages:s})},d+c.startdate))}),ft&&(r==="All"||r==="Downloaded")&&(0,be.jsx)(He.List.Section,{title:"Downloaded Wallpapers",children:l?.map((c,d)=>(0,be.jsx)(He.List.Item,{id:d+c.name,icon:{source:c.path},title:c.name,detail:(0,be.jsx)(He.List.Item.Detail,{isLoading:!1,markdown:`<img src="${Fr(c.path)}" alt="${c.name}" height="270" />`}),actions:(0,be.jsx)(Mn,{index:d,bingImage:c,onlineImages:s,downloadedImages:l})},d+c.name))})]})}var xe=require("@raycast/api"),tu=require("react");var ke=require("react/jsx-runtime");function ru(t){let[r,o]=(0,tu.useState)(""),{isLoading:i,bingWallpaperHD:s,downloadedBingWallpapers:l}=t;return(0,ke.jsxs)(xe.Grid,{isLoading:i,columns:parseInt(da),aspectRatio:"16/9",fit:xe.Grid.Fit.Fill,searchBarPlaceholder:"Search wallpapers",searchBarAccessory:ft?(0,ke.jsx)(xe.Grid.Dropdown,{onChange:o,tooltip:"Wallpaper type",storeValue:!0,children:Ln.map((c,d)=>(0,ke.jsx)(xe.Grid.Dropdown.Item,{title:c[1],value:c[1]},d+"_"+c[0]))}):null,children:[(0,ke.jsx)(zn,{layout:Ht}),(r==="All"||r==="Online"||r==="")&&(0,ke.jsx)(xe.Grid.Section,{title:"Online Wallpapers",children:s.map((c,d)=>(0,ke.jsx)(xe.Grid.Item,{id:d+c.url,content:ye(c.url,"icon",960,540),title:Re(c.url),accessory:{icon:xe.Icon.Info,tooltip:c.copyright},actions:(0,ke.jsx)(Nn,{index:d,bingImage:c,onlineImages:s,downloadedImages:l})},d+c.startdate))}),ft&&(r==="All"||r==="Downloaded")&&(0,ke.jsx)(xe.Grid.Section,{title:"Downloaded Wallpapers",children:l?.map((c,d)=>(0,ke.jsx)(xe.Grid.Item,{id:d+c.name,content:{source:c.path},title:c.name,actions:(0,ke.jsx)(Mn,{index:d,bingImage:c,onlineImages:s,downloadedImages:l})},d+c.name))})]})}var Ko=require("react/jsx-runtime");function nu(){let{bingWallpaperHD:t,downloadedBingWallpapers:r,isLoading:o}=Ql(ft);return Jl(t),Ht==="List"?(0,Ko.jsx)(eu,{isLoading:o,bingWallpaperHD:t,downloadedBingWallpapers:r}):(0,Ko.jsx)(ru,{isLoading:o,bingWallpaperHD:t,downloadedBingWallpapers:r})}
/*! Bundled license information:

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)
*/
