"use strict";var zl=Object.create;var jr=Object.defineProperty;var $l=Object.getOwnPropertyDescriptor;var Nl=Object.getOwnPropertyNames;var jl=Object.getPrototypeOf,Ml=Object.prototype.hasOwnProperty;var Jt=(t,n)=>()=>(t&&(n=t(t=0)),n);var q=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports),Ao=(t,n)=>{for(var i in n)jr(t,i,{get:n[i],enumerable:!0})},ko=(t,n,i,a)=>{if(n&&typeof n=="object"||typeof n=="function")for(let s of Nl(n))!Ml.call(t,s)&&s!==i&&jr(t,s,{get:()=>n[s],enumerable:!(a=$l(n,s))||a.enumerable});return t};var Ae=(t,n,i)=>(i=t!=null?zl(jl(t)):{},ko(n||!t||!t.__esModule?jr(i,"default",{value:t,enumerable:!0}):i,t)),Ul=t=>ko(jr({},"__esModule",{value:!0}),t);var Do=q((Mr,qo)=>{(function(t,n){typeof Mr=="object"&&typeof qo<"u"?n(Mr):typeof define=="function"&&define.amd?define(["exports"],n):(t=typeof globalThis<"u"?globalThis:t||self,n(t.WebStreamsPolyfill={}))})(Mr,function(t){"use strict";let n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function i(){}function a(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let s=a();function u(e){return typeof e=="object"&&e!==null||typeof e=="function"}let f=i,S=Promise,g=Promise.prototype.then,w=Promise.resolve.bind(S),p=Promise.reject.bind(S);function _(e){return new S(e)}function b(e){return w(e)}function d(e){return p(e)}function m(e,r,o){return g.call(e,r,o)}function P(e,r,o){m(m(e,r,o),void 0,f)}function R(e,r){P(e,r)}function C(e,r){P(e,void 0,r)}function A(e,r,o){return m(e,r,o)}function J(e){m(e,void 0,f)}let F=(()=>{let e=s&&s.queueMicrotask;if(typeof e=="function")return e;let r=b(void 0);return o=>m(r,o)})();function M(e,r,o){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,r,o)}function W(e,r,o){try{return b(M(e,r,o))}catch(l){return d(l)}}let be=16384;class T{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(r){let o=this._back,l=o;o._elements.length===be-1&&(l={_elements:[],_next:void 0}),o._elements.push(r),l!==o&&(this._back=l,o._next=l),++this._size}shift(){let r=this._front,o=r,l=this._cursor,c=l+1,h=r._elements,y=h[l];return c===be&&(o=r._next,c=0),--this._size,this._cursor=c,r!==o&&(this._front=o),h[l]=void 0,y}forEach(r){let o=this._cursor,l=this._front,c=l._elements;for(;(o!==c.length||l._next!==void 0)&&!(o===c.length&&(l=l._next,c=l._elements,o=0,c.length===0));)r(c[o]),++o}peek(){let r=this._front,o=this._cursor;return r._elements[o]}}function L(e,r){e._ownerReadableStream=r,r._reader=e,r._state==="readable"?Q(e):r._state==="closed"?ee(e):V(e,r._storedError)}function O(e,r){let o=e._ownerReadableStream;return Ee(o,r)}function $(e){e._ownerReadableStream._state==="readable"?z(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):le(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function U(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function Q(e){e._closedPromise=_((r,o)=>{e._closedPromise_resolve=r,e._closedPromise_reject=o})}function V(e,r){Q(e),z(e,r)}function ee(e){Q(e),Y(e)}function z(e,r){e._closedPromise_reject!==void 0&&(J(e._closedPromise),e._closedPromise_reject(r),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function le(e,r){V(e,r)}function Y(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let mn=n("[[AbortSteps]]"),yi=n("[[ErrorSteps]]"),pn=n("[[CancelSteps]]"),yn=n("[[PullSteps]]"),bi=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},yu=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function bu(e){return typeof e=="object"||typeof e=="function"}function De(e,r){if(e!==void 0&&!bu(e))throw new TypeError(`${r} is not an object.`)}function _e(e,r){if(typeof e!="function")throw new TypeError(`${r} is not a function.`)}function Su(e){return typeof e=="object"&&e!==null||typeof e=="function"}function Si(e,r){if(!Su(e))throw new TypeError(`${r} is not an object.`)}function Oe(e,r,o){if(e===void 0)throw new TypeError(`Parameter ${r} is required in '${o}'.`)}function bn(e,r,o){if(e===void 0)throw new TypeError(`${r} is required in '${o}'.`)}function Sn(e){return Number(e)}function gi(e){return e===0?0:e}function gu(e){return gi(yu(e))}function wi(e,r){let l=Number.MAX_SAFE_INTEGER,c=Number(e);if(c=gi(c),!bi(c))throw new TypeError(`${r} is not a finite number`);if(c=gu(c),c<0||c>l)throw new TypeError(`${r} is outside the accepted range of 0 to ${l}, inclusive`);return!bi(c)||c===0?0:c}function gn(e,r){if(!He(e))throw new TypeError(`${r} is not a ReadableStream.`)}function mt(e){return new Bt(e)}function _i(e,r){e._reader._readRequests.push(r)}function wn(e,r,o){let c=e._reader._readRequests.shift();o?c._closeSteps():c._chunkSteps(r)}function cr(e){return e._reader._readRequests.length}function Ri(e){let r=e._reader;return!(r===void 0||!Ne(r))}class Bt{constructor(r){if(Oe(r,1,"ReadableStreamDefaultReader"),gn(r,"First parameter"),Ve(r))throw new TypeError("This stream has already been locked for exclusive reading by another reader");L(this,r),this._readRequests=new T}get closed(){return Ne(this)?this._closedPromise:d(fr("closed"))}cancel(r=void 0){return Ne(this)?this._ownerReadableStream===void 0?d(U("cancel")):O(this,r):d(fr("cancel"))}read(){if(!Ne(this))return d(fr("read"));if(this._ownerReadableStream===void 0)return d(U("read from"));let r,o,l=_((h,y)=>{r=h,o=y});return Wt(this,{_chunkSteps:h=>r({value:h,done:!1}),_closeSteps:()=>r({value:void 0,done:!0}),_errorSteps:h=>o(h)}),l}releaseLock(){if(!Ne(this))throw fr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");$(this)}}}Object.defineProperties(Bt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(Bt.prototype,n.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Ne(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof Bt}function Wt(e,r){let o=e._ownerReadableStream;o._disturbed=!0,o._state==="closed"?r._closeSteps():o._state==="errored"?r._errorSteps(o._storedError):o._readableStreamController[yn](r)}function fr(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let Ei=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class Ti{constructor(r,o){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=r,this._preventCancel=o}next(){let r=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?A(this._ongoingPromise,r,r):r(),this._ongoingPromise}return(r){let o=()=>this._returnSteps(r);return this._ongoingPromise?A(this._ongoingPromise,o,o):o()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let r=this._reader;if(r._ownerReadableStream===void 0)return d(U("iterate"));let o,l,c=_((y,E)=>{o=y,l=E});return Wt(r,{_chunkSteps:y=>{this._ongoingPromise=void 0,F(()=>o({value:y,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,$(r),o({value:void 0,done:!0})},_errorSteps:y=>{this._ongoingPromise=void 0,this._isFinished=!0,$(r),l(y)}}),c}_returnSteps(r){if(this._isFinished)return Promise.resolve({value:r,done:!0});this._isFinished=!0;let o=this._reader;if(o._ownerReadableStream===void 0)return d(U("finish iterating"));if(!this._preventCancel){let l=O(o,r);return $(o),A(l,()=>({value:r,done:!0}))}return $(o),b({value:r,done:!0})}}let Pi={next(){return vi(this)?this._asyncIteratorImpl.next():d(Ci("next"))},return(e){return vi(this)?this._asyncIteratorImpl.return(e):d(Ci("return"))}};Ei!==void 0&&Object.setPrototypeOf(Pi,Ei);function wu(e,r){let o=mt(e),l=new Ti(o,r),c=Object.create(Pi);return c._asyncIteratorImpl=l,c}function vi(e){if(!u(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof Ti}catch{return!1}}function Ci(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let Ai=Number.isNaN||function(e){return e!==e};function Lt(e){return e.slice()}function ki(e,r,o,l,c){new Uint8Array(e).set(new Uint8Array(o,l,c),r)}function Rd(e){return e}function dr(e){return!1}function Fi(e,r,o){if(e.slice)return e.slice(r,o);let l=o-r,c=new ArrayBuffer(l);return ki(c,0,e,r,l),c}function _u(e){return!(typeof e!="number"||Ai(e)||e<0)}function qi(e){let r=Fi(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(r)}function _n(e){let r=e._queue.shift();return e._queueTotalSize-=r.size,e._queueTotalSize<0&&(e._queueTotalSize=0),r.value}function Rn(e,r,o){if(!_u(o)||o===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:r,size:o}),e._queueTotalSize+=o}function Ru(e){return e._queue.peek().value}function je(e){e._queue=new T,e._queueTotalSize=0}class xt{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!En(this))throw Cn("view");return this._view}respond(r){if(!En(this))throw Cn("respond");if(Oe(r,1,"respond"),r=wi(r,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");dr(this._view.buffer),br(this._associatedReadableByteStreamController,r)}respondWithNewView(r){if(!En(this))throw Cn("respondWithNewView");if(Oe(r,1,"respondWithNewView"),!ArrayBuffer.isView(r))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");dr(r.buffer),Sr(this._associatedReadableByteStreamController,r)}}Object.defineProperties(xt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(xt.prototype,n.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class pt{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!et(this))throw zt("byobRequest");return vn(this)}get desiredSize(){if(!et(this))throw zt("desiredSize");return zi(this)}close(){if(!et(this))throw zt("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let r=this._controlledReadableByteStream._state;if(r!=="readable")throw new TypeError(`The stream (in ${r} state) is not in the readable state and cannot be closed`);It(this)}enqueue(r){if(!et(this))throw zt("enqueue");if(Oe(r,1,"enqueue"),!ArrayBuffer.isView(r))throw new TypeError("chunk must be an array buffer view");if(r.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(r.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let o=this._controlledReadableByteStream._state;if(o!=="readable")throw new TypeError(`The stream (in ${o} state) is not in the readable state and cannot be enqueued to`);yr(this,r)}error(r=void 0){if(!et(this))throw zt("error");Re(this,r)}[pn](r){Di(this),je(this);let o=this._cancelAlgorithm(r);return pr(this),o}[yn](r){let o=this._controlledReadableByteStream;if(this._queueTotalSize>0){let c=this._queue.shift();this._queueTotalSize-=c.byteLength,Li(this);let h=new Uint8Array(c.buffer,c.byteOffset,c.byteLength);r._chunkSteps(h);return}let l=this._autoAllocateChunkSize;if(l!==void 0){let c;try{c=new ArrayBuffer(l)}catch(y){r._errorSteps(y);return}let h={buffer:c,bufferByteLength:l,byteOffset:0,byteLength:l,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(h)}_i(o,r),tt(this)}}Object.defineProperties(pt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(pt.prototype,n.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function et(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof pt}function En(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof xt}function tt(e){if(!vu(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let o=e._pullAlgorithm();P(o,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,tt(e))},l=>{Re(e,l)})}function Di(e){Pn(e),e._pendingPullIntos=new T}function Tn(e,r){let o=!1;e._state==="closed"&&(o=!0);let l=Oi(r);r.readerType==="default"?wn(e,l,o):ku(e,l,o)}function Oi(e){let r=e.bytesFilled,o=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,r/o)}function hr(e,r,o,l){e._queue.push({buffer:r,byteOffset:o,byteLength:l}),e._queueTotalSize+=l}function Bi(e,r){let o=r.elementSize,l=r.bytesFilled-r.bytesFilled%o,c=Math.min(e._queueTotalSize,r.byteLength-r.bytesFilled),h=r.bytesFilled+c,y=h-h%o,E=c,k=!1;y>l&&(E=y-r.bytesFilled,k=!0);let B=e._queue;for(;E>0;){let x=B.peek(),I=Math.min(E,x.byteLength),G=r.byteOffset+r.bytesFilled;ki(r.buffer,G,x.buffer,x.byteOffset,I),x.byteLength===I?B.shift():(x.byteOffset+=I,x.byteLength-=I),e._queueTotalSize-=I,Wi(e,I,r),E-=I}return k}function Wi(e,r,o){o.bytesFilled+=r}function Li(e){e._queueTotalSize===0&&e._closeRequested?(pr(e),Yt(e._controlledReadableByteStream)):tt(e)}function Pn(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function xi(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let r=e._pendingPullIntos.peek();Bi(e,r)&&(mr(e),Tn(e._controlledReadableByteStream,r))}}function Eu(e,r,o){let l=e._controlledReadableByteStream,c=1;r.constructor!==DataView&&(c=r.constructor.BYTES_PER_ELEMENT);let h=r.constructor,y=r.buffer,E={buffer:y,bufferByteLength:y.byteLength,byteOffset:r.byteOffset,byteLength:r.byteLength,bytesFilled:0,elementSize:c,viewConstructor:h,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(E),ji(l,o);return}if(l._state==="closed"){let k=new h(E.buffer,E.byteOffset,0);o._closeSteps(k);return}if(e._queueTotalSize>0){if(Bi(e,E)){let k=Oi(E);Li(e),o._chunkSteps(k);return}if(e._closeRequested){let k=new TypeError("Insufficient bytes to fill elements in the given buffer");Re(e,k),o._errorSteps(k);return}}e._pendingPullIntos.push(E),ji(l,o),tt(e)}function Tu(e,r){let o=e._controlledReadableByteStream;if(An(o))for(;Mi(o)>0;){let l=mr(e);Tn(o,l)}}function Pu(e,r,o){if(Wi(e,r,o),o.bytesFilled<o.elementSize)return;mr(e);let l=o.bytesFilled%o.elementSize;if(l>0){let c=o.byteOffset+o.bytesFilled,h=Fi(o.buffer,c-l,c);hr(e,h,0,h.byteLength)}o.bytesFilled-=l,Tn(e._controlledReadableByteStream,o),xi(e)}function Ii(e,r){let o=e._pendingPullIntos.peek();Pn(e),e._controlledReadableByteStream._state==="closed"?Tu(e):Pu(e,r,o),tt(e)}function mr(e){return e._pendingPullIntos.shift()}function vu(e){let r=e._controlledReadableByteStream;return r._state!=="readable"||e._closeRequested||!e._started?!1:!!(Ri(r)&&cr(r)>0||An(r)&&Mi(r)>0||zi(e)>0)}function pr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function It(e){let r=e._controlledReadableByteStream;if(!(e._closeRequested||r._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let l=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Re(e,l),l}pr(e),Yt(r)}}function yr(e,r){let o=e._controlledReadableByteStream;if(e._closeRequested||o._state!=="readable")return;let l=r.buffer,c=r.byteOffset,h=r.byteLength,y=l;if(e._pendingPullIntos.length>0){let E=e._pendingPullIntos.peek();dr(E.buffer),E.buffer=E.buffer}if(Pn(e),Ri(o))if(cr(o)===0)hr(e,y,c,h);else{e._pendingPullIntos.length>0&&mr(e);let E=new Uint8Array(y,c,h);wn(o,E,!1)}else An(o)?(hr(e,y,c,h),xi(e)):hr(e,y,c,h);tt(e)}function Re(e,r){let o=e._controlledReadableByteStream;o._state==="readable"&&(Di(e),je(e),pr(e),mo(o,r))}function vn(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let r=e._pendingPullIntos.peek(),o=new Uint8Array(r.buffer,r.byteOffset+r.bytesFilled,r.byteLength-r.bytesFilled),l=Object.create(xt.prototype);Au(l,e,o),e._byobRequest=l}return e._byobRequest}function zi(e){let r=e._controlledReadableByteStream._state;return r==="errored"?null:r==="closed"?0:e._strategyHWM-e._queueTotalSize}function br(e,r){let o=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(r!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(r===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(o.bytesFilled+r>o.byteLength)throw new RangeError("bytesWritten out of range")}o.buffer=o.buffer,Ii(e,r)}function Sr(e,r){let o=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(r.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(r.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(o.byteOffset+o.bytesFilled!==r.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(o.bufferByteLength!==r.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(o.bytesFilled+r.byteLength>o.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let c=r.byteLength;o.buffer=r.buffer,Ii(e,c)}function $i(e,r,o,l,c,h,y){r._controlledReadableByteStream=e,r._pullAgain=!1,r._pulling=!1,r._byobRequest=null,r._queue=r._queueTotalSize=void 0,je(r),r._closeRequested=!1,r._started=!1,r._strategyHWM=h,r._pullAlgorithm=l,r._cancelAlgorithm=c,r._autoAllocateChunkSize=y,r._pendingPullIntos=new T,e._readableStreamController=r;let E=o();P(b(E),()=>{r._started=!0,tt(r)},k=>{Re(r,k)})}function Cu(e,r,o){let l=Object.create(pt.prototype),c=()=>{},h=()=>b(void 0),y=()=>b(void 0);r.start!==void 0&&(c=()=>r.start(l)),r.pull!==void 0&&(h=()=>r.pull(l)),r.cancel!==void 0&&(y=k=>r.cancel(k));let E=r.autoAllocateChunkSize;if(E===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");$i(e,l,c,h,y,o,E)}function Au(e,r,o){e._associatedReadableByteStreamController=r,e._view=o}function Cn(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function zt(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function Ni(e){return new $t(e)}function ji(e,r){e._reader._readIntoRequests.push(r)}function ku(e,r,o){let c=e._reader._readIntoRequests.shift();o?c._closeSteps(r):c._chunkSteps(r)}function Mi(e){return e._reader._readIntoRequests.length}function An(e){let r=e._reader;return!(r===void 0||!rt(r))}class $t{constructor(r){if(Oe(r,1,"ReadableStreamBYOBReader"),gn(r,"First parameter"),Ve(r))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!et(r._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");L(this,r),this._readIntoRequests=new T}get closed(){return rt(this)?this._closedPromise:d(gr("closed"))}cancel(r=void 0){return rt(this)?this._ownerReadableStream===void 0?d(U("cancel")):O(this,r):d(gr("cancel"))}read(r){if(!rt(this))return d(gr("read"));if(!ArrayBuffer.isView(r))return d(new TypeError("view must be an array buffer view"));if(r.byteLength===0)return d(new TypeError("view must have non-zero byteLength"));if(r.buffer.byteLength===0)return d(new TypeError("view's buffer must have non-zero byteLength"));if(dr(r.buffer),this._ownerReadableStream===void 0)return d(U("read from"));let o,l,c=_((y,E)=>{o=y,l=E});return Ui(this,r,{_chunkSteps:y=>o({value:y,done:!1}),_closeSteps:y=>o({value:y,done:!0}),_errorSteps:y=>l(y)}),c}releaseLock(){if(!rt(this))throw gr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");$(this)}}}Object.defineProperties($t.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty($t.prototype,n.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function rt(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof $t}function Ui(e,r,o){let l=e._ownerReadableStream;l._disturbed=!0,l._state==="errored"?o._errorSteps(l._storedError):Eu(l._readableStreamController,r,o)}function gr(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function Nt(e,r){let{highWaterMark:o}=e;if(o===void 0)return r;if(Ai(o)||o<0)throw new RangeError("Invalid highWaterMark");return o}function wr(e){let{size:r}=e;return r||(()=>1)}function _r(e,r){De(e,r);let o=e?.highWaterMark,l=e?.size;return{highWaterMark:o===void 0?void 0:Sn(o),size:l===void 0?void 0:Fu(l,`${r} has member 'size' that`)}}function Fu(e,r){return _e(e,r),o=>Sn(e(o))}function qu(e,r){De(e,r);let o=e?.abort,l=e?.close,c=e?.start,h=e?.type,y=e?.write;return{abort:o===void 0?void 0:Du(o,e,`${r} has member 'abort' that`),close:l===void 0?void 0:Ou(l,e,`${r} has member 'close' that`),start:c===void 0?void 0:Bu(c,e,`${r} has member 'start' that`),write:y===void 0?void 0:Wu(y,e,`${r} has member 'write' that`),type:h}}function Du(e,r,o){return _e(e,o),l=>W(e,r,[l])}function Ou(e,r,o){return _e(e,o),()=>W(e,r,[])}function Bu(e,r,o){return _e(e,o),l=>M(e,r,[l])}function Wu(e,r,o){return _e(e,o),(l,c)=>W(e,r,[l,c])}function Hi(e,r){if(!yt(e))throw new TypeError(`${r} is not a WritableStream.`)}function Lu(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let xu=typeof AbortController=="function";function Iu(){if(xu)return new AbortController}class jt{constructor(r={},o={}){r===void 0?r=null:Si(r,"First parameter");let l=_r(o,"Second parameter"),c=qu(r,"First parameter");if(Yi(this),c.type!==void 0)throw new RangeError("Invalid type is specified");let y=wr(l),E=Nt(l,1);Zu(this,c,E,y)}get locked(){if(!yt(this))throw vr("locked");return bt(this)}abort(r=void 0){return yt(this)?bt(this)?d(new TypeError("Cannot abort a stream that already has a writer")):Rr(this,r):d(vr("abort"))}close(){return yt(this)?bt(this)?d(new TypeError("Cannot close a stream that already has a writer")):Ce(this)?d(new TypeError("Cannot close an already-closing stream")):Qi(this):d(vr("close"))}getWriter(){if(!yt(this))throw vr("getWriter");return Vi(this)}}Object.defineProperties(jt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(jt.prototype,n.toStringTag,{value:"WritableStream",configurable:!0});function Vi(e){return new Mt(e)}function zu(e,r,o,l,c=1,h=()=>1){let y=Object.create(jt.prototype);Yi(y);let E=Object.create(St.prototype);return eo(y,E,e,r,o,l,c,h),y}function Yi(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new T,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function yt(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof jt}function bt(e){return e._writer!==void 0}function Rr(e,r){var o;if(e._state==="closed"||e._state==="errored")return b(void 0);e._writableStreamController._abortReason=r,(o=e._writableStreamController._abortController)===null||o===void 0||o.abort();let l=e._state;if(l==="closed"||l==="errored")return b(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let c=!1;l==="erroring"&&(c=!0,r=void 0);let h=_((y,E)=>{e._pendingAbortRequest={_promise:void 0,_resolve:y,_reject:E,_reason:r,_wasAlreadyErroring:c}});return e._pendingAbortRequest._promise=h,c||Fn(e,r),h}function Qi(e){let r=e._state;if(r==="closed"||r==="errored")return d(new TypeError(`The stream (in ${r} state) is not in the writable state and cannot be closed`));let o=_((c,h)=>{let y={_resolve:c,_reject:h};e._closeRequest=y}),l=e._writer;return l!==void 0&&e._backpressure&&r==="writable"&&zn(l),Xu(e._writableStreamController),o}function $u(e){return _((o,l)=>{let c={_resolve:o,_reject:l};e._writeRequests.push(c)})}function kn(e,r){if(e._state==="writable"){Fn(e,r);return}qn(e)}function Fn(e,r){let o=e._writableStreamController;e._state="erroring",e._storedError=r;let l=e._writer;l!==void 0&&Gi(l,r),!Hu(e)&&o._started&&qn(e)}function qn(e){e._state="errored",e._writableStreamController[yi]();let r=e._storedError;if(e._writeRequests.forEach(c=>{c._reject(r)}),e._writeRequests=new T,e._pendingAbortRequest===void 0){Er(e);return}let o=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,o._wasAlreadyErroring){o._reject(r),Er(e);return}let l=e._writableStreamController[mn](o._reason);P(l,()=>{o._resolve(),Er(e)},c=>{o._reject(c),Er(e)})}function Nu(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function ju(e,r){e._inFlightWriteRequest._reject(r),e._inFlightWriteRequest=void 0,kn(e,r)}function Mu(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let o=e._writer;o!==void 0&&io(o)}function Uu(e,r){e._inFlightCloseRequest._reject(r),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(r),e._pendingAbortRequest=void 0),kn(e,r)}function Ce(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function Hu(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function Vu(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function Yu(e){e._inFlightWriteRequest=e._writeRequests.shift()}function Er(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let r=e._writer;r!==void 0&&xn(r,e._storedError)}function Dn(e,r){let o=e._writer;o!==void 0&&r!==e._backpressure&&(r?al(o):zn(o)),e._backpressure=r}class Mt{constructor(r){if(Oe(r,1,"WritableStreamDefaultWriter"),Hi(r,"First parameter"),bt(r))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=r,r._writer=this;let o=r._state;if(o==="writable")!Ce(r)&&r._backpressure?Ar(this):oo(this),Cr(this);else if(o==="erroring")In(this,r._storedError),Cr(this);else if(o==="closed")oo(this),il(this);else{let l=r._storedError;In(this,l),no(this,l)}}get closed(){return nt(this)?this._closedPromise:d(it("closed"))}get desiredSize(){if(!nt(this))throw it("desiredSize");if(this._ownerWritableStream===void 0)throw Ut("desiredSize");return Ku(this)}get ready(){return nt(this)?this._readyPromise:d(it("ready"))}abort(r=void 0){return nt(this)?this._ownerWritableStream===void 0?d(Ut("abort")):Qu(this,r):d(it("abort"))}close(){if(!nt(this))return d(it("close"));let r=this._ownerWritableStream;return r===void 0?d(Ut("close")):Ce(r)?d(new TypeError("Cannot close an already-closing stream")):Ji(this)}releaseLock(){if(!nt(this))throw it("releaseLock");this._ownerWritableStream!==void 0&&Ki(this)}write(r=void 0){return nt(this)?this._ownerWritableStream===void 0?d(Ut("write to")):Zi(this,r):d(it("write"))}}Object.defineProperties(Mt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(Mt.prototype,n.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function nt(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof Mt}function Qu(e,r){let o=e._ownerWritableStream;return Rr(o,r)}function Ji(e){let r=e._ownerWritableStream;return Qi(r)}function Ju(e){let r=e._ownerWritableStream,o=r._state;return Ce(r)||o==="closed"?b(void 0):o==="errored"?d(r._storedError):Ji(e)}function Gu(e,r){e._closedPromiseState==="pending"?xn(e,r):ol(e,r)}function Gi(e,r){e._readyPromiseState==="pending"?ao(e,r):sl(e,r)}function Ku(e){let r=e._ownerWritableStream,o=r._state;return o==="errored"||o==="erroring"?null:o==="closed"?0:to(r._writableStreamController)}function Ki(e){let r=e._ownerWritableStream,o=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Gi(e,o),Gu(e,o),r._writer=void 0,e._ownerWritableStream=void 0}function Zi(e,r){let o=e._ownerWritableStream,l=o._writableStreamController,c=el(l,r);if(o!==e._ownerWritableStream)return d(Ut("write to"));let h=o._state;if(h==="errored")return d(o._storedError);if(Ce(o)||h==="closed")return d(new TypeError("The stream is closing or closed and cannot be written to"));if(h==="erroring")return d(o._storedError);let y=$u(o);return tl(l,r,c),y}let Xi={};class St{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!On(this))throw Ln("abortReason");return this._abortReason}get signal(){if(!On(this))throw Ln("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(r=void 0){if(!On(this))throw Ln("error");this._controlledWritableStream._state==="writable"&&ro(this,r)}[mn](r){let o=this._abortAlgorithm(r);return Tr(this),o}[yi](){je(this)}}Object.defineProperties(St.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(St.prototype,n.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function On(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof St}function eo(e,r,o,l,c,h,y,E){r._controlledWritableStream=e,e._writableStreamController=r,r._queue=void 0,r._queueTotalSize=void 0,je(r),r._abortReason=void 0,r._abortController=Iu(),r._started=!1,r._strategySizeAlgorithm=E,r._strategyHWM=y,r._writeAlgorithm=l,r._closeAlgorithm=c,r._abortAlgorithm=h;let k=Wn(r);Dn(e,k);let B=o(),x=b(B);P(x,()=>{r._started=!0,Pr(r)},I=>{r._started=!0,kn(e,I)})}function Zu(e,r,o,l){let c=Object.create(St.prototype),h=()=>{},y=()=>b(void 0),E=()=>b(void 0),k=()=>b(void 0);r.start!==void 0&&(h=()=>r.start(c)),r.write!==void 0&&(y=B=>r.write(B,c)),r.close!==void 0&&(E=()=>r.close()),r.abort!==void 0&&(k=B=>r.abort(B)),eo(e,c,h,y,E,k,o,l)}function Tr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Xu(e){Rn(e,Xi,0),Pr(e)}function el(e,r){try{return e._strategySizeAlgorithm(r)}catch(o){return Bn(e,o),1}}function to(e){return e._strategyHWM-e._queueTotalSize}function tl(e,r,o){try{Rn(e,r,o)}catch(c){Bn(e,c);return}let l=e._controlledWritableStream;if(!Ce(l)&&l._state==="writable"){let c=Wn(e);Dn(l,c)}Pr(e)}function Pr(e){let r=e._controlledWritableStream;if(!e._started||r._inFlightWriteRequest!==void 0)return;if(r._state==="erroring"){qn(r);return}if(e._queue.length===0)return;let l=Ru(e);l===Xi?rl(e):nl(e,l)}function Bn(e,r){e._controlledWritableStream._state==="writable"&&ro(e,r)}function rl(e){let r=e._controlledWritableStream;Vu(r),_n(e);let o=e._closeAlgorithm();Tr(e),P(o,()=>{Mu(r)},l=>{Uu(r,l)})}function nl(e,r){let o=e._controlledWritableStream;Yu(o);let l=e._writeAlgorithm(r);P(l,()=>{Nu(o);let c=o._state;if(_n(e),!Ce(o)&&c==="writable"){let h=Wn(e);Dn(o,h)}Pr(e)},c=>{o._state==="writable"&&Tr(e),ju(o,c)})}function Wn(e){return to(e)<=0}function ro(e,r){let o=e._controlledWritableStream;Tr(e),Fn(o,r)}function vr(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Ln(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function it(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function Ut(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function Cr(e){e._closedPromise=_((r,o)=>{e._closedPromise_resolve=r,e._closedPromise_reject=o,e._closedPromiseState="pending"})}function no(e,r){Cr(e),xn(e,r)}function il(e){Cr(e),io(e)}function xn(e,r){e._closedPromise_reject!==void 0&&(J(e._closedPromise),e._closedPromise_reject(r),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function ol(e,r){no(e,r)}function io(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function Ar(e){e._readyPromise=_((r,o)=>{e._readyPromise_resolve=r,e._readyPromise_reject=o}),e._readyPromiseState="pending"}function In(e,r){Ar(e),ao(e,r)}function oo(e){Ar(e),zn(e)}function ao(e,r){e._readyPromise_reject!==void 0&&(J(e._readyPromise),e._readyPromise_reject(r),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function al(e){Ar(e)}function sl(e,r){In(e,r)}function zn(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let so=typeof DOMException<"u"?DOMException:void 0;function ul(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function ll(){let e=function(o,l){this.message=o||"",this.name=l||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let cl=ul(so)?so:ll();function uo(e,r,o,l,c,h){let y=mt(e),E=Vi(r);e._disturbed=!0;let k=!1,B=b(void 0);return _((x,I)=>{let G;if(h!==void 0){if(G=()=>{let v=new cl("Aborted","AbortError"),D=[];l||D.push(()=>r._state==="writable"?Rr(r,v):b(void 0)),c||D.push(()=>e._state==="readable"?Ee(e,v):b(void 0)),ce(()=>Promise.all(D.map(N=>N())),!0,v)},h.aborted){G();return}h.addEventListener("abort",G)}function Te(){return _((v,D)=>{function N(he){he?v():m(_t(),N,D)}N(!1)})}function _t(){return k?b(!0):m(E._readyPromise,()=>_((v,D)=>{Wt(y,{_chunkSteps:N=>{B=m(Zi(E,N),void 0,i),v(!1)},_closeSteps:()=>v(!0),_errorSteps:D})}))}if(Be(e,y._closedPromise,v=>{l?Se(!0,v):ce(()=>Rr(r,v),!0,v)}),Be(r,E._closedPromise,v=>{c?Se(!0,v):ce(()=>Ee(e,v),!0,v)}),ne(e,y._closedPromise,()=>{o?Se():ce(()=>Ju(E))}),Ce(r)||r._state==="closed"){let v=new TypeError("the destination writable stream closed before all data could be piped to it");c?Se(!0,v):ce(()=>Ee(e,v),!0,v)}J(Te());function Ye(){let v=B;return m(B,()=>v!==B?Ye():void 0)}function Be(v,D,N){v._state==="errored"?N(v._storedError):C(D,N)}function ne(v,D,N){v._state==="closed"?N():R(D,N)}function ce(v,D,N){if(k)return;k=!0,r._state==="writable"&&!Ce(r)?R(Ye(),he):he();function he(){P(v(),()=>We(D,N),Rt=>We(!0,Rt))}}function Se(v,D){k||(k=!0,r._state==="writable"&&!Ce(r)?R(Ye(),()=>We(v,D)):We(v,D))}function We(v,D){Ki(E),$(y),h!==void 0&&h.removeEventListener("abort",G),v?I(D):x(void 0)}})}class gt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!kr(this))throw Dr("desiredSize");return $n(this)}close(){if(!kr(this))throw Dr("close");if(!wt(this))throw new TypeError("The stream is not in a state that permits close");Vt(this)}enqueue(r=void 0){if(!kr(this))throw Dr("enqueue");if(!wt(this))throw new TypeError("The stream is not in a state that permits enqueue");return qr(this,r)}error(r=void 0){if(!kr(this))throw Dr("error");Me(this,r)}[pn](r){je(this);let o=this._cancelAlgorithm(r);return Fr(this),o}[yn](r){let o=this._controlledReadableStream;if(this._queue.length>0){let l=_n(this);this._closeRequested&&this._queue.length===0?(Fr(this),Yt(o)):Ht(this),r._chunkSteps(l)}else _i(o,r),Ht(this)}}Object.defineProperties(gt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(gt.prototype,n.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function kr(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof gt}function Ht(e){if(!lo(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let o=e._pullAlgorithm();P(o,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Ht(e))},l=>{Me(e,l)})}function lo(e){let r=e._controlledReadableStream;return!wt(e)||!e._started?!1:!!(Ve(r)&&cr(r)>0||$n(e)>0)}function Fr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Vt(e){if(!wt(e))return;let r=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(Fr(e),Yt(r))}function qr(e,r){if(!wt(e))return;let o=e._controlledReadableStream;if(Ve(o)&&cr(o)>0)wn(o,r,!1);else{let l;try{l=e._strategySizeAlgorithm(r)}catch(c){throw Me(e,c),c}try{Rn(e,r,l)}catch(c){throw Me(e,c),c}}Ht(e)}function Me(e,r){let o=e._controlledReadableStream;o._state==="readable"&&(je(e),Fr(e),mo(o,r))}function $n(e){let r=e._controlledReadableStream._state;return r==="errored"?null:r==="closed"?0:e._strategyHWM-e._queueTotalSize}function fl(e){return!lo(e)}function wt(e){let r=e._controlledReadableStream._state;return!e._closeRequested&&r==="readable"}function co(e,r,o,l,c,h,y){r._controlledReadableStream=e,r._queue=void 0,r._queueTotalSize=void 0,je(r),r._started=!1,r._closeRequested=!1,r._pullAgain=!1,r._pulling=!1,r._strategySizeAlgorithm=y,r._strategyHWM=h,r._pullAlgorithm=l,r._cancelAlgorithm=c,e._readableStreamController=r;let E=o();P(b(E),()=>{r._started=!0,Ht(r)},k=>{Me(r,k)})}function dl(e,r,o,l){let c=Object.create(gt.prototype),h=()=>{},y=()=>b(void 0),E=()=>b(void 0);r.start!==void 0&&(h=()=>r.start(c)),r.pull!==void 0&&(y=()=>r.pull(c)),r.cancel!==void 0&&(E=k=>r.cancel(k)),co(e,c,h,y,E,o,l)}function Dr(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function hl(e,r){return et(e._readableStreamController)?pl(e):ml(e)}function ml(e,r){let o=mt(e),l=!1,c=!1,h=!1,y=!1,E,k,B,x,I,G=_(ne=>{I=ne});function Te(){return l?(c=!0,b(void 0)):(l=!0,Wt(o,{_chunkSteps:ce=>{F(()=>{c=!1;let Se=ce,We=ce;h||qr(B._readableStreamController,Se),y||qr(x._readableStreamController,We),l=!1,c&&Te()})},_closeSteps:()=>{l=!1,h||Vt(B._readableStreamController),y||Vt(x._readableStreamController),(!h||!y)&&I(void 0)},_errorSteps:()=>{l=!1}}),b(void 0))}function _t(ne){if(h=!0,E=ne,y){let ce=Lt([E,k]),Se=Ee(e,ce);I(Se)}return G}function Ye(ne){if(y=!0,k=ne,h){let ce=Lt([E,k]),Se=Ee(e,ce);I(Se)}return G}function Be(){}return B=Nn(Be,Te,_t),x=Nn(Be,Te,Ye),C(o._closedPromise,ne=>{Me(B._readableStreamController,ne),Me(x._readableStreamController,ne),(!h||!y)&&I(void 0)}),[B,x]}function pl(e){let r=mt(e),o=!1,l=!1,c=!1,h=!1,y=!1,E,k,B,x,I,G=_(v=>{I=v});function Te(v){C(v._closedPromise,D=>{v===r&&(Re(B._readableStreamController,D),Re(x._readableStreamController,D),(!h||!y)&&I(void 0))})}function _t(){rt(r)&&($(r),r=mt(e),Te(r)),Wt(r,{_chunkSteps:D=>{F(()=>{l=!1,c=!1;let N=D,he=D;if(!h&&!y)try{he=qi(D)}catch(Rt){Re(B._readableStreamController,Rt),Re(x._readableStreamController,Rt),I(Ee(e,Rt));return}h||yr(B._readableStreamController,N),y||yr(x._readableStreamController,he),o=!1,l?Be():c&&ne()})},_closeSteps:()=>{o=!1,h||It(B._readableStreamController),y||It(x._readableStreamController),B._readableStreamController._pendingPullIntos.length>0&&br(B._readableStreamController,0),x._readableStreamController._pendingPullIntos.length>0&&br(x._readableStreamController,0),(!h||!y)&&I(void 0)},_errorSteps:()=>{o=!1}})}function Ye(v,D){Ne(r)&&($(r),r=Ni(e),Te(r));let N=D?x:B,he=D?B:x;Ui(r,v,{_chunkSteps:Et=>{F(()=>{l=!1,c=!1;let Tt=D?y:h;if(D?h:y)Tt||Sr(N._readableStreamController,Et);else{let Co;try{Co=qi(Et)}catch(Mn){Re(N._readableStreamController,Mn),Re(he._readableStreamController,Mn),I(Ee(e,Mn));return}Tt||Sr(N._readableStreamController,Et),yr(he._readableStreamController,Co)}o=!1,l?Be():c&&ne()})},_closeSteps:Et=>{o=!1;let Tt=D?y:h,Nr=D?h:y;Tt||It(N._readableStreamController),Nr||It(he._readableStreamController),Et!==void 0&&(Tt||Sr(N._readableStreamController,Et),!Nr&&he._readableStreamController._pendingPullIntos.length>0&&br(he._readableStreamController,0)),(!Tt||!Nr)&&I(void 0)},_errorSteps:()=>{o=!1}})}function Be(){if(o)return l=!0,b(void 0);o=!0;let v=vn(B._readableStreamController);return v===null?_t():Ye(v._view,!1),b(void 0)}function ne(){if(o)return c=!0,b(void 0);o=!0;let v=vn(x._readableStreamController);return v===null?_t():Ye(v._view,!0),b(void 0)}function ce(v){if(h=!0,E=v,y){let D=Lt([E,k]),N=Ee(e,D);I(N)}return G}function Se(v){if(y=!0,k=v,h){let D=Lt([E,k]),N=Ee(e,D);I(N)}return G}function We(){}return B=ho(We,Be,ce),x=ho(We,ne,Se),Te(r),[B,x]}function yl(e,r){De(e,r);let o=e,l=o?.autoAllocateChunkSize,c=o?.cancel,h=o?.pull,y=o?.start,E=o?.type;return{autoAllocateChunkSize:l===void 0?void 0:wi(l,`${r} has member 'autoAllocateChunkSize' that`),cancel:c===void 0?void 0:bl(c,o,`${r} has member 'cancel' that`),pull:h===void 0?void 0:Sl(h,o,`${r} has member 'pull' that`),start:y===void 0?void 0:gl(y,o,`${r} has member 'start' that`),type:E===void 0?void 0:wl(E,`${r} has member 'type' that`)}}function bl(e,r,o){return _e(e,o),l=>W(e,r,[l])}function Sl(e,r,o){return _e(e,o),l=>W(e,r,[l])}function gl(e,r,o){return _e(e,o),l=>M(e,r,[l])}function wl(e,r){if(e=`${e}`,e!=="bytes")throw new TypeError(`${r} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function _l(e,r){De(e,r);let o=e?.mode;return{mode:o===void 0?void 0:Rl(o,`${r} has member 'mode' that`)}}function Rl(e,r){if(e=`${e}`,e!=="byob")throw new TypeError(`${r} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function El(e,r){return De(e,r),{preventCancel:!!e?.preventCancel}}function fo(e,r){De(e,r);let o=e?.preventAbort,l=e?.preventCancel,c=e?.preventClose,h=e?.signal;return h!==void 0&&Tl(h,`${r} has member 'signal' that`),{preventAbort:!!o,preventCancel:!!l,preventClose:!!c,signal:h}}function Tl(e,r){if(!Lu(e))throw new TypeError(`${r} is not an AbortSignal.`)}function Pl(e,r){De(e,r);let o=e?.readable;bn(o,"readable","ReadableWritablePair"),gn(o,`${r} has member 'readable' that`);let l=e?.writable;return bn(l,"writable","ReadableWritablePair"),Hi(l,`${r} has member 'writable' that`),{readable:o,writable:l}}class Ue{constructor(r={},o={}){r===void 0?r=null:Si(r,"First parameter");let l=_r(o,"Second parameter"),c=yl(r,"First parameter");if(jn(this),c.type==="bytes"){if(l.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let h=Nt(l,0);Cu(this,c,h)}else{let h=wr(l),y=Nt(l,1);dl(this,c,y,h)}}get locked(){if(!He(this))throw ot("locked");return Ve(this)}cancel(r=void 0){return He(this)?Ve(this)?d(new TypeError("Cannot cancel a stream that already has a reader")):Ee(this,r):d(ot("cancel"))}getReader(r=void 0){if(!He(this))throw ot("getReader");return _l(r,"First parameter").mode===void 0?mt(this):Ni(this)}pipeThrough(r,o={}){if(!He(this))throw ot("pipeThrough");Oe(r,1,"pipeThrough");let l=Pl(r,"First parameter"),c=fo(o,"Second parameter");if(Ve(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(bt(l.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let h=uo(this,l.writable,c.preventClose,c.preventAbort,c.preventCancel,c.signal);return J(h),l.readable}pipeTo(r,o={}){if(!He(this))return d(ot("pipeTo"));if(r===void 0)return d("Parameter 1 is required in 'pipeTo'.");if(!yt(r))return d(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let l;try{l=fo(o,"Second parameter")}catch(c){return d(c)}return Ve(this)?d(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):bt(r)?d(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):uo(this,r,l.preventClose,l.preventAbort,l.preventCancel,l.signal)}tee(){if(!He(this))throw ot("tee");let r=hl(this);return Lt(r)}values(r=void 0){if(!He(this))throw ot("values");let o=El(r,"First parameter");return wu(this,o.preventCancel)}}Object.defineProperties(Ue.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(Ue.prototype,n.toStringTag,{value:"ReadableStream",configurable:!0}),typeof n.asyncIterator=="symbol"&&Object.defineProperty(Ue.prototype,n.asyncIterator,{value:Ue.prototype.values,writable:!0,configurable:!0});function Nn(e,r,o,l=1,c=()=>1){let h=Object.create(Ue.prototype);jn(h);let y=Object.create(gt.prototype);return co(h,y,e,r,o,l,c),h}function ho(e,r,o){let l=Object.create(Ue.prototype);jn(l);let c=Object.create(pt.prototype);return $i(l,c,e,r,o,0,void 0),l}function jn(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function He(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof Ue}function Ve(e){return e._reader!==void 0}function Ee(e,r){if(e._disturbed=!0,e._state==="closed")return b(void 0);if(e._state==="errored")return d(e._storedError);Yt(e);let o=e._reader;o!==void 0&&rt(o)&&(o._readIntoRequests.forEach(c=>{c._closeSteps(void 0)}),o._readIntoRequests=new T);let l=e._readableStreamController[pn](r);return A(l,i)}function Yt(e){e._state="closed";let r=e._reader;r!==void 0&&(Y(r),Ne(r)&&(r._readRequests.forEach(o=>{o._closeSteps()}),r._readRequests=new T))}function mo(e,r){e._state="errored",e._storedError=r;let o=e._reader;o!==void 0&&(z(o,r),Ne(o)?(o._readRequests.forEach(l=>{l._errorSteps(r)}),o._readRequests=new T):(o._readIntoRequests.forEach(l=>{l._errorSteps(r)}),o._readIntoRequests=new T))}function ot(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function po(e,r){De(e,r);let o=e?.highWaterMark;return bn(o,"highWaterMark","QueuingStrategyInit"),{highWaterMark:Sn(o)}}let yo=e=>e.byteLength;Object.defineProperty(yo,"name",{value:"size",configurable:!0});class Or{constructor(r){Oe(r,1,"ByteLengthQueuingStrategy"),r=po(r,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=r.highWaterMark}get highWaterMark(){if(!So(this))throw bo("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!So(this))throw bo("size");return yo}}Object.defineProperties(Or.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(Or.prototype,n.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function bo(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function So(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof Or}let go=()=>1;Object.defineProperty(go,"name",{value:"size",configurable:!0});class Br{constructor(r){Oe(r,1,"CountQueuingStrategy"),r=po(r,"First parameter"),this._countQueuingStrategyHighWaterMark=r.highWaterMark}get highWaterMark(){if(!_o(this))throw wo("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!_o(this))throw wo("size");return go}}Object.defineProperties(Br.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(Br.prototype,n.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function wo(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function _o(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof Br}function vl(e,r){De(e,r);let o=e?.flush,l=e?.readableType,c=e?.start,h=e?.transform,y=e?.writableType;return{flush:o===void 0?void 0:Cl(o,e,`${r} has member 'flush' that`),readableType:l,start:c===void 0?void 0:Al(c,e,`${r} has member 'start' that`),transform:h===void 0?void 0:kl(h,e,`${r} has member 'transform' that`),writableType:y}}function Cl(e,r,o){return _e(e,o),l=>W(e,r,[l])}function Al(e,r,o){return _e(e,o),l=>M(e,r,[l])}function kl(e,r,o){return _e(e,o),(l,c)=>W(e,r,[l,c])}class Wr{constructor(r={},o={},l={}){r===void 0&&(r=null);let c=_r(o,"Second parameter"),h=_r(l,"Third parameter"),y=vl(r,"First parameter");if(y.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(y.writableType!==void 0)throw new RangeError("Invalid writableType specified");let E=Nt(h,0),k=wr(h),B=Nt(c,1),x=wr(c),I,G=_(Te=>{I=Te});Fl(this,G,B,x,E,k),Dl(this,y),y.start!==void 0?I(y.start(this._transformStreamController)):I(void 0)}get readable(){if(!Ro(this))throw vo("readable");return this._readable}get writable(){if(!Ro(this))throw vo("writable");return this._writable}}Object.defineProperties(Wr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(Wr.prototype,n.toStringTag,{value:"TransformStream",configurable:!0});function Fl(e,r,o,l,c,h){function y(){return r}function E(G){return Wl(e,G)}function k(G){return Ll(e,G)}function B(){return xl(e)}e._writable=zu(y,E,B,k,o,l);function x(){return Il(e)}function I(G){return xr(e,G),b(void 0)}e._readable=Nn(y,x,I,c,h),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Ir(e,!0),e._transformStreamController=void 0}function Ro(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof Wr}function Lr(e,r){Me(e._readable._readableStreamController,r),xr(e,r)}function xr(e,r){Eo(e._transformStreamController),Bn(e._writable._writableStreamController,r),e._backpressure&&Ir(e,!1)}function Ir(e,r){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=_(o=>{e._backpressureChangePromise_resolve=o}),e._backpressure=r}class Qt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!zr(this))throw $r("desiredSize");let r=this._controlledTransformStream._readable._readableStreamController;return $n(r)}enqueue(r=void 0){if(!zr(this))throw $r("enqueue");To(this,r)}error(r=void 0){if(!zr(this))throw $r("error");Ol(this,r)}terminate(){if(!zr(this))throw $r("terminate");Bl(this)}}Object.defineProperties(Qt.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(Qt.prototype,n.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function zr(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof Qt}function ql(e,r,o,l){r._controlledTransformStream=e,e._transformStreamController=r,r._transformAlgorithm=o,r._flushAlgorithm=l}function Dl(e,r){let o=Object.create(Qt.prototype),l=h=>{try{return To(o,h),b(void 0)}catch(y){return d(y)}},c=()=>b(void 0);r.transform!==void 0&&(l=h=>r.transform(h,o)),r.flush!==void 0&&(c=()=>r.flush(o)),ql(e,o,l,c)}function Eo(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function To(e,r){let o=e._controlledTransformStream,l=o._readable._readableStreamController;if(!wt(l))throw new TypeError("Readable side is not in a state that permits enqueue");try{qr(l,r)}catch(h){throw xr(o,h),o._readable._storedError}fl(l)!==o._backpressure&&Ir(o,!0)}function Ol(e,r){Lr(e._controlledTransformStream,r)}function Po(e,r){let o=e._transformAlgorithm(r);return A(o,void 0,l=>{throw Lr(e._controlledTransformStream,l),l})}function Bl(e){let r=e._controlledTransformStream,o=r._readable._readableStreamController;Vt(o);let l=new TypeError("TransformStream terminated");xr(r,l)}function Wl(e,r){let o=e._transformStreamController;if(e._backpressure){let l=e._backpressureChangePromise;return A(l,()=>{let c=e._writable;if(c._state==="erroring")throw c._storedError;return Po(o,r)})}return Po(o,r)}function Ll(e,r){return Lr(e,r),b(void 0)}function xl(e){let r=e._readable,o=e._transformStreamController,l=o._flushAlgorithm();return Eo(o),A(l,()=>{if(r._state==="errored")throw r._storedError;Vt(r._readableStreamController)},c=>{throw Lr(e,c),r._storedError})}function Il(e){return Ir(e,!1),e._backpressureChangePromise}function $r(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function vo(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}t.ByteLengthQueuingStrategy=Or,t.CountQueuingStrategy=Br,t.ReadableByteStreamController=pt,t.ReadableStream=Ue,t.ReadableStreamBYOBReader=$t,t.ReadableStreamBYOBRequest=xt,t.ReadableStreamDefaultController=gt,t.ReadableStreamDefaultReader=Bt,t.TransformStream=Wr,t.TransformStreamDefaultController=Qt,t.WritableStream=jt,t.WritableStreamDefaultController=St,t.WritableStreamDefaultWriter=Mt,Object.defineProperty(t,"__esModule",{value:!0})})});var Oo=q(()=>{if(!globalThis.ReadableStream)try{let t=require("node:process"),{emitWarning:n}=t;try{t.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),t.emitWarning=n}catch(i){throw t.emitWarning=n,i}}catch{Object.assign(globalThis,Do())}try{let{Blob:t}=require("buffer");t&&!t.prototype.stream&&(t.prototype.stream=function(i){let a=0,s=this;return new ReadableStream({type:"bytes",async pull(u){let S=await s.slice(a,Math.min(s.size,a+65536)).arrayBuffer();a+=S.byteLength,u.enqueue(new Uint8Array(S)),a===s.size&&u.close()}})})}catch{}});async function*Un(t,n=!0){for(let i of t)if("stream"in i)yield*i.stream();else if(ArrayBuffer.isView(i))if(n){let a=i.byteOffset,s=i.byteOffset+i.byteLength;for(;a!==s;){let u=Math.min(s-a,Bo),f=i.buffer.slice(a,a+u);a+=f.byteLength,yield new Uint8Array(f)}}else yield i;else{let a=0,s=i;for(;a!==s.size;){let f=await s.slice(a,Math.min(s.size,a+Bo)).arrayBuffer();a+=f.byteLength,yield new Uint8Array(f)}}}var Cd,Bo,Wo,Vl,Le,Gt=Jt(()=>{Cd=Ae(Oo(),1);Bo=65536;Wo=class Hn{#e=[];#t="";#r=0;#n="transparent";constructor(n=[],i={}){if(typeof n!="object"||n===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof n[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof i!="object"&&typeof i!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");i===null&&(i={});let a=new TextEncoder;for(let u of n){let f;ArrayBuffer.isView(u)?f=new Uint8Array(u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength)):u instanceof ArrayBuffer?f=new Uint8Array(u.slice(0)):u instanceof Hn?f=u:f=a.encode(`${u}`);let S=ArrayBuffer.isView(f)?f.byteLength:f.size;S&&(this.#r+=S,this.#e.push(f))}this.#n=`${i.endings===void 0?"transparent":i.endings}`;let s=i.type===void 0?"":String(i.type);this.#t=/^[\x20-\x7E]*$/.test(s)?s:""}get size(){return this.#r}get type(){return this.#t}async text(){let n=new TextDecoder,i="";for await(let a of Un(this.#e,!1))i+=n.decode(a,{stream:!0});return i+=n.decode(),i}async arrayBuffer(){let n=new Uint8Array(this.size),i=0;for await(let a of Un(this.#e,!1))n.set(a,i),i+=a.length;return n.buffer}stream(){let n=Un(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(i){let a=await n.next();a.done?i.close():i.enqueue(a.value)},async cancel(){await n.return()}})}slice(n=0,i=this.size,a=""){let{size:s}=this,u=n<0?Math.max(s+n,0):Math.min(n,s),f=i<0?Math.max(s+i,0):Math.min(i,s),S=Math.max(f-u,0),g=this.#e,w=[],p=0;for(let b of g){if(p>=S)break;let d=ArrayBuffer.isView(b)?b.byteLength:b.size;if(u&&d<=u)u-=d,f-=d;else{let m;ArrayBuffer.isView(b)?(m=b.subarray(u,Math.min(d,f)),p+=m.byteLength):(m=b.slice(u,Math.min(d,f)),p+=m.size),f-=d,w.push(m),u=0}}let _=new Hn([],{type:String(a).toLowerCase()});return _.#r=S,_.#e=w,_}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](n){return n&&typeof n=="object"&&typeof n.constructor=="function"&&(typeof n.stream=="function"||typeof n.arrayBuffer=="function")&&/^(Blob|File)$/.test(n[Symbol.toStringTag])}};Object.defineProperties(Wo.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Vl=Wo,Le=Vl});var Yl,Ql,Pt,Vn=Jt(()=>{Gt();Yl=class extends Le{#e=0;#t="";constructor(n,i,a={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(n,a),a===null&&(a={});let s=a.lastModified===void 0?Date.now():Number(a.lastModified);Number.isNaN(s)||(this.#e=s),this.#t=String(i)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](n){return!!n&&n instanceof Le&&/^(File)$/.test(n[Symbol.toStringTag])}},Ql=Yl,Pt=Ql});function Io(t,n=Le){var i=`${Lo()}${Lo()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),a=[],s=`--${i}\r
Content-Disposition: form-data; name="`;return t.forEach((u,f)=>typeof u=="string"?a.push(s+Yn(f)+`"\r
\r
${u.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):a.push(s+Yn(f)+`"; filename="${Yn(u.name,1)}"\r
Content-Type: ${u.type||"application/octet-stream"}\r
\r
`,u,`\r
`)),a.push(`--${i}--`),new n(a,{type:"multipart/form-data; boundary="+i})}var Kt,Jl,Gl,Lo,Kl,xo,Yn,at,st,Ur=Jt(()=>{Gt();Vn();({toStringTag:Kt,iterator:Jl,hasInstance:Gl}=Symbol),Lo=Math.random,Kl="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),xo=(t,n,i)=>(t+="",/^(Blob|File)$/.test(n&&n[Kt])?[(i=i!==void 0?i+"":n[Kt]=="File"?n.name:"blob",t),n.name!==i||n[Kt]=="blob"?new Pt([n],i,n):n]:[t,n+""]),Yn=(t,n)=>(n?t:t.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),at=(t,n,i)=>{if(n.length<i)throw new TypeError(`Failed to execute '${t}' on 'FormData': ${i} arguments required, but only ${n.length} present.`)},st=class{#e=[];constructor(...n){if(n.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[Kt](){return"FormData"}[Jl](){return this.entries()}static[Gl](n){return n&&typeof n=="object"&&n[Kt]==="FormData"&&!Kl.some(i=>typeof n[i]!="function")}append(...n){at("append",arguments,2),this.#e.push(xo(...n))}delete(n){at("delete",arguments,1),n+="",this.#e=this.#e.filter(([i])=>i!==n)}get(n){at("get",arguments,1),n+="";for(var i=this.#e,a=i.length,s=0;s<a;s++)if(i[s][0]===n)return i[s][1];return null}getAll(n,i){return at("getAll",arguments,1),i=[],n+="",this.#e.forEach(a=>a[0]===n&&i.push(a[1])),i}has(n){return at("has",arguments,1),n+="",this.#e.some(i=>i[0]===n)}forEach(n,i){at("forEach",arguments,1);for(var[a,s]of this)n.call(i,s,a,this)}set(...n){at("set",arguments,2);var i=[],a=!0;n=xo(...n),this.#e.forEach(s=>{s[0]===n[0]?a&&(a=!i.push(n)):i.push(s)}),a&&i.push(n),this.#e=i}*entries(){yield*this.#e}*keys(){for(var[n]of this)yield n}*values(){for(var[,n]of this)yield n}}});var Mo=q(($d,jo)=>{if(!globalThis.DOMException)try{let{MessageChannel:t}=require("worker_threads"),n=new t().port1,i=new ArrayBuffer;n.postMessage(i,[i,i])}catch(t){t.constructor.name==="DOMException"&&(globalThis.DOMException=t.constructor)}jo.exports=globalThis.DOMException});var Vr,Zl,Md,Jn=Jt(()=>{Vr=require("node:fs"),Zl=Ae(Mo(),1);Vn();Gt();({stat:Md}=Vr.promises)});var Ho={};Ao(Ho,{toFormData:()=>oc});function ic(t){let n=t.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!n)return;let i=n[2]||n[3]||"",a=i.slice(i.lastIndexOf("\\")+1);return a=a.replace(/%22/g,'"'),a=a.replace(/&#(\d{4});/g,(s,u)=>String.fromCharCode(u)),a}async function oc(t,n){if(!/multipart/i.test(n))throw new TypeError("Failed to fetch");let i=n.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!i)throw new TypeError("no or bad content-type header, no multipart boundary");let a=new Gn(i[1]||i[2]),s,u,f,S,g,w,p=[],_=new st,b=C=>{f+=R.decode(C,{stream:!0})},d=C=>{p.push(C)},m=()=>{let C=new Pt(p,w,{type:g});_.append(S,C)},P=()=>{_.append(S,f)},R=new TextDecoder("utf-8");R.decode(),a.onPartBegin=function(){a.onPartData=b,a.onPartEnd=P,s="",u="",f="",S="",g="",w=null,p.length=0},a.onHeaderField=function(C){s+=R.decode(C,{stream:!0})},a.onHeaderValue=function(C){u+=R.decode(C,{stream:!0})},a.onHeaderEnd=function(){if(u+=R.decode(),s=s.toLowerCase(),s==="content-disposition"){let C=u.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);C&&(S=C[2]||C[3]||""),w=ic(u),w&&(a.onPartData=d,a.onPartEnd=m)}else s==="content-type"&&(g=u);u="",s=""};for await(let C of t)a.write(C);return a.end(),_}var ke,j,Uo,Qe,Yr,Qr,Xl,Xt,ec,tc,rc,nc,ut,Gn,Vo=Jt(()=>{Jn();Ur();ke=0,j={START_BOUNDARY:ke++,HEADER_FIELD_START:ke++,HEADER_FIELD:ke++,HEADER_VALUE_START:ke++,HEADER_VALUE:ke++,HEADER_VALUE_ALMOST_DONE:ke++,HEADERS_ALMOST_DONE:ke++,PART_DATA_START:ke++,PART_DATA:ke++,END:ke++},Uo=1,Qe={PART_BOUNDARY:Uo,LAST_BOUNDARY:Uo*=2},Yr=10,Qr=13,Xl=32,Xt=45,ec=58,tc=97,rc=122,nc=t=>t|32,ut=()=>{},Gn=class{constructor(n){this.index=0,this.flags=0,this.onHeaderEnd=ut,this.onHeaderField=ut,this.onHeadersEnd=ut,this.onHeaderValue=ut,this.onPartBegin=ut,this.onPartData=ut,this.onPartEnd=ut,this.boundaryChars={},n=`\r
--`+n;let i=new Uint8Array(n.length);for(let a=0;a<n.length;a++)i[a]=n.charCodeAt(a),this.boundaryChars[i[a]]=!0;this.boundary=i,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=j.START_BOUNDARY}write(n){let i=0,a=n.length,s=this.index,{lookbehind:u,boundary:f,boundaryChars:S,index:g,state:w,flags:p}=this,_=this.boundary.length,b=_-1,d=n.length,m,P,R=F=>{this[F+"Mark"]=i},C=F=>{delete this[F+"Mark"]},A=(F,M,W,be)=>{(M===void 0||M!==W)&&this[F](be&&be.subarray(M,W))},J=(F,M)=>{let W=F+"Mark";W in this&&(M?(A(F,this[W],i,n),delete this[W]):(A(F,this[W],n.length,n),this[W]=0))};for(i=0;i<a;i++)switch(m=n[i],w){case j.START_BOUNDARY:if(g===f.length-2){if(m===Xt)p|=Qe.LAST_BOUNDARY;else if(m!==Qr)return;g++;break}else if(g-1===f.length-2){if(p&Qe.LAST_BOUNDARY&&m===Xt)w=j.END,p=0;else if(!(p&Qe.LAST_BOUNDARY)&&m===Yr)g=0,A("onPartBegin"),w=j.HEADER_FIELD_START;else return;break}m!==f[g+2]&&(g=-2),m===f[g+2]&&g++;break;case j.HEADER_FIELD_START:w=j.HEADER_FIELD,R("onHeaderField"),g=0;case j.HEADER_FIELD:if(m===Qr){C("onHeaderField"),w=j.HEADERS_ALMOST_DONE;break}if(g++,m===Xt)break;if(m===ec){if(g===1)return;J("onHeaderField",!0),w=j.HEADER_VALUE_START;break}if(P=nc(m),P<tc||P>rc)return;break;case j.HEADER_VALUE_START:if(m===Xl)break;R("onHeaderValue"),w=j.HEADER_VALUE;case j.HEADER_VALUE:m===Qr&&(J("onHeaderValue",!0),A("onHeaderEnd"),w=j.HEADER_VALUE_ALMOST_DONE);break;case j.HEADER_VALUE_ALMOST_DONE:if(m!==Yr)return;w=j.HEADER_FIELD_START;break;case j.HEADERS_ALMOST_DONE:if(m!==Yr)return;A("onHeadersEnd"),w=j.PART_DATA_START;break;case j.PART_DATA_START:w=j.PART_DATA,R("onPartData");case j.PART_DATA:if(s=g,g===0){for(i+=b;i<d&&!(n[i]in S);)i+=_;i-=b,m=n[i]}if(g<f.length)f[g]===m?(g===0&&J("onPartData",!0),g++):g=0;else if(g===f.length)g++,m===Qr?p|=Qe.PART_BOUNDARY:m===Xt?p|=Qe.LAST_BOUNDARY:g=0;else if(g-1===f.length)if(p&Qe.PART_BOUNDARY){if(g=0,m===Yr){p&=~Qe.PART_BOUNDARY,A("onPartEnd"),A("onPartBegin"),w=j.HEADER_FIELD_START;break}}else p&Qe.LAST_BOUNDARY&&m===Xt?(A("onPartEnd"),w=j.END,p=0):g=0;if(g>0)u[g-1]=m;else if(s>0){let F=new Uint8Array(u.buffer,u.byteOffset,u.byteLength);A("onPartData",0,s,F),s=0,R("onPartData"),i--}break;case j.END:break;default:throw new Error(`Unexpected state entered: ${w}`)}J("onHeaderField"),J("onHeaderValue"),J("onPartData"),this.index=g,this.state=w,this.flags=p}end(){if(this.state===j.HEADER_FIELD_START&&this.index===0||this.state===j.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==j.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var Z=q(ei=>{"use strict";ei.fromCallback=function(t){return Object.defineProperty(function(...n){if(typeof n[n.length-1]=="function")t.apply(this,n);else return new Promise((i,a)=>{t.call(this,...n,(s,u)=>s!=null?a(s):i(u))})},"name",{value:t.name})};ei.fromPromise=function(t){return Object.defineProperty(function(...n){let i=n[n.length-1];if(typeof i!="function")return t.apply(this,n);t.apply(this,n.slice(0,-1)).then(a=>i(null,a),i)},"name",{value:t.name})}});var fa=q((Bh,ca)=>{var Je=require("constants"),hc=process.cwd,tn=null,mc=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return tn||(tn=hc.call(process)),tn};try{process.cwd()}catch{}typeof process.chdir=="function"&&(ti=process.chdir,process.chdir=function(t){tn=null,ti.call(process,t)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,ti));var ti;ca.exports=pc;function pc(t){Je.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&n(t),t.lutimes||i(t),t.chown=u(t.chown),t.fchown=u(t.fchown),t.lchown=u(t.lchown),t.chmod=a(t.chmod),t.fchmod=a(t.fchmod),t.lchmod=a(t.lchmod),t.chownSync=f(t.chownSync),t.fchownSync=f(t.fchownSync),t.lchownSync=f(t.lchownSync),t.chmodSync=s(t.chmodSync),t.fchmodSync=s(t.fchmodSync),t.lchmodSync=s(t.lchmodSync),t.stat=S(t.stat),t.fstat=S(t.fstat),t.lstat=S(t.lstat),t.statSync=g(t.statSync),t.fstatSync=g(t.fstatSync),t.lstatSync=g(t.lstatSync),t.lchmod||(t.lchmod=function(p,_,b){b&&process.nextTick(b)},t.lchmodSync=function(){}),t.lchown||(t.lchown=function(p,_,b,d){d&&process.nextTick(d)},t.lchownSync=function(){}),mc==="win32"&&(t.rename=function(p){return function(_,b,d){var m=Date.now(),P=0;p(_,b,function R(C){if(C&&(C.code==="EACCES"||C.code==="EPERM")&&Date.now()-m<6e4){setTimeout(function(){t.stat(b,function(A,J){A&&A.code==="ENOENT"?p(_,b,R):d(C)})},P),P<100&&(P+=10);return}d&&d(C)})}}(t.rename)),t.read=function(p){function _(b,d,m,P,R,C){var A;if(C&&typeof C=="function"){var J=0;A=function(F,M,W){if(F&&F.code==="EAGAIN"&&J<10)return J++,p.call(t,b,d,m,P,R,A);C.apply(this,arguments)}}return p.call(t,b,d,m,P,R,A)}return Object.setPrototypeOf&&Object.setPrototypeOf(_,p),_}(t.read),t.readSync=function(p){return function(_,b,d,m,P){for(var R=0;;)try{return p.call(t,_,b,d,m,P)}catch(C){if(C.code==="EAGAIN"&&R<10){R++;continue}throw C}}}(t.readSync);function n(p){p.lchmod=function(_,b,d){p.open(_,Je.O_WRONLY|Je.O_SYMLINK,b,function(m,P){if(m){d&&d(m);return}p.fchmod(P,b,function(R){p.close(P,function(C){d&&d(R||C)})})})},p.lchmodSync=function(_,b){var d=p.openSync(_,Je.O_WRONLY|Je.O_SYMLINK,b),m=!0,P;try{P=p.fchmodSync(d,b),m=!1}finally{if(m)try{p.closeSync(d)}catch{}else p.closeSync(d)}return P}}function i(p){Je.hasOwnProperty("O_SYMLINK")?(p.lutimes=function(_,b,d,m){p.open(_,Je.O_SYMLINK,function(P,R){if(P){m&&m(P);return}p.futimes(R,b,d,function(C){p.close(R,function(A){m&&m(C||A)})})})},p.lutimesSync=function(_,b,d){var m=p.openSync(_,Je.O_SYMLINK),P,R=!0;try{P=p.futimesSync(m,b,d),R=!1}finally{if(R)try{p.closeSync(m)}catch{}else p.closeSync(m)}return P}):(p.lutimes=function(_,b,d,m){m&&process.nextTick(m)},p.lutimesSync=function(){})}function a(p){return p&&function(_,b,d){return p.call(t,_,b,function(m){w(m)&&(m=null),d&&d.apply(this,arguments)})}}function s(p){return p&&function(_,b){try{return p.call(t,_,b)}catch(d){if(!w(d))throw d}}}function u(p){return p&&function(_,b,d,m){return p.call(t,_,b,d,function(P){w(P)&&(P=null),m&&m.apply(this,arguments)})}}function f(p){return p&&function(_,b,d){try{return p.call(t,_,b,d)}catch(m){if(!w(m))throw m}}}function S(p){return p&&function(_,b,d){typeof b=="function"&&(d=b,b=null);function m(P,R){R&&(R.uid<0&&(R.uid+=4294967296),R.gid<0&&(R.gid+=4294967296)),d&&d.apply(this,arguments)}return b?p.call(t,_,b,m):p.call(t,_,m)}}function g(p){return p&&function(_,b){var d=b?p.call(t,_,b):p.call(t,_);return d&&(d.uid<0&&(d.uid+=4294967296),d.gid<0&&(d.gid+=4294967296)),d}}function w(p){if(!p||p.code==="ENOSYS")return!0;var _=!process.getuid||process.getuid()!==0;return!!(_&&(p.code==="EINVAL"||p.code==="EPERM"))}}});var ma=q((Wh,ha)=>{var da=require("stream").Stream;ha.exports=yc;function yc(t){return{ReadStream:n,WriteStream:i};function n(a,s){if(!(this instanceof n))return new n(a,s);da.call(this);var u=this;this.path=a,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,s=s||{};for(var f=Object.keys(s),S=0,g=f.length;S<g;S++){var w=f[S];this[w]=s[w]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){u._read()});return}t.open(this.path,this.flags,this.mode,function(p,_){if(p){u.emit("error",p),u.readable=!1;return}u.fd=_,u.emit("open",_),u._read()})}function i(a,s){if(!(this instanceof i))return new i(a,s);da.call(this),this.path=a,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,s=s||{};for(var u=Object.keys(s),f=0,S=u.length;f<S;f++){var g=u[f];this[g]=s[g]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var ya=q((Lh,pa)=>{"use strict";pa.exports=Sc;var bc=Object.getPrototypeOf||function(t){return t.__proto__};function Sc(t){if(t===null||typeof t!="object")return t;if(t instanceof Object)var n={__proto__:bc(t)};else var n=Object.create(null);return Object.getOwnPropertyNames(t).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))}),n}});var kt=q((xh,ii)=>{var H=require("fs"),gc=fa(),wc=ma(),_c=ya(),rn=require("util"),te,on;typeof Symbol=="function"&&typeof Symbol.for=="function"?(te=Symbol.for("graceful-fs.queue"),on=Symbol.for("graceful-fs.previous")):(te="___graceful-fs.queue",on="___graceful-fs.previous");function Rc(){}function ga(t,n){Object.defineProperty(t,te,{get:function(){return n}})}var dt=Rc;rn.debuglog?dt=rn.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(dt=function(){var t=rn.format.apply(rn,arguments);t="GFS4: "+t.split(/\n/).join(`
GFS4: `),console.error(t)});H[te]||(ba=global[te]||[],ga(H,ba),H.close=function(t){function n(i,a){return t.call(H,i,function(s){s||Sa(),typeof a=="function"&&a.apply(this,arguments)})}return Object.defineProperty(n,on,{value:t}),n}(H.close),H.closeSync=function(t){function n(i){t.apply(H,arguments),Sa()}return Object.defineProperty(n,on,{value:t}),n}(H.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){dt(H[te]),require("assert").equal(H[te].length,0)}));var ba;global[te]||ga(global,H[te]);ii.exports=ri(_c(H));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!H.__patched&&(ii.exports=ri(H),H.__patched=!0);function ri(t){gc(t),t.gracefulify=ri,t.createReadStream=F,t.createWriteStream=M;var n=t.readFile;t.readFile=i;function i(T,L,O){return typeof L=="function"&&(O=L,L=null),$(T,L,O);function $(U,Q,V,ee){return n(U,Q,function(z){z&&(z.code==="EMFILE"||z.code==="ENFILE")?At([$,[U,Q,V],z,ee||Date.now(),Date.now()]):typeof V=="function"&&V.apply(this,arguments)})}}var a=t.writeFile;t.writeFile=s;function s(T,L,O,$){return typeof O=="function"&&($=O,O=null),U(T,L,O,$);function U(Q,V,ee,z,le){return a(Q,V,ee,function(Y){Y&&(Y.code==="EMFILE"||Y.code==="ENFILE")?At([U,[Q,V,ee,z],Y,le||Date.now(),Date.now()]):typeof z=="function"&&z.apply(this,arguments)})}}var u=t.appendFile;u&&(t.appendFile=f);function f(T,L,O,$){return typeof O=="function"&&($=O,O=null),U(T,L,O,$);function U(Q,V,ee,z,le){return u(Q,V,ee,function(Y){Y&&(Y.code==="EMFILE"||Y.code==="ENFILE")?At([U,[Q,V,ee,z],Y,le||Date.now(),Date.now()]):typeof z=="function"&&z.apply(this,arguments)})}}var S=t.copyFile;S&&(t.copyFile=g);function g(T,L,O,$){return typeof O=="function"&&($=O,O=0),U(T,L,O,$);function U(Q,V,ee,z,le){return S(Q,V,ee,function(Y){Y&&(Y.code==="EMFILE"||Y.code==="ENFILE")?At([U,[Q,V,ee,z],Y,le||Date.now(),Date.now()]):typeof z=="function"&&z.apply(this,arguments)})}}var w=t.readdir;t.readdir=p;function p(T,L,O){return typeof L=="function"&&(O=L,L=null),$(T,L,O);function $(U,Q,V,ee){return w(U,Q,function(z,le){z&&(z.code==="EMFILE"||z.code==="ENFILE")?At([$,[U,Q,V],z,ee||Date.now(),Date.now()]):(le&&le.sort&&le.sort(),typeof V=="function"&&V.call(this,z,le))})}}if(process.version.substr(0,4)==="v0.8"){var _=wc(t);R=_.ReadStream,A=_.WriteStream}var b=t.ReadStream;b&&(R.prototype=Object.create(b.prototype),R.prototype.open=C);var d=t.WriteStream;d&&(A.prototype=Object.create(d.prototype),A.prototype.open=J),Object.defineProperty(t,"ReadStream",{get:function(){return R},set:function(T){R=T},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return A},set:function(T){A=T},enumerable:!0,configurable:!0});var m=R;Object.defineProperty(t,"FileReadStream",{get:function(){return m},set:function(T){m=T},enumerable:!0,configurable:!0});var P=A;Object.defineProperty(t,"FileWriteStream",{get:function(){return P},set:function(T){P=T},enumerable:!0,configurable:!0});function R(T,L){return this instanceof R?(b.apply(this,arguments),this):R.apply(Object.create(R.prototype),arguments)}function C(){var T=this;be(T.path,T.flags,T.mode,function(L,O){L?(T.autoClose&&T.destroy(),T.emit("error",L)):(T.fd=O,T.emit("open",O),T.read())})}function A(T,L){return this instanceof A?(d.apply(this,arguments),this):A.apply(Object.create(A.prototype),arguments)}function J(){var T=this;be(T.path,T.flags,T.mode,function(L,O){L?(T.destroy(),T.emit("error",L)):(T.fd=O,T.emit("open",O))})}function F(T,L){return new t.ReadStream(T,L)}function M(T,L){return new t.WriteStream(T,L)}var W=t.open;t.open=be;function be(T,L,O,$){return typeof O=="function"&&($=O,O=null),U(T,L,O,$);function U(Q,V,ee,z,le){return W(Q,V,ee,function(Y,mn){Y&&(Y.code==="EMFILE"||Y.code==="ENFILE")?At([U,[Q,V,ee,z],Y,le||Date.now(),Date.now()]):typeof z=="function"&&z.apply(this,arguments)})}}return t}function At(t){dt("ENQUEUE",t[0].name,t[1]),H[te].push(t),ni()}var nn;function Sa(){for(var t=Date.now(),n=0;n<H[te].length;++n)H[te][n].length>2&&(H[te][n][3]=t,H[te][n][4]=t);ni()}function ni(){if(clearTimeout(nn),nn=void 0,H[te].length!==0){var t=H[te].shift(),n=t[0],i=t[1],a=t[2],s=t[3],u=t[4];if(s===void 0)dt("RETRY",n.name,i),n.apply(null,i);else if(Date.now()-s>=6e4){dt("TIMEOUT",n.name,i);var f=i.pop();typeof f=="function"&&f.call(null,a)}else{var S=Date.now()-u,g=Math.max(u-s,1),w=Math.min(g*1.2,100);S>=w?(dt("RETRY",n.name,i),n.apply(null,i.concat([s]))):H[te].push(t)}nn===void 0&&(nn=setTimeout(ni,0))}}});var oe=q(ze=>{"use strict";var wa=Z().fromCallback,ie=kt(),Ec=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(t=>typeof ie[t]=="function");Object.assign(ze,ie);Ec.forEach(t=>{ze[t]=wa(ie[t])});ze.exists=function(t,n){return typeof n=="function"?ie.exists(t,n):new Promise(i=>ie.exists(t,i))};ze.read=function(t,n,i,a,s,u){return typeof u=="function"?ie.read(t,n,i,a,s,u):new Promise((f,S)=>{ie.read(t,n,i,a,s,(g,w,p)=>{if(g)return S(g);f({bytesRead:w,buffer:p})})})};ze.write=function(t,n,...i){return typeof i[i.length-1]=="function"?ie.write(t,n,...i):new Promise((a,s)=>{ie.write(t,n,...i,(u,f,S)=>{if(u)return s(u);a({bytesWritten:f,buffer:S})})})};ze.readv=function(t,n,...i){return typeof i[i.length-1]=="function"?ie.readv(t,n,...i):new Promise((a,s)=>{ie.readv(t,n,...i,(u,f,S)=>{if(u)return s(u);a({bytesRead:f,buffers:S})})})};ze.writev=function(t,n,...i){return typeof i[i.length-1]=="function"?ie.writev(t,n,...i):new Promise((a,s)=>{ie.writev(t,n,...i,(u,f,S)=>{if(u)return s(u);a({bytesWritten:f,buffers:S})})})};typeof ie.realpath.native=="function"?ze.realpath.native=wa(ie.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var Ra=q((zh,_a)=>{"use strict";var Tc=require("path");_a.exports.checkPath=function(n){if(process.platform==="win32"&&/[<>:"|?*]/.test(n.replace(Tc.parse(n).root,""))){let a=new Error(`Path contains invalid characters: ${n}`);throw a.code="EINVAL",a}}});var va=q(($h,oi)=>{"use strict";var Ea=oe(),{checkPath:Ta}=Ra(),Pa=t=>{let n={mode:511};return typeof t=="number"?t:{...n,...t}.mode};oi.exports.makeDir=async(t,n)=>(Ta(t),Ea.mkdir(t,{mode:Pa(n),recursive:!0}));oi.exports.makeDirSync=(t,n)=>(Ta(t),Ea.mkdirSync(t,{mode:Pa(n),recursive:!0}))});var ve=q((Nh,Ca)=>{"use strict";var Pc=Z().fromPromise,{makeDir:vc,makeDirSync:ai}=va(),si=Pc(vc);Ca.exports={mkdirs:si,mkdirsSync:ai,mkdirp:si,mkdirpSync:ai,ensureDir:si,ensureDirSync:ai}});var Ge=q((jh,ka)=>{"use strict";var Cc=Z().fromPromise,Aa=oe();function Ac(t){return Aa.access(t).then(()=>!0).catch(()=>!1)}ka.exports={pathExists:Cc(Ac),pathExistsSync:Aa.existsSync}});var ui=q((Mh,Fa)=>{"use strict";var Ft=oe(),kc=Z().fromPromise;async function Fc(t,n,i){let a=await Ft.open(t,"r+"),s=null;try{await Ft.futimes(a,n,i)}finally{try{await Ft.close(a)}catch(u){s=u}}if(s)throw s}function qc(t,n,i){let a=Ft.openSync(t,"r+");return Ft.futimesSync(a,n,i),Ft.closeSync(a)}Fa.exports={utimesMillis:kc(Fc),utimesMillisSync:qc}});var ht=q((Uh,Ba)=>{"use strict";var qt=oe(),X=require("path"),qa=Z().fromPromise;function Dc(t,n,i){let a=i.dereference?s=>qt.stat(s,{bigint:!0}):s=>qt.lstat(s,{bigint:!0});return Promise.all([a(t),a(n).catch(s=>{if(s.code==="ENOENT")return null;throw s})]).then(([s,u])=>({srcStat:s,destStat:u}))}function Oc(t,n,i){let a,s=i.dereference?f=>qt.statSync(f,{bigint:!0}):f=>qt.lstatSync(f,{bigint:!0}),u=s(t);try{a=s(n)}catch(f){if(f.code==="ENOENT")return{srcStat:u,destStat:null};throw f}return{srcStat:u,destStat:a}}async function Bc(t,n,i,a){let{srcStat:s,destStat:u}=await Dc(t,n,a);if(u){if(nr(s,u)){let f=X.basename(t),S=X.basename(n);if(i==="move"&&f!==S&&f.toLowerCase()===S.toLowerCase())return{srcStat:s,destStat:u,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(s.isDirectory()&&!u.isDirectory())throw new Error(`Cannot overwrite non-directory '${n}' with directory '${t}'.`);if(!s.isDirectory()&&u.isDirectory())throw new Error(`Cannot overwrite directory '${n}' with non-directory '${t}'.`)}if(s.isDirectory()&&li(t,n))throw new Error(an(t,n,i));return{srcStat:s,destStat:u}}function Wc(t,n,i,a){let{srcStat:s,destStat:u}=Oc(t,n,a);if(u){if(nr(s,u)){let f=X.basename(t),S=X.basename(n);if(i==="move"&&f!==S&&f.toLowerCase()===S.toLowerCase())return{srcStat:s,destStat:u,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(s.isDirectory()&&!u.isDirectory())throw new Error(`Cannot overwrite non-directory '${n}' with directory '${t}'.`);if(!s.isDirectory()&&u.isDirectory())throw new Error(`Cannot overwrite directory '${n}' with non-directory '${t}'.`)}if(s.isDirectory()&&li(t,n))throw new Error(an(t,n,i));return{srcStat:s,destStat:u}}async function Da(t,n,i,a){let s=X.resolve(X.dirname(t)),u=X.resolve(X.dirname(i));if(u===s||u===X.parse(u).root)return;let f;try{f=await qt.stat(u,{bigint:!0})}catch(S){if(S.code==="ENOENT")return;throw S}if(nr(n,f))throw new Error(an(t,i,a));return Da(t,n,u,a)}function Oa(t,n,i,a){let s=X.resolve(X.dirname(t)),u=X.resolve(X.dirname(i));if(u===s||u===X.parse(u).root)return;let f;try{f=qt.statSync(u,{bigint:!0})}catch(S){if(S.code==="ENOENT")return;throw S}if(nr(n,f))throw new Error(an(t,i,a));return Oa(t,n,u,a)}function nr(t,n){return n.ino&&n.dev&&n.ino===t.ino&&n.dev===t.dev}function li(t,n){let i=X.resolve(t).split(X.sep).filter(s=>s),a=X.resolve(n).split(X.sep).filter(s=>s);return i.every((s,u)=>a[u]===s)}function an(t,n,i){return`Cannot ${i} '${t}' to a subdirectory of itself, '${n}'.`}Ba.exports={checkPaths:qa(Bc),checkPathsSync:Wc,checkParentPaths:qa(Da),checkParentPathsSync:Oa,isSrcSubdir:li,areIdentical:nr}});var za=q((Hh,Ia)=>{"use strict";var re=oe(),ir=require("path"),{mkdirs:Lc}=ve(),{pathExists:xc}=Ge(),{utimesMillis:Ic}=ui(),or=ht();async function zc(t,n,i={}){typeof i=="function"&&(i={filter:i}),i.clobber="clobber"in i?!!i.clobber:!0,i.overwrite="overwrite"in i?!!i.overwrite:i.clobber,i.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001");let{srcStat:a,destStat:s}=await or.checkPaths(t,n,"copy",i);if(await or.checkParentPaths(t,a,n,"copy"),!await La(t,n,i))return;let f=ir.dirname(n);await xc(f)||await Lc(f),await xa(s,t,n,i)}async function La(t,n,i){return i.filter?i.filter(t,n):!0}async function xa(t,n,i,a){let u=await(a.dereference?re.stat:re.lstat)(n);if(u.isDirectory())return Mc(u,t,n,i,a);if(u.isFile()||u.isCharacterDevice()||u.isBlockDevice())return $c(u,t,n,i,a);if(u.isSymbolicLink())return Uc(t,n,i,a);throw u.isSocket()?new Error(`Cannot copy a socket file: ${n}`):u.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${n}`):new Error(`Unknown file: ${n}`)}async function $c(t,n,i,a,s){if(!n)return Wa(t,i,a,s);if(s.overwrite)return await re.unlink(a),Wa(t,i,a,s);if(s.errorOnExist)throw new Error(`'${a}' already exists`)}async function Wa(t,n,i,a){if(await re.copyFile(n,i),a.preserveTimestamps){Nc(t.mode)&&await jc(i,t.mode);let s=await re.stat(n);await Ic(i,s.atime,s.mtime)}return re.chmod(i,t.mode)}function Nc(t){return(t&128)===0}function jc(t,n){return re.chmod(t,n|128)}async function Mc(t,n,i,a,s){n||await re.mkdir(a);let u=await re.readdir(i);await Promise.all(u.map(async f=>{let S=ir.join(i,f),g=ir.join(a,f);if(!await La(S,g,s))return;let{destStat:p}=await or.checkPaths(S,g,"copy",s);return xa(p,S,g,s)})),n||await re.chmod(a,t.mode)}async function Uc(t,n,i,a){let s=await re.readlink(n);if(a.dereference&&(s=ir.resolve(process.cwd(),s)),!t)return re.symlink(s,i);let u=null;try{u=await re.readlink(i)}catch(f){if(f.code==="EINVAL"||f.code==="UNKNOWN")return re.symlink(s,i);throw f}if(a.dereference&&(u=ir.resolve(process.cwd(),u)),or.isSrcSubdir(s,u))throw new Error(`Cannot copy '${s}' to a subdirectory of itself, '${u}'.`);if(or.isSrcSubdir(u,s))throw new Error(`Cannot overwrite '${u}' with '${s}'.`);return await re.unlink(i),re.symlink(s,i)}Ia.exports=zc});var Ua=q((Vh,Ma)=>{"use strict";var ae=kt(),ar=require("path"),Hc=ve().mkdirsSync,Vc=ui().utimesMillisSync,sr=ht();function Yc(t,n,i){typeof i=="function"&&(i={filter:i}),i=i||{},i.clobber="clobber"in i?!!i.clobber:!0,i.overwrite="overwrite"in i?!!i.overwrite:i.clobber,i.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:a,destStat:s}=sr.checkPathsSync(t,n,"copy",i);if(sr.checkParentPathsSync(t,a,n,"copy"),i.filter&&!i.filter(t,n))return;let u=ar.dirname(n);return ae.existsSync(u)||Hc(u),$a(s,t,n,i)}function $a(t,n,i,a){let u=(a.dereference?ae.statSync:ae.lstatSync)(n);if(u.isDirectory())return ef(u,t,n,i,a);if(u.isFile()||u.isCharacterDevice()||u.isBlockDevice())return Qc(u,t,n,i,a);if(u.isSymbolicLink())return nf(t,n,i,a);throw u.isSocket()?new Error(`Cannot copy a socket file: ${n}`):u.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${n}`):new Error(`Unknown file: ${n}`)}function Qc(t,n,i,a,s){return n?Jc(t,i,a,s):Na(t,i,a,s)}function Jc(t,n,i,a){if(a.overwrite)return ae.unlinkSync(i),Na(t,n,i,a);if(a.errorOnExist)throw new Error(`'${i}' already exists`)}function Na(t,n,i,a){return ae.copyFileSync(n,i),a.preserveTimestamps&&Gc(t.mode,n,i),ci(i,t.mode)}function Gc(t,n,i){return Kc(t)&&Zc(i,t),Xc(n,i)}function Kc(t){return(t&128)===0}function Zc(t,n){return ci(t,n|128)}function ci(t,n){return ae.chmodSync(t,n)}function Xc(t,n){let i=ae.statSync(t);return Vc(n,i.atime,i.mtime)}function ef(t,n,i,a,s){return n?ja(i,a,s):tf(t.mode,i,a,s)}function tf(t,n,i,a){return ae.mkdirSync(i),ja(n,i,a),ci(i,t)}function ja(t,n,i){ae.readdirSync(t).forEach(a=>rf(a,t,n,i))}function rf(t,n,i,a){let s=ar.join(n,t),u=ar.join(i,t);if(a.filter&&!a.filter(s,u))return;let{destStat:f}=sr.checkPathsSync(s,u,"copy",a);return $a(f,s,u,a)}function nf(t,n,i,a){let s=ae.readlinkSync(n);if(a.dereference&&(s=ar.resolve(process.cwd(),s)),t){let u;try{u=ae.readlinkSync(i)}catch(f){if(f.code==="EINVAL"||f.code==="UNKNOWN")return ae.symlinkSync(s,i);throw f}if(a.dereference&&(u=ar.resolve(process.cwd(),u)),sr.isSrcSubdir(s,u))throw new Error(`Cannot copy '${s}' to a subdirectory of itself, '${u}'.`);if(sr.isSrcSubdir(u,s))throw new Error(`Cannot overwrite '${u}' with '${s}'.`);return of(s,i)}else return ae.symlinkSync(s,i)}function of(t,n){return ae.unlinkSync(n),ae.symlinkSync(t,n)}Ma.exports=Yc});var sn=q((Yh,Ha)=>{"use strict";var af=Z().fromPromise;Ha.exports={copy:af(za()),copySync:Ua()}});var ur=q((Qh,Ya)=>{"use strict";var Va=kt(),sf=Z().fromCallback;function uf(t,n){Va.rm(t,{recursive:!0,force:!0},n)}function lf(t){Va.rmSync(t,{recursive:!0,force:!0})}Ya.exports={remove:sf(uf),removeSync:lf}});var ts=q((Jh,es)=>{"use strict";var cf=Z().fromPromise,Ga=oe(),Ka=require("path"),Za=ve(),Xa=ur(),Qa=cf(async function(n){let i;try{i=await Ga.readdir(n)}catch{return Za.mkdirs(n)}return Promise.all(i.map(a=>Xa.remove(Ka.join(n,a))))});function Ja(t){let n;try{n=Ga.readdirSync(t)}catch{return Za.mkdirsSync(t)}n.forEach(i=>{i=Ka.join(t,i),Xa.removeSync(i)})}es.exports={emptyDirSync:Ja,emptydirSync:Ja,emptyDir:Qa,emptydir:Qa}});var os=q((Gh,is)=>{"use strict";var ff=Z().fromPromise,rs=require("path"),$e=oe(),ns=ve();async function df(t){let n;try{n=await $e.stat(t)}catch{}if(n&&n.isFile())return;let i=rs.dirname(t),a=null;try{a=await $e.stat(i)}catch(s){if(s.code==="ENOENT"){await ns.mkdirs(i),await $e.writeFile(t,"");return}else throw s}a.isDirectory()?await $e.writeFile(t,""):await $e.readdir(i)}function hf(t){let n;try{n=$e.statSync(t)}catch{}if(n&&n.isFile())return;let i=rs.dirname(t);try{$e.statSync(i).isDirectory()||$e.readdirSync(i)}catch(a){if(a&&a.code==="ENOENT")ns.mkdirsSync(i);else throw a}$e.writeFileSync(t,"")}is.exports={createFile:ff(df),createFileSync:hf}});var cs=q((Kh,ls)=>{"use strict";var mf=Z().fromPromise,as=require("path"),Ke=oe(),ss=ve(),{pathExists:pf}=Ge(),{areIdentical:us}=ht();async function yf(t,n){let i;try{i=await Ke.lstat(n)}catch{}let a;try{a=await Ke.lstat(t)}catch(f){throw f.message=f.message.replace("lstat","ensureLink"),f}if(i&&us(a,i))return;let s=as.dirname(n);await pf(s)||await ss.mkdirs(s),await Ke.link(t,n)}function bf(t,n){let i;try{i=Ke.lstatSync(n)}catch{}try{let u=Ke.lstatSync(t);if(i&&us(u,i))return}catch(u){throw u.message=u.message.replace("lstat","ensureLink"),u}let a=as.dirname(n);return Ke.existsSync(a)||ss.mkdirsSync(a),Ke.linkSync(t,n)}ls.exports={createLink:mf(yf),createLinkSync:bf}});var ds=q((Zh,fs)=>{"use strict";var Ze=require("path"),lr=oe(),{pathExists:Sf}=Ge(),gf=Z().fromPromise;async function wf(t,n){if(Ze.isAbsolute(t)){try{await lr.lstat(t)}catch(u){throw u.message=u.message.replace("lstat","ensureSymlink"),u}return{toCwd:t,toDst:t}}let i=Ze.dirname(n),a=Ze.join(i,t);if(await Sf(a))return{toCwd:a,toDst:t};try{await lr.lstat(t)}catch(u){throw u.message=u.message.replace("lstat","ensureSymlink"),u}return{toCwd:t,toDst:Ze.relative(i,t)}}function _f(t,n){if(Ze.isAbsolute(t)){if(!lr.existsSync(t))throw new Error("absolute srcpath does not exist");return{toCwd:t,toDst:t}}let i=Ze.dirname(n),a=Ze.join(i,t);if(lr.existsSync(a))return{toCwd:a,toDst:t};if(!lr.existsSync(t))throw new Error("relative srcpath does not exist");return{toCwd:t,toDst:Ze.relative(i,t)}}fs.exports={symlinkPaths:gf(wf),symlinkPathsSync:_f}});var ps=q((Xh,ms)=>{"use strict";var hs=oe(),Rf=Z().fromPromise;async function Ef(t,n){if(n)return n;let i;try{i=await hs.lstat(t)}catch{return"file"}return i&&i.isDirectory()?"dir":"file"}function Tf(t,n){if(n)return n;let i;try{i=hs.lstatSync(t)}catch{return"file"}return i&&i.isDirectory()?"dir":"file"}ms.exports={symlinkType:Rf(Ef),symlinkTypeSync:Tf}});var gs=q((em,Ss)=>{"use strict";var Pf=Z().fromPromise,ys=require("path"),qe=oe(),{mkdirs:vf,mkdirsSync:Cf}=ve(),{symlinkPaths:Af,symlinkPathsSync:kf}=ds(),{symlinkType:Ff,symlinkTypeSync:qf}=ps(),{pathExists:Df}=Ge(),{areIdentical:bs}=ht();async function Of(t,n,i){let a;try{a=await qe.lstat(n)}catch{}if(a&&a.isSymbolicLink()){let[S,g]=await Promise.all([qe.stat(t),qe.stat(n)]);if(bs(S,g))return}let s=await Af(t,n);t=s.toDst;let u=await Ff(s.toCwd,i),f=ys.dirname(n);return await Df(f)||await vf(f),qe.symlink(t,n,u)}function Bf(t,n,i){let a;try{a=qe.lstatSync(n)}catch{}if(a&&a.isSymbolicLink()){let S=qe.statSync(t),g=qe.statSync(n);if(bs(S,g))return}let s=kf(t,n);t=s.toDst,i=qf(s.toCwd,i);let u=ys.dirname(n);return qe.existsSync(u)||Cf(u),qe.symlinkSync(t,n,i)}Ss.exports={createSymlink:Pf(Of),createSymlinkSync:Bf}});var Cs=q((tm,vs)=>{"use strict";var{createFile:ws,createFileSync:_s}=os(),{createLink:Rs,createLinkSync:Es}=cs(),{createSymlink:Ts,createSymlinkSync:Ps}=gs();vs.exports={createFile:ws,createFileSync:_s,ensureFile:ws,ensureFileSync:_s,createLink:Rs,createLinkSync:Es,ensureLink:Rs,ensureLinkSync:Es,createSymlink:Ts,createSymlinkSync:Ps,ensureSymlink:Ts,ensureSymlinkSync:Ps}});var un=q((rm,As)=>{function Wf(t,{EOL:n=`
`,finalEOL:i=!0,replacer:a=null,spaces:s}={}){let u=i?n:"";return JSON.stringify(t,a,s).replace(/\n/g,n)+u}function Lf(t){return Buffer.isBuffer(t)&&(t=t.toString("utf8")),t.replace(/^\uFEFF/,"")}As.exports={stringify:Wf,stripBom:Lf}});var Ds=q((nm,qs)=>{var Dt;try{Dt=kt()}catch{Dt=require("fs")}var ln=Z(),{stringify:ks,stripBom:Fs}=un();async function xf(t,n={}){typeof n=="string"&&(n={encoding:n});let i=n.fs||Dt,a="throws"in n?n.throws:!0,s=await ln.fromCallback(i.readFile)(t,n);s=Fs(s);let u;try{u=JSON.parse(s,n?n.reviver:null)}catch(f){if(a)throw f.message=`${t}: ${f.message}`,f;return null}return u}var If=ln.fromPromise(xf);function zf(t,n={}){typeof n=="string"&&(n={encoding:n});let i=n.fs||Dt,a="throws"in n?n.throws:!0;try{let s=i.readFileSync(t,n);return s=Fs(s),JSON.parse(s,n.reviver)}catch(s){if(a)throw s.message=`${t}: ${s.message}`,s;return null}}async function $f(t,n,i={}){let a=i.fs||Dt,s=ks(n,i);await ln.fromCallback(a.writeFile)(t,s,i)}var Nf=ln.fromPromise($f);function jf(t,n,i={}){let a=i.fs||Dt,s=ks(n,i);return a.writeFileSync(t,s,i)}var Mf={readFile:If,readFileSync:zf,writeFile:Nf,writeFileSync:jf};qs.exports=Mf});var Bs=q((im,Os)=>{"use strict";var cn=Ds();Os.exports={readJson:cn.readFile,readJsonSync:cn.readFileSync,writeJson:cn.writeFile,writeJsonSync:cn.writeFileSync}});var fn=q((om,xs)=>{"use strict";var Uf=Z().fromPromise,fi=oe(),Ws=require("path"),Ls=ve(),Hf=Ge().pathExists;async function Vf(t,n,i="utf-8"){let a=Ws.dirname(t);return await Hf(a)||await Ls.mkdirs(a),fi.writeFile(t,n,i)}function Yf(t,...n){let i=Ws.dirname(t);fi.existsSync(i)||Ls.mkdirsSync(i),fi.writeFileSync(t,...n)}xs.exports={outputFile:Uf(Vf),outputFileSync:Yf}});var zs=q((am,Is)=>{"use strict";var{stringify:Qf}=un(),{outputFile:Jf}=fn();async function Gf(t,n,i={}){let a=Qf(n,i);await Jf(t,a,i)}Is.exports=Gf});var Ns=q((sm,$s)=>{"use strict";var{stringify:Kf}=un(),{outputFileSync:Zf}=fn();function Xf(t,n,i){let a=Kf(n,i);Zf(t,a,i)}$s.exports=Xf});var Ms=q((um,js)=>{"use strict";var ed=Z().fromPromise,se=Bs();se.outputJson=ed(zs());se.outputJsonSync=Ns();se.outputJSON=se.outputJson;se.outputJSONSync=se.outputJsonSync;se.writeJSON=se.writeJson;se.writeJSONSync=se.writeJsonSync;se.readJSON=se.readJson;se.readJSONSync=se.readJsonSync;js.exports=se});var Qs=q((lm,Ys)=>{"use strict";var td=oe(),Us=require("path"),{copy:rd}=sn(),{remove:Vs}=ur(),{mkdirp:nd}=ve(),{pathExists:id}=Ge(),Hs=ht();async function od(t,n,i={}){let a=i.overwrite||i.clobber||!1,{srcStat:s,isChangingCase:u=!1}=await Hs.checkPaths(t,n,"move",i);await Hs.checkParentPaths(t,s,n,"move");let f=Us.dirname(n);return Us.parse(f).root!==f&&await nd(f),ad(t,n,a,u)}async function ad(t,n,i,a){if(!a){if(i)await Vs(n);else if(await id(n))throw new Error("dest already exists.")}try{await td.rename(t,n)}catch(s){if(s.code!=="EXDEV")throw s;await sd(t,n,i)}}async function sd(t,n,i){return await rd(t,n,{overwrite:i,errorOnExist:!0,preserveTimestamps:!0}),Vs(t)}Ys.exports=od});var Xs=q((cm,Zs)=>{"use strict";var Gs=kt(),hi=require("path"),ud=sn().copySync,Ks=ur().removeSync,ld=ve().mkdirpSync,Js=ht();function cd(t,n,i){i=i||{};let a=i.overwrite||i.clobber||!1,{srcStat:s,isChangingCase:u=!1}=Js.checkPathsSync(t,n,"move",i);return Js.checkParentPathsSync(t,s,n,"move"),fd(n)||ld(hi.dirname(n)),dd(t,n,a,u)}function fd(t){let n=hi.dirname(t);return hi.parse(n).root===n}function dd(t,n,i,a){if(a)return di(t,n,i);if(i)return Ks(n),di(t,n,i);if(Gs.existsSync(n))throw new Error("dest already exists.");return di(t,n,i)}function di(t,n,i){try{Gs.renameSync(t,n)}catch(a){if(a.code!=="EXDEV")throw a;return hd(t,n,i)}}function hd(t,n,i){return ud(t,n,{overwrite:i,errorOnExist:!0,preserveTimestamps:!0}),Ks(t)}Zs.exports=cd});var tu=q((fm,eu)=>{"use strict";var md=Z().fromPromise;eu.exports={move:md(Qs()),moveSync:Xs()}});var nu=q((dm,ru)=>{"use strict";ru.exports={...oe(),...sn(),...ts(),...Cs(),...Ms(),...ve(),...tu(),...fn(),...Ge(),...ur()}});var _d={};Ao(_d,{default:()=>gd});module.exports=Ul(_d);var sa=Ae(require("node:http"),1),ua=Ae(require("node:https"),1),ct=Ae(require("node:zlib"),1),ye=Ae(require("node:stream"),1),rr=require("node:buffer");function Hl(t){if(!/^data:/i.test(t))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');t=t.replace(/\r?\n/g,"");let n=t.indexOf(",");if(n===-1||n<=4)throw new TypeError("malformed data: URI");let i=t.substring(5,n).split(";"),a="",s=!1,u=i[0]||"text/plain",f=u;for(let p=1;p<i.length;p++)i[p]==="base64"?s=!0:(f+=`;${i[p]}`,i[p].indexOf("charset=")===0&&(a=i[p].substring(8)));!i[0]&&!a.length&&(f+=";charset=US-ASCII",a="US-ASCII");let S=s?"base64":"ascii",g=unescape(t.substring(n+1)),w=Buffer.from(g,S);return w.type=u,w.typeFull=f,w.charset=a,w}var Fo=Hl;var ge=Ae(require("node:stream"),1),Ie=require("node:util"),me=require("node:buffer");Gt();Ur();var xe=class extends Error{constructor(n,i){super(n),Error.captureStackTrace(this,this.constructor),this.type=i}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var fe=class extends xe{constructor(n,i,a){super(n,i),a&&(this.code=this.errno=a.code,this.erroredSysCall=a.syscall)}};var Hr=Symbol.toStringTag,Qn=t=>typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&typeof t.sort=="function"&&t[Hr]==="URLSearchParams",Zt=t=>t&&typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&/^(Blob|File)$/.test(t[Hr]),zo=t=>typeof t=="object"&&(t[Hr]==="AbortSignal"||t[Hr]==="EventTarget"),$o=(t,n)=>{let i=new URL(n).hostname,a=new URL(t).hostname;return i===a||i.endsWith(`.${a}`)},No=(t,n)=>{let i=new URL(n).protocol,a=new URL(t).protocol;return i===a};var ac=(0,Ie.promisify)(ge.default.pipeline),de=Symbol("Body internals"),Fe=class{constructor(n,{size:i=0}={}){let a=null;n===null?n=null:Qn(n)?n=me.Buffer.from(n.toString()):Zt(n)||me.Buffer.isBuffer(n)||(Ie.types.isAnyArrayBuffer(n)?n=me.Buffer.from(n):ArrayBuffer.isView(n)?n=me.Buffer.from(n.buffer,n.byteOffset,n.byteLength):n instanceof ge.default||(n instanceof st?(n=Io(n),a=n.type.split("=")[1]):n=me.Buffer.from(String(n))));let s=n;me.Buffer.isBuffer(n)?s=ge.default.Readable.from(n):Zt(n)&&(s=ge.default.Readable.from(n.stream())),this[de]={body:n,stream:s,boundary:a,disturbed:!1,error:null},this.size=i,n instanceof ge.default&&n.on("error",u=>{let f=u instanceof xe?u:new fe(`Invalid response body while trying to fetch ${this.url}: ${u.message}`,"system",u);this[de].error=f})}get body(){return this[de].stream}get bodyUsed(){return this[de].disturbed}async arrayBuffer(){let{buffer:n,byteOffset:i,byteLength:a}=await Kn(this);return n.slice(i,i+a)}async formData(){let n=this.headers.get("content-type");if(n.startsWith("application/x-www-form-urlencoded")){let a=new st,s=new URLSearchParams(await this.text());for(let[u,f]of s)a.append(u,f);return a}let{toFormData:i}=await Promise.resolve().then(()=>(Vo(),Ho));return i(this.body,n)}async blob(){let n=this.headers&&this.headers.get("content-type")||this[de].body&&this[de].body.type||"",i=await this.arrayBuffer();return new Le([i],{type:n})}async json(){let n=await this.text();return JSON.parse(n)}async text(){let n=await Kn(this);return new TextDecoder().decode(n)}buffer(){return Kn(this)}};Fe.prototype.buffer=(0,Ie.deprecate)(Fe.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(Fe.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Ie.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function Kn(t){if(t[de].disturbed)throw new TypeError(`body used already for: ${t.url}`);if(t[de].disturbed=!0,t[de].error)throw t[de].error;let{body:n}=t;if(n===null)return me.Buffer.alloc(0);if(!(n instanceof ge.default))return me.Buffer.alloc(0);let i=[],a=0;try{for await(let s of n){if(t.size>0&&a+s.length>t.size){let u=new fe(`content size at ${t.url} over limit: ${t.size}`,"max-size");throw n.destroy(u),u}a+=s.length,i.push(s)}}catch(s){throw s instanceof xe?s:new fe(`Invalid response body while trying to fetch ${t.url}: ${s.message}`,"system",s)}if(n.readableEnded===!0||n._readableState.ended===!0)try{return i.every(s=>typeof s=="string")?me.Buffer.from(i.join("")):me.Buffer.concat(i,a)}catch(s){throw new fe(`Could not create Buffer from response body for ${t.url}: ${s.message}`,"system",s)}else throw new fe(`Premature close of server response while trying to fetch ${t.url}`)}var vt=(t,n)=>{let i,a,{body:s}=t[de];if(t.bodyUsed)throw new Error("cannot clone body after it is used");return s instanceof ge.default&&typeof s.getBoundary!="function"&&(i=new ge.PassThrough({highWaterMark:n}),a=new ge.PassThrough({highWaterMark:n}),s.pipe(i),s.pipe(a),t[de].stream=i,s=a),s},sc=(0,Ie.deprecate)(t=>t.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),Jr=(t,n)=>t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":Qn(t)?"application/x-www-form-urlencoded;charset=UTF-8":Zt(t)?t.type||null:me.Buffer.isBuffer(t)||Ie.types.isAnyArrayBuffer(t)||ArrayBuffer.isView(t)?null:t instanceof st?`multipart/form-data; boundary=${n[de].boundary}`:t&&typeof t.getBoundary=="function"?`multipart/form-data;boundary=${sc(t)}`:t instanceof ge.default?null:"text/plain;charset=UTF-8",Yo=t=>{let{body:n}=t[de];return n===null?0:Zt(n)?n.size:me.Buffer.isBuffer(n)?n.length:n&&typeof n.getLengthSync=="function"&&n.hasKnownLength&&n.hasKnownLength()?n.getLengthSync():null},Qo=async(t,{body:n})=>{n===null?t.end():await ac(n,t)};var Zn=require("node:util"),er=Ae(require("node:http"),1),Gr=typeof er.default.validateHeaderName=="function"?er.default.validateHeaderName:t=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(t)){let n=new TypeError(`Header name must be a valid HTTP token [${t}]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),n}},Xn=typeof er.default.validateHeaderValue=="function"?er.default.validateHeaderValue:(t,n)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(n)){let i=new TypeError(`Invalid character in header content ["${t}"]`);throw Object.defineProperty(i,"code",{value:"ERR_INVALID_CHAR"}),i}},pe=class t extends URLSearchParams{constructor(n){let i=[];if(n instanceof t){let a=n.raw();for(let[s,u]of Object.entries(a))i.push(...u.map(f=>[s,f]))}else if(n!=null)if(typeof n=="object"&&!Zn.types.isBoxedPrimitive(n)){let a=n[Symbol.iterator];if(a==null)i.push(...Object.entries(n));else{if(typeof a!="function")throw new TypeError("Header pairs must be iterable");i=[...n].map(s=>{if(typeof s!="object"||Zn.types.isBoxedPrimitive(s))throw new TypeError("Each header pair must be an iterable object");return[...s]}).map(s=>{if(s.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...s]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return i=i.length>0?i.map(([a,s])=>(Gr(a),Xn(a,String(s)),[String(a).toLowerCase(),String(s)])):void 0,super(i),new Proxy(this,{get(a,s,u){switch(s){case"append":case"set":return(f,S)=>(Gr(f),Xn(f,String(S)),URLSearchParams.prototype[s].call(a,String(f).toLowerCase(),String(S)));case"delete":case"has":case"getAll":return f=>(Gr(f),URLSearchParams.prototype[s].call(a,String(f).toLowerCase()));case"keys":return()=>(a.sort(),new Set(URLSearchParams.prototype.keys.call(a)).keys());default:return Reflect.get(a,s,u)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(n){let i=this.getAll(n);if(i.length===0)return null;let a=i.join(", ");return/^content-encoding$/i.test(n)&&(a=a.toLowerCase()),a}forEach(n,i=void 0){for(let a of this.keys())Reflect.apply(n,i,[this.get(a),a,this])}*values(){for(let n of this.keys())yield this.get(n)}*entries(){for(let n of this.keys())yield[n,this.get(n)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((n,i)=>(n[i]=this.getAll(i),n),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((n,i)=>{let a=this.getAll(i);return i==="host"?n[i]=a[0]:n[i]=a.length>1?a:a[0],n},{})}};Object.defineProperties(pe.prototype,["get","entries","forEach","values"].reduce((t,n)=>(t[n]={enumerable:!0},t),{}));function Jo(t=[]){return new pe(t.reduce((n,i,a,s)=>(a%2===0&&n.push(s.slice(a,a+2)),n),[]).filter(([n,i])=>{try{return Gr(n),Xn(n,String(i)),!0}catch{return!1}}))}var uc=new Set([301,302,303,307,308]),Kr=t=>uc.has(t);var Pe=Symbol("Response internals"),we=class t extends Fe{constructor(n=null,i={}){super(n,i);let a=i.status!=null?i.status:200,s=new pe(i.headers);if(n!==null&&!s.has("Content-Type")){let u=Jr(n,this);u&&s.append("Content-Type",u)}this[Pe]={type:"default",url:i.url,status:a,statusText:i.statusText||"",headers:s,counter:i.counter,highWaterMark:i.highWaterMark}}get type(){return this[Pe].type}get url(){return this[Pe].url||""}get status(){return this[Pe].status}get ok(){return this[Pe].status>=200&&this[Pe].status<300}get redirected(){return this[Pe].counter>0}get statusText(){return this[Pe].statusText}get headers(){return this[Pe].headers}get highWaterMark(){return this[Pe].highWaterMark}clone(){return new t(vt(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(n,i=302){if(!Kr(i))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new t(null,{headers:{location:new URL(n).toString()},status:i})}static error(){let n=new t(null,{status:0,statusText:""});return n[Pe].type="error",n}static json(n=void 0,i={}){let a=JSON.stringify(n);if(a===void 0)throw new TypeError("data is not JSON serializable");let s=new pe(i&&i.headers);return s.has("content-type")||s.set("content-type","application/json"),new t(a,{...i,headers:s})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(we.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var ia=require("node:url"),oa=require("node:util");var Go=t=>{if(t.search)return t.search;let n=t.href.length-1,i=t.hash||(t.href[n]==="#"?"#":"");return t.href[n-i.length]==="?"?"?":""};var Zo=require("node:net");function Ko(t,n=!1){return t==null||(t=new URL(t),/^(about|blob|data):$/.test(t.protocol))?"no-referrer":(t.username="",t.password="",t.hash="",n&&(t.pathname="",t.search=""),t)}var Xo=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),ea="strict-origin-when-cross-origin";function ta(t){if(!Xo.has(t))throw new TypeError(`Invalid referrerPolicy: ${t}`);return t}function lc(t){if(/^(http|ws)s:$/.test(t.protocol))return!0;let n=t.host.replace(/(^\[)|(]$)/g,""),i=(0,Zo.isIP)(n);return i===4&&/^127\./.test(n)||i===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(n)?!0:t.host==="localhost"||t.host.endsWith(".localhost")?!1:t.protocol==="file:"}function Ct(t){return/^about:(blank|srcdoc)$/.test(t)||t.protocol==="data:"||/^(blob|filesystem):$/.test(t.protocol)?!0:lc(t)}function ra(t,{referrerURLCallback:n,referrerOriginCallback:i}={}){if(t.referrer==="no-referrer"||t.referrerPolicy==="")return null;let a=t.referrerPolicy;if(t.referrer==="about:client")return"no-referrer";let s=t.referrer,u=Ko(s),f=Ko(s,!0);u.toString().length>4096&&(u=f),n&&(u=n(u)),i&&(f=i(f));let S=new URL(t.url);switch(a){case"no-referrer":return"no-referrer";case"origin":return f;case"unsafe-url":return u;case"strict-origin":return Ct(u)&&!Ct(S)?"no-referrer":f.toString();case"strict-origin-when-cross-origin":return u.origin===S.origin?u:Ct(u)&&!Ct(S)?"no-referrer":f;case"same-origin":return u.origin===S.origin?u:"no-referrer";case"origin-when-cross-origin":return u.origin===S.origin?u:f;case"no-referrer-when-downgrade":return Ct(u)&&!Ct(S)?"no-referrer":u;default:throw new TypeError(`Invalid referrerPolicy: ${a}`)}}function na(t){let n=(t.get("referrer-policy")||"").split(/[,\s]+/),i="";for(let a of n)a&&Xo.has(a)&&(i=a);return i}var K=Symbol("Request internals"),tr=t=>typeof t=="object"&&typeof t[K]=="object",cc=(0,oa.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),lt=class t extends Fe{constructor(n,i={}){let a;if(tr(n)?a=new URL(n.url):(a=new URL(n),n={}),a.username!==""||a.password!=="")throw new TypeError(`${a} is an url with embedded credentials.`);let s=i.method||n.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(s)&&(s=s.toUpperCase()),!tr(i)&&"data"in i&&cc(),(i.body!=null||tr(n)&&n.body!==null)&&(s==="GET"||s==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let u=i.body?i.body:tr(n)&&n.body!==null?vt(n):null;super(u,{size:i.size||n.size||0});let f=new pe(i.headers||n.headers||{});if(u!==null&&!f.has("Content-Type")){let w=Jr(u,this);w&&f.set("Content-Type",w)}let S=tr(n)?n.signal:null;if("signal"in i&&(S=i.signal),S!=null&&!zo(S))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let g=i.referrer==null?n.referrer:i.referrer;if(g==="")g="no-referrer";else if(g){let w=new URL(g);g=/^about:(\/\/)?client$/.test(w)?"client":w}else g=void 0;this[K]={method:s,redirect:i.redirect||n.redirect||"follow",headers:f,parsedURL:a,signal:S,referrer:g},this.follow=i.follow===void 0?n.follow===void 0?20:n.follow:i.follow,this.compress=i.compress===void 0?n.compress===void 0?!0:n.compress:i.compress,this.counter=i.counter||n.counter||0,this.agent=i.agent||n.agent,this.highWaterMark=i.highWaterMark||n.highWaterMark||16384,this.insecureHTTPParser=i.insecureHTTPParser||n.insecureHTTPParser||!1,this.referrerPolicy=i.referrerPolicy||n.referrerPolicy||""}get method(){return this[K].method}get url(){return(0,ia.format)(this[K].parsedURL)}get headers(){return this[K].headers}get redirect(){return this[K].redirect}get signal(){return this[K].signal}get referrer(){if(this[K].referrer==="no-referrer")return"";if(this[K].referrer==="client")return"about:client";if(this[K].referrer)return this[K].referrer.toString()}get referrerPolicy(){return this[K].referrerPolicy}set referrerPolicy(n){this[K].referrerPolicy=ta(n)}clone(){return new t(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(lt.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var aa=t=>{let{parsedURL:n}=t[K],i=new pe(t[K].headers);i.has("Accept")||i.set("Accept","*/*");let a=null;if(t.body===null&&/^(post|put)$/i.test(t.method)&&(a="0"),t.body!==null){let S=Yo(t);typeof S=="number"&&!Number.isNaN(S)&&(a=String(S))}a&&i.set("Content-Length",a),t.referrerPolicy===""&&(t.referrerPolicy=ea),t.referrer&&t.referrer!=="no-referrer"?t[K].referrer=ra(t):t[K].referrer="no-referrer",t[K].referrer instanceof URL&&i.set("Referer",t.referrer),i.has("User-Agent")||i.set("User-Agent","node-fetch"),t.compress&&!i.has("Accept-Encoding")&&i.set("Accept-Encoding","gzip, deflate, br");let{agent:s}=t;typeof s=="function"&&(s=s(n));let u=Go(n),f={path:n.pathname+u,method:t.method,headers:i[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:t.insecureHTTPParser,agent:s};return{parsedURL:n,options:f}};var Zr=class extends xe{constructor(n,i="aborted"){super(n,i)}};Ur();Jn();var fc=new Set(["data:","http:","https:"]);async function ft(t,n){return new Promise((i,a)=>{let s=new lt(t,n),{parsedURL:u,options:f}=aa(s);if(!fc.has(u.protocol))throw new TypeError(`node-fetch cannot load ${t}. URL scheme "${u.protocol.replace(/:$/,"")}" is not supported.`);if(u.protocol==="data:"){let m=Fo(s.url),P=new we(m,{headers:{"Content-Type":m.typeFull}});i(P);return}let S=(u.protocol==="https:"?ua.default:sa.default).request,{signal:g}=s,w=null,p=()=>{let m=new Zr("The operation was aborted.");a(m),s.body&&s.body instanceof ye.default.Readable&&s.body.destroy(m),!(!w||!w.body)&&w.body.emit("error",m)};if(g&&g.aborted){p();return}let _=()=>{p(),d()},b=S(u.toString(),f);g&&g.addEventListener("abort",_);let d=()=>{b.abort(),g&&g.removeEventListener("abort",_)};b.on("error",m=>{a(new fe(`request to ${s.url} failed, reason: ${m.message}`,"system",m)),d()}),dc(b,m=>{w&&w.body&&w.body.destroy(m)}),process.version<"v14"&&b.on("socket",m=>{let P;m.prependListener("end",()=>{P=m._eventsCount}),m.prependListener("close",R=>{if(w&&P<m._eventsCount&&!R){let C=new Error("Premature close");C.code="ERR_STREAM_PREMATURE_CLOSE",w.body.emit("error",C)}})}),b.on("response",m=>{b.setTimeout(0);let P=Jo(m.rawHeaders);if(Kr(m.statusCode)){let F=P.get("Location"),M=null;try{M=F===null?null:new URL(F,s.url)}catch{if(s.redirect!=="manual"){a(new fe(`uri requested responds with an invalid redirect URL: ${F}`,"invalid-redirect")),d();return}}switch(s.redirect){case"error":a(new fe(`uri requested responds with a redirect, redirect mode is set to error: ${s.url}`,"no-redirect")),d();return;case"manual":break;case"follow":{if(M===null)break;if(s.counter>=s.follow){a(new fe(`maximum redirect reached at: ${s.url}`,"max-redirect")),d();return}let W={headers:new pe(s.headers),follow:s.follow,counter:s.counter+1,agent:s.agent,compress:s.compress,method:s.method,body:vt(s),signal:s.signal,size:s.size,referrer:s.referrer,referrerPolicy:s.referrerPolicy};if(!$o(s.url,M)||!No(s.url,M))for(let T of["authorization","www-authenticate","cookie","cookie2"])W.headers.delete(T);if(m.statusCode!==303&&s.body&&n.body instanceof ye.default.Readable){a(new fe("Cannot follow redirect with body being a readable stream","unsupported-redirect")),d();return}(m.statusCode===303||(m.statusCode===301||m.statusCode===302)&&s.method==="POST")&&(W.method="GET",W.body=void 0,W.headers.delete("content-length"));let be=na(P);be&&(W.referrerPolicy=be),i(ft(new lt(M,W))),d();return}default:return a(new TypeError(`Redirect option '${s.redirect}' is not a valid value of RequestRedirect`))}}g&&m.once("end",()=>{g.removeEventListener("abort",_)});let R=(0,ye.pipeline)(m,new ye.PassThrough,F=>{F&&a(F)});process.version<"v12.10"&&m.on("aborted",_);let C={url:s.url,status:m.statusCode,statusText:m.statusMessage,headers:P,size:s.size,counter:s.counter,highWaterMark:s.highWaterMark},A=P.get("Content-Encoding");if(!s.compress||s.method==="HEAD"||A===null||m.statusCode===204||m.statusCode===304){w=new we(R,C),i(w);return}let J={flush:ct.default.Z_SYNC_FLUSH,finishFlush:ct.default.Z_SYNC_FLUSH};if(A==="gzip"||A==="x-gzip"){R=(0,ye.pipeline)(R,ct.default.createGunzip(J),F=>{F&&a(F)}),w=new we(R,C),i(w);return}if(A==="deflate"||A==="x-deflate"){let F=(0,ye.pipeline)(m,new ye.PassThrough,M=>{M&&a(M)});F.once("data",M=>{(M[0]&15)===8?R=(0,ye.pipeline)(R,ct.default.createInflate(),W=>{W&&a(W)}):R=(0,ye.pipeline)(R,ct.default.createInflateRaw(),W=>{W&&a(W)}),w=new we(R,C),i(w)}),F.once("end",()=>{w||(w=new we(R,C),i(w))});return}if(A==="br"){R=(0,ye.pipeline)(R,ct.default.createBrotliDecompress(),F=>{F&&a(F)}),w=new we(R,C),i(w);return}w=new we(R,C),i(w)}),Qo(b,s).catch(a)})}function dc(t,n){let i=rr.Buffer.from(`0\r
\r
`),a=!1,s=!1,u;t.on("response",f=>{let{headers:S}=f;a=S["transfer-encoding"]==="chunked"&&!S["content-length"]}),t.on("socket",f=>{let S=()=>{if(a&&!s){let w=new Error("Premature close");w.code="ERR_STREAM_PREMATURE_CLOSE",n(w)}},g=w=>{s=rr.Buffer.compare(w.slice(-5),i)===0,!s&&u&&(s=rr.Buffer.compare(u.slice(-3),i.slice(0,3))===0&&rr.Buffer.compare(w.slice(-2),i.slice(3))===0),u=w};f.prependListener("close",S),f.on("data",g),t.on("close",()=>{f.removeListener("close",S),f.removeListener("data",g)})})}var la=(t=0,n=8)=>`https://www.bing.com/HPImageArchive.aspx?format=js&idx=${t}&n=${n}&pid=hp&uhd=1&uhdwidth=3840&uhdheight=2160`,Xr=(t,n="raw",i=3840,a=2160)=>{let s;switch(n){case"raw":{s=t.replace("&w=3840&h=2160&rs=1&c=4","");break}case"full":{s=t;break}case"regular":{s=t.replace("3840","2560").replace("2160","1440");break}case"small":{s=t.replace("3840","1920").replace("2160","1080");break}default:{s=t.replace("3840",i+"").replace("2160",a+"");break}}return"https://www.bing.com"+s};var en=t=>{let i=t.indexOf("_");return t.substring(11,i)};var ue=require("@raycast/api"),Xe=Ae(nu());var iu=Ae(require("node:process"),1),ou=require("node:util"),mi=require("node:child_process"),pd=(0,ou.promisify)(mi.execFile);async function au(t,{humanReadableOutput:n=!0}={}){if(iu.default.platform!=="darwin")throw new Error("macOS only");let i=n?[]:["-ss"],{stdout:a}=await pd("osascript",["-e",t,i]);return a.trim()}var pi=require("os");var su=require("@raycast/api"),{layout:mm,columns:pm,applyTo:uu,downloadSize:lu,downloadDirectory:dn,autoDownload:cu,includeDownloadedWallpapers:ym}=(0,su.getPreferenceValues)();var fu=(a=>(a.ALL="All",a.ONLINE="Online",a.DOWNLOADED="Downloaded",a))(fu||{}),Sm=Object.entries(fu);var du=t=>`
      set temp_folder to (POSIX path of "${t}")
      set q_temp_folder to quoted form of temp_folder
      
      set x to alias (POSIX file temp_folder)

      try
        tell application "System Events"
          tell ${uu} desktop
            set picture to (x as text)
            return "ok"
          end tell
        end tell
      on error
        return "error"
      end try
    `;var hn=ue.environment.supportPath,yd=t=>!(t!=null&&String(t).length>0),hu=t=>`${hn.endsWith("/")?hn:`${hn}/`}${t}.png`;async function bd(t,n){let i=hu(t);if((0,Xe.existsSync)(i))return i;let a=await ft(n).catch(async s=>{await(0,ue.showToast)(ue.Toast.Style.Failure,String(s))});if(a){let s=await a.arrayBuffer();Xe.default.writeFile(hu(t),Buffer.from(s),async u=>{u&&await(0,ue.showToast)(ue.Toast.Style.Failure,String(u))})}return i}var mu=async(t,n,i=!0)=>{let a=i?await(0,ue.showToast)(ue.Toast.Style.Animated,"Downloading wallpaper..."):void 0;await Xe.default.emptydir(hn);try{let s=await bd(t,n);a&&(a.title="Setting wallpaper...");let u=await au(du(s));u!=="ok"?i&&a&&(a.style=ue.Toast.Style.Failure,a.title=u):a&&(a.style=ue.Toast.Style.Success,a.title="Set wallpaper successfully!")}catch(s){console.error(s),a&&(a.style=ue.Toast.Style.Failure,a.title="Something went wrong.",a.message="Try with another image or check your internet connection.")}};var Sd=()=>{let t=dn;return dn.startsWith("~")&&(t=dn.replace("~",`${(0,pi.homedir)()}`)),yd(t)||!Xe.default.pathExistsSync(t)?(0,pi.homedir)()+"/Downloads":t.endsWith("/")?t.substring(0,-1):t};async function pu(t,n){n.forEach(i=>{let a=`${Sd()}/${en(i.url)}-${i.startdate}.png`;Xe.default.existsSync(a)||ft(Xr(i.url,t)).then(function(s){return s.arrayBuffer()}).then(function(s){Xe.default.writeFile(a,Buffer.from(s),async u=>{u&&console.error(String(u))})})})}var Ot=require("@raycast/api");var gd=async()=>{Ot.environment.launchType===Ot.LaunchType.UserInitiated&&await(0,Ot.showHUD)("Downloading and setting wallpaper..."),await wd()},wd=async()=>{let t=await ft(la(0,8)).catch(async n=>{console.error(n)});if(!(typeof t>"u"))try{let n=(await t.json()).images;cu&&await pu(lu,n);let i=n[0];await mu(en(i.url)+"-"+i.startdate,Xr(i.url,"raw"),!1)}catch(n){console.error(n)}};
/*! Bundled license information:

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)
*/
