"use strict";var Vl=Object.create;var Ur=Object.defineProperty;var Yl=Object.getOwnPropertyDescriptor;var Ql=Object.getOwnPropertyNames;var Jl=Object.getPrototypeOf,Gl=Object.prototype.hasOwnProperty;var Jt=(t,r)=>()=>(t&&(r=t(t=0)),r);var q=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports),Oo=(t,r)=>{for(var i in r)Ur(t,i,{get:r[i],enumerable:!0})},Bo=(t,r,i,a)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of Ql(r))!Gl.call(t,s)&&s!==i&&Ur(t,s,{get:()=>r[s],enumerable:!(a=Yl(r,s))||a.enumerable});return t};var Ae=(t,r,i)=>(i=t!=null?Vl(Jl(t)):{},Bo(r||!t||!t.__esModule?Ur(i,"default",{value:t,enumerable:!0}):i,t)),Kl=t=>Bo(Ur({},"__esModule",{value:!0}),t);var xo=q((Hr,Lo)=>{(function(t,r){typeof Hr=="object"&&typeof Lo<"u"?r(Hr):typeof define=="function"&&define.amd?define(["exports"],r):(t=typeof globalThis<"u"?globalThis:t||self,r(t.WebStreamsPolyfill={}))})(Hr,function(t){"use strict";let r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function i(){}function a(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let s=a();function u(e){return typeof e=="object"&&e!==null||typeof e=="function"}let f=i,b=Promise,g=Promise.prototype.then,w=Promise.resolve.bind(b),p=Promise.reject.bind(b);function _(e){return new b(e)}function S(e){return w(e)}function d(e){return p(e)}function m(e,n,o){return g.call(e,n,o)}function P(e,n,o){m(m(e,n,o),void 0,f)}function R(e,n){P(e,n)}function C(e,n){P(e,void 0,n)}function A(e,n,o){return m(e,n,o)}function J(e){m(e,void 0,f)}let F=(()=>{let e=s&&s.queueMicrotask;if(typeof e=="function")return e;let n=S(void 0);return o=>m(n,o)})();function M(e,n,o){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,n,o)}function W(e,n,o){try{return S(M(e,n,o))}catch(l){return d(l)}}let be=16384;class T{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(n){let o=this._back,l=o;o._elements.length===be-1&&(l={_elements:[],_next:void 0}),o._elements.push(n),l!==o&&(this._back=l,o._next=l),++this._size}shift(){let n=this._front,o=n,l=this._cursor,c=l+1,h=n._elements,y=h[l];return c===be&&(o=n._next,c=0),--this._size,this._cursor=c,n!==o&&(this._front=o),h[l]=void 0,y}forEach(n){let o=this._cursor,l=this._front,c=l._elements;for(;(o!==c.length||l._next!==void 0)&&!(o===c.length&&(l=l._next,c=l._elements,o=0,c.length===0));)n(c[o]),++o}peek(){let n=this._front,o=this._cursor;return n._elements[o]}}function L(e,n){e._ownerReadableStream=n,n._reader=e,n._state==="readable"?Q(e):n._state==="closed"?te(e):V(e,n._storedError)}function O(e,n){let o=e._ownerReadableStream;return Ee(o,n)}function $(e){e._ownerReadableStream._state==="readable"?z(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):le(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function U(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function Q(e){e._closedPromise=_((n,o)=>{e._closedPromise_resolve=n,e._closedPromise_reject=o})}function V(e,n){Q(e),z(e,n)}function te(e){Q(e),Y(e)}function z(e,n){e._closedPromise_reject!==void 0&&(J(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function le(e,n){V(e,n)}function Y(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let mn=r("[[AbortSteps]]"),_i=r("[[ErrorSteps]]"),pn=r("[[CancelSteps]]"),yn=r("[[PullSteps]]"),Ri=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},Eu=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function Tu(e){return typeof e=="object"||typeof e=="function"}function De(e,n){if(e!==void 0&&!Tu(e))throw new TypeError(`${n} is not an object.`)}function _e(e,n){if(typeof e!="function")throw new TypeError(`${n} is not a function.`)}function Pu(e){return typeof e=="object"&&e!==null||typeof e=="function"}function Ei(e,n){if(!Pu(e))throw new TypeError(`${n} is not an object.`)}function Oe(e,n,o){if(e===void 0)throw new TypeError(`Parameter ${n} is required in '${o}'.`)}function bn(e,n,o){if(e===void 0)throw new TypeError(`${n} is required in '${o}'.`)}function Sn(e){return Number(e)}function Ti(e){return e===0?0:e}function vu(e){return Ti(Eu(e))}function Pi(e,n){let l=Number.MAX_SAFE_INTEGER,c=Number(e);if(c=Ti(c),!Ri(c))throw new TypeError(`${n} is not a finite number`);if(c=vu(c),c<0||c>l)throw new TypeError(`${n} is outside the accepted range of 0 to ${l}, inclusive`);return!Ri(c)||c===0?0:c}function gn(e,n){if(!Ve(e))throw new TypeError(`${n} is not a ReadableStream.`)}function pt(e){return new Bt(e)}function vi(e,n){e._reader._readRequests.push(n)}function wn(e,n,o){let c=e._reader._readRequests.shift();o?c._closeSteps():c._chunkSteps(n)}function dr(e){return e._reader._readRequests.length}function Ci(e){let n=e._reader;return!(n===void 0||!je(n))}class Bt{constructor(n){if(Oe(n,1,"ReadableStreamDefaultReader"),gn(n,"First parameter"),Ye(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");L(this,n),this._readRequests=new T}get closed(){return je(this)?this._closedPromise:d(hr("closed"))}cancel(n=void 0){return je(this)?this._ownerReadableStream===void 0?d(U("cancel")):O(this,n):d(hr("cancel"))}read(){if(!je(this))return d(hr("read"));if(this._ownerReadableStream===void 0)return d(U("read from"));let n,o,l=_((h,y)=>{n=h,o=y});return Wt(this,{_chunkSteps:h=>n({value:h,done:!1}),_closeSteps:()=>n({value:void 0,done:!0}),_errorSteps:h=>o(h)}),l}releaseLock(){if(!je(this))throw hr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");$(this)}}}Object.defineProperties(Bt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Bt.prototype,r.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function je(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof Bt}function Wt(e,n){let o=e._ownerReadableStream;o._disturbed=!0,o._state==="closed"?n._closeSteps():o._state==="errored"?n._errorSteps(o._storedError):o._readableStreamController[yn](n)}function hr(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let Ai=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class ki{constructor(n,o){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=n,this._preventCancel=o}next(){let n=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?A(this._ongoingPromise,n,n):n(),this._ongoingPromise}return(n){let o=()=>this._returnSteps(n);return this._ongoingPromise?A(this._ongoingPromise,o,o):o()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let n=this._reader;if(n._ownerReadableStream===void 0)return d(U("iterate"));let o,l,c=_((y,E)=>{o=y,l=E});return Wt(n,{_chunkSteps:y=>{this._ongoingPromise=void 0,F(()=>o({value:y,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,$(n),o({value:void 0,done:!0})},_errorSteps:y=>{this._ongoingPromise=void 0,this._isFinished=!0,$(n),l(y)}}),c}_returnSteps(n){if(this._isFinished)return Promise.resolve({value:n,done:!0});this._isFinished=!0;let o=this._reader;if(o._ownerReadableStream===void 0)return d(U("finish iterating"));if(!this._preventCancel){let l=O(o,n);return $(o),A(l,()=>({value:n,done:!0}))}return $(o),S({value:n,done:!0})}}let Fi={next(){return qi(this)?this._asyncIteratorImpl.next():d(Di("next"))},return(e){return qi(this)?this._asyncIteratorImpl.return(e):d(Di("return"))}};Ai!==void 0&&Object.setPrototypeOf(Fi,Ai);function Cu(e,n){let o=pt(e),l=new ki(o,n),c=Object.create(Fi);return c._asyncIteratorImpl=l,c}function qi(e){if(!u(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof ki}catch{return!1}}function Di(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let Oi=Number.isNaN||function(e){return e!==e};function Lt(e){return e.slice()}function Bi(e,n,o,l,c){new Uint8Array(e).set(new Uint8Array(o,l,c),n)}function Cd(e){return e}function mr(e){return!1}function Wi(e,n,o){if(e.slice)return e.slice(n,o);let l=o-n,c=new ArrayBuffer(l);return Bi(c,0,e,n,l),c}function Au(e){return!(typeof e!="number"||Oi(e)||e<0)}function Li(e){let n=Wi(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(n)}function _n(e){let n=e._queue.shift();return e._queueTotalSize-=n.size,e._queueTotalSize<0&&(e._queueTotalSize=0),n.value}function Rn(e,n,o){if(!Au(o)||o===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:n,size:o}),e._queueTotalSize+=o}function ku(e){return e._queue.peek().value}function Me(e){e._queue=new T,e._queueTotalSize=0}class xt{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!En(this))throw Cn("view");return this._view}respond(n){if(!En(this))throw Cn("respond");if(Oe(n,1,"respond"),n=Pi(n,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");mr(this._view.buffer),gr(this._associatedReadableByteStreamController,n)}respondWithNewView(n){if(!En(this))throw Cn("respondWithNewView");if(Oe(n,1,"respondWithNewView"),!ArrayBuffer.isView(n))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");mr(n.buffer),wr(this._associatedReadableByteStreamController,n)}}Object.defineProperties(xt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(xt.prototype,r.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class yt{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!tt(this))throw zt("byobRequest");return vn(this)}get desiredSize(){if(!tt(this))throw zt("desiredSize");return Ui(this)}close(){if(!tt(this))throw zt("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let n=this._controlledReadableByteStream._state;if(n!=="readable")throw new TypeError(`The stream (in ${n} state) is not in the readable state and cannot be closed`);It(this)}enqueue(n){if(!tt(this))throw zt("enqueue");if(Oe(n,1,"enqueue"),!ArrayBuffer.isView(n))throw new TypeError("chunk must be an array buffer view");if(n.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(n.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let o=this._controlledReadableByteStream._state;if(o!=="readable")throw new TypeError(`The stream (in ${o} state) is not in the readable state and cannot be enqueued to`);Sr(this,n)}error(n=void 0){if(!tt(this))throw zt("error");Re(this,n)}[pn](n){xi(this),Me(this);let o=this._cancelAlgorithm(n);return br(this),o}[yn](n){let o=this._controlledReadableByteStream;if(this._queueTotalSize>0){let c=this._queue.shift();this._queueTotalSize-=c.byteLength,Ni(this);let h=new Uint8Array(c.buffer,c.byteOffset,c.byteLength);n._chunkSteps(h);return}let l=this._autoAllocateChunkSize;if(l!==void 0){let c;try{c=new ArrayBuffer(l)}catch(y){n._errorSteps(y);return}let h={buffer:c,bufferByteLength:l,byteOffset:0,byteLength:l,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(h)}vi(o,n),rt(this)}}Object.defineProperties(yt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(yt.prototype,r.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function tt(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof yt}function En(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof xt}function rt(e){if(!Ou(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let o=e._pullAlgorithm();P(o,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,rt(e))},l=>{Re(e,l)})}function xi(e){Pn(e),e._pendingPullIntos=new T}function Tn(e,n){let o=!1;e._state==="closed"&&(o=!0);let l=Ii(n);n.readerType==="default"?wn(e,l,o):Lu(e,l,o)}function Ii(e){let n=e.bytesFilled,o=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,n/o)}function pr(e,n,o,l){e._queue.push({buffer:n,byteOffset:o,byteLength:l}),e._queueTotalSize+=l}function zi(e,n){let o=n.elementSize,l=n.bytesFilled-n.bytesFilled%o,c=Math.min(e._queueTotalSize,n.byteLength-n.bytesFilled),h=n.bytesFilled+c,y=h-h%o,E=c,k=!1;y>l&&(E=y-n.bytesFilled,k=!0);let B=e._queue;for(;E>0;){let x=B.peek(),I=Math.min(E,x.byteLength),G=n.byteOffset+n.bytesFilled;Bi(n.buffer,G,x.buffer,x.byteOffset,I),x.byteLength===I?B.shift():(x.byteOffset+=I,x.byteLength-=I),e._queueTotalSize-=I,$i(e,I,n),E-=I}return k}function $i(e,n,o){o.bytesFilled+=n}function Ni(e){e._queueTotalSize===0&&e._closeRequested?(br(e),Yt(e._controlledReadableByteStream)):rt(e)}function Pn(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function ji(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let n=e._pendingPullIntos.peek();zi(e,n)&&(yr(e),Tn(e._controlledReadableByteStream,n))}}function Fu(e,n,o){let l=e._controlledReadableByteStream,c=1;n.constructor!==DataView&&(c=n.constructor.BYTES_PER_ELEMENT);let h=n.constructor,y=n.buffer,E={buffer:y,bufferByteLength:y.byteLength,byteOffset:n.byteOffset,byteLength:n.byteLength,bytesFilled:0,elementSize:c,viewConstructor:h,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(E),Yi(l,o);return}if(l._state==="closed"){let k=new h(E.buffer,E.byteOffset,0);o._closeSteps(k);return}if(e._queueTotalSize>0){if(zi(e,E)){let k=Ii(E);Ni(e),o._chunkSteps(k);return}if(e._closeRequested){let k=new TypeError("Insufficient bytes to fill elements in the given buffer");Re(e,k),o._errorSteps(k);return}}e._pendingPullIntos.push(E),Yi(l,o),rt(e)}function qu(e,n){let o=e._controlledReadableByteStream;if(An(o))for(;Qi(o)>0;){let l=yr(e);Tn(o,l)}}function Du(e,n,o){if($i(e,n,o),o.bytesFilled<o.elementSize)return;yr(e);let l=o.bytesFilled%o.elementSize;if(l>0){let c=o.byteOffset+o.bytesFilled,h=Wi(o.buffer,c-l,c);pr(e,h,0,h.byteLength)}o.bytesFilled-=l,Tn(e._controlledReadableByteStream,o),ji(e)}function Mi(e,n){let o=e._pendingPullIntos.peek();Pn(e),e._controlledReadableByteStream._state==="closed"?qu(e):Du(e,n,o),rt(e)}function yr(e){return e._pendingPullIntos.shift()}function Ou(e){let n=e._controlledReadableByteStream;return n._state!=="readable"||e._closeRequested||!e._started?!1:!!(Ci(n)&&dr(n)>0||An(n)&&Qi(n)>0||Ui(e)>0)}function br(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function It(e){let n=e._controlledReadableByteStream;if(!(e._closeRequested||n._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let l=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Re(e,l),l}br(e),Yt(n)}}function Sr(e,n){let o=e._controlledReadableByteStream;if(e._closeRequested||o._state!=="readable")return;let l=n.buffer,c=n.byteOffset,h=n.byteLength,y=l;if(e._pendingPullIntos.length>0){let E=e._pendingPullIntos.peek();mr(E.buffer),E.buffer=E.buffer}if(Pn(e),Ci(o))if(dr(o)===0)pr(e,y,c,h);else{e._pendingPullIntos.length>0&&yr(e);let E=new Uint8Array(y,c,h);wn(o,E,!1)}else An(o)?(pr(e,y,c,h),ji(e)):pr(e,y,c,h);rt(e)}function Re(e,n){let o=e._controlledReadableByteStream;o._state==="readable"&&(xi(e),Me(e),br(e),go(o,n))}function vn(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let n=e._pendingPullIntos.peek(),o=new Uint8Array(n.buffer,n.byteOffset+n.bytesFilled,n.byteLength-n.bytesFilled),l=Object.create(xt.prototype);Wu(l,e,o),e._byobRequest=l}return e._byobRequest}function Ui(e){let n=e._controlledReadableByteStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function gr(e,n){let o=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(n===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(o.bytesFilled+n>o.byteLength)throw new RangeError("bytesWritten out of range")}o.buffer=o.buffer,Mi(e,n)}function wr(e,n){let o=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(n.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(o.byteOffset+o.bytesFilled!==n.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(o.bufferByteLength!==n.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(o.bytesFilled+n.byteLength>o.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let c=n.byteLength;o.buffer=n.buffer,Mi(e,c)}function Hi(e,n,o,l,c,h,y){n._controlledReadableByteStream=e,n._pullAgain=!1,n._pulling=!1,n._byobRequest=null,n._queue=n._queueTotalSize=void 0,Me(n),n._closeRequested=!1,n._started=!1,n._strategyHWM=h,n._pullAlgorithm=l,n._cancelAlgorithm=c,n._autoAllocateChunkSize=y,n._pendingPullIntos=new T,e._readableStreamController=n;let E=o();P(S(E),()=>{n._started=!0,rt(n)},k=>{Re(n,k)})}function Bu(e,n,o){let l=Object.create(yt.prototype),c=()=>{},h=()=>S(void 0),y=()=>S(void 0);n.start!==void 0&&(c=()=>n.start(l)),n.pull!==void 0&&(h=()=>n.pull(l)),n.cancel!==void 0&&(y=k=>n.cancel(k));let E=n.autoAllocateChunkSize;if(E===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Hi(e,l,c,h,y,o,E)}function Wu(e,n,o){e._associatedReadableByteStreamController=n,e._view=o}function Cn(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function zt(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function Vi(e){return new $t(e)}function Yi(e,n){e._reader._readIntoRequests.push(n)}function Lu(e,n,o){let c=e._reader._readIntoRequests.shift();o?c._closeSteps(n):c._chunkSteps(n)}function Qi(e){return e._reader._readIntoRequests.length}function An(e){let n=e._reader;return!(n===void 0||!nt(n))}class $t{constructor(n){if(Oe(n,1,"ReadableStreamBYOBReader"),gn(n,"First parameter"),Ye(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!tt(n._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");L(this,n),this._readIntoRequests=new T}get closed(){return nt(this)?this._closedPromise:d(_r("closed"))}cancel(n=void 0){return nt(this)?this._ownerReadableStream===void 0?d(U("cancel")):O(this,n):d(_r("cancel"))}read(n){if(!nt(this))return d(_r("read"));if(!ArrayBuffer.isView(n))return d(new TypeError("view must be an array buffer view"));if(n.byteLength===0)return d(new TypeError("view must have non-zero byteLength"));if(n.buffer.byteLength===0)return d(new TypeError("view's buffer must have non-zero byteLength"));if(mr(n.buffer),this._ownerReadableStream===void 0)return d(U("read from"));let o,l,c=_((y,E)=>{o=y,l=E});return Ji(this,n,{_chunkSteps:y=>o({value:y,done:!1}),_closeSteps:y=>o({value:y,done:!0}),_errorSteps:y=>l(y)}),c}releaseLock(){if(!nt(this))throw _r("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");$(this)}}}Object.defineProperties($t.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty($t.prototype,r.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function nt(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof $t}function Ji(e,n,o){let l=e._ownerReadableStream;l._disturbed=!0,l._state==="errored"?o._errorSteps(l._storedError):Fu(l._readableStreamController,n,o)}function _r(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function Nt(e,n){let{highWaterMark:o}=e;if(o===void 0)return n;if(Oi(o)||o<0)throw new RangeError("Invalid highWaterMark");return o}function Rr(e){let{size:n}=e;return n||(()=>1)}function Er(e,n){De(e,n);let o=e?.highWaterMark,l=e?.size;return{highWaterMark:o===void 0?void 0:Sn(o),size:l===void 0?void 0:xu(l,`${n} has member 'size' that`)}}function xu(e,n){return _e(e,n),o=>Sn(e(o))}function Iu(e,n){De(e,n);let o=e?.abort,l=e?.close,c=e?.start,h=e?.type,y=e?.write;return{abort:o===void 0?void 0:zu(o,e,`${n} has member 'abort' that`),close:l===void 0?void 0:$u(l,e,`${n} has member 'close' that`),start:c===void 0?void 0:Nu(c,e,`${n} has member 'start' that`),write:y===void 0?void 0:ju(y,e,`${n} has member 'write' that`),type:h}}function zu(e,n,o){return _e(e,o),l=>W(e,n,[l])}function $u(e,n,o){return _e(e,o),()=>W(e,n,[])}function Nu(e,n,o){return _e(e,o),l=>M(e,n,[l])}function ju(e,n,o){return _e(e,o),(l,c)=>W(e,n,[l,c])}function Gi(e,n){if(!bt(e))throw new TypeError(`${n} is not a WritableStream.`)}function Mu(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let Uu=typeof AbortController=="function";function Hu(){if(Uu)return new AbortController}class jt{constructor(n={},o={}){n===void 0?n=null:Ei(n,"First parameter");let l=Er(o,"Second parameter"),c=Iu(n,"First parameter");if(Zi(this),c.type!==void 0)throw new RangeError("Invalid type is specified");let y=Rr(l),E=Nt(l,1);ol(this,c,E,y)}get locked(){if(!bt(this))throw Ar("locked");return St(this)}abort(n=void 0){return bt(this)?St(this)?d(new TypeError("Cannot abort a stream that already has a writer")):Tr(this,n):d(Ar("abort"))}close(){return bt(this)?St(this)?d(new TypeError("Cannot close a stream that already has a writer")):Ce(this)?d(new TypeError("Cannot close an already-closing stream")):Xi(this):d(Ar("close"))}getWriter(){if(!bt(this))throw Ar("getWriter");return Ki(this)}}Object.defineProperties(jt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(jt.prototype,r.toStringTag,{value:"WritableStream",configurable:!0});function Ki(e){return new Mt(e)}function Vu(e,n,o,l,c=1,h=()=>1){let y=Object.create(jt.prototype);Zi(y);let E=Object.create(gt.prototype);return oo(y,E,e,n,o,l,c,h),y}function Zi(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new T,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function bt(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof jt}function St(e){return e._writer!==void 0}function Tr(e,n){var o;if(e._state==="closed"||e._state==="errored")return S(void 0);e._writableStreamController._abortReason=n,(o=e._writableStreamController._abortController)===null||o===void 0||o.abort();let l=e._state;if(l==="closed"||l==="errored")return S(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let c=!1;l==="erroring"&&(c=!0,n=void 0);let h=_((y,E)=>{e._pendingAbortRequest={_promise:void 0,_resolve:y,_reject:E,_reason:n,_wasAlreadyErroring:c}});return e._pendingAbortRequest._promise=h,c||Fn(e,n),h}function Xi(e){let n=e._state;if(n==="closed"||n==="errored")return d(new TypeError(`The stream (in ${n} state) is not in the writable state and cannot be closed`));let o=_((c,h)=>{let y={_resolve:c,_reject:h};e._closeRequest=y}),l=e._writer;return l!==void 0&&e._backpressure&&n==="writable"&&zn(l),al(e._writableStreamController),o}function Yu(e){return _((o,l)=>{let c={_resolve:o,_reject:l};e._writeRequests.push(c)})}function kn(e,n){if(e._state==="writable"){Fn(e,n);return}qn(e)}function Fn(e,n){let o=e._writableStreamController;e._state="erroring",e._storedError=n;let l=e._writer;l!==void 0&&to(l,n),!Zu(e)&&o._started&&qn(e)}function qn(e){e._state="errored",e._writableStreamController[_i]();let n=e._storedError;if(e._writeRequests.forEach(c=>{c._reject(n)}),e._writeRequests=new T,e._pendingAbortRequest===void 0){Pr(e);return}let o=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,o._wasAlreadyErroring){o._reject(n),Pr(e);return}let l=e._writableStreamController[mn](o._reason);P(l,()=>{o._resolve(),Pr(e)},c=>{o._reject(c),Pr(e)})}function Qu(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function Ju(e,n){e._inFlightWriteRequest._reject(n),e._inFlightWriteRequest=void 0,kn(e,n)}function Gu(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let o=e._writer;o!==void 0&&lo(o)}function Ku(e,n){e._inFlightCloseRequest._reject(n),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(n),e._pendingAbortRequest=void 0),kn(e,n)}function Ce(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function Zu(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function Xu(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function el(e){e._inFlightWriteRequest=e._writeRequests.shift()}function Pr(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let n=e._writer;n!==void 0&&xn(n,e._storedError)}function Dn(e,n){let o=e._writer;o!==void 0&&n!==e._backpressure&&(n?hl(o):zn(o)),e._backpressure=n}class Mt{constructor(n){if(Oe(n,1,"WritableStreamDefaultWriter"),Gi(n,"First parameter"),St(n))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=n,n._writer=this;let o=n._state;if(o==="writable")!Ce(n)&&n._backpressure?Fr(this):co(this),kr(this);else if(o==="erroring")In(this,n._storedError),kr(this);else if(o==="closed")co(this),fl(this);else{let l=n._storedError;In(this,l),uo(this,l)}}get closed(){return it(this)?this._closedPromise:d(ot("closed"))}get desiredSize(){if(!it(this))throw ot("desiredSize");if(this._ownerWritableStream===void 0)throw Ut("desiredSize");return il(this)}get ready(){return it(this)?this._readyPromise:d(ot("ready"))}abort(n=void 0){return it(this)?this._ownerWritableStream===void 0?d(Ut("abort")):tl(this,n):d(ot("abort"))}close(){if(!it(this))return d(ot("close"));let n=this._ownerWritableStream;return n===void 0?d(Ut("close")):Ce(n)?d(new TypeError("Cannot close an already-closing stream")):eo(this)}releaseLock(){if(!it(this))throw ot("releaseLock");this._ownerWritableStream!==void 0&&ro(this)}write(n=void 0){return it(this)?this._ownerWritableStream===void 0?d(Ut("write to")):no(this,n):d(ot("write"))}}Object.defineProperties(Mt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Mt.prototype,r.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function it(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof Mt}function tl(e,n){let o=e._ownerWritableStream;return Tr(o,n)}function eo(e){let n=e._ownerWritableStream;return Xi(n)}function rl(e){let n=e._ownerWritableStream,o=n._state;return Ce(n)||o==="closed"?S(void 0):o==="errored"?d(n._storedError):eo(e)}function nl(e,n){e._closedPromiseState==="pending"?xn(e,n):dl(e,n)}function to(e,n){e._readyPromiseState==="pending"?fo(e,n):ml(e,n)}function il(e){let n=e._ownerWritableStream,o=n._state;return o==="errored"||o==="erroring"?null:o==="closed"?0:ao(n._writableStreamController)}function ro(e){let n=e._ownerWritableStream,o=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");to(e,o),nl(e,o),n._writer=void 0,e._ownerWritableStream=void 0}function no(e,n){let o=e._ownerWritableStream,l=o._writableStreamController,c=sl(l,n);if(o!==e._ownerWritableStream)return d(Ut("write to"));let h=o._state;if(h==="errored")return d(o._storedError);if(Ce(o)||h==="closed")return d(new TypeError("The stream is closing or closed and cannot be written to"));if(h==="erroring")return d(o._storedError);let y=Yu(o);return ul(l,n,c),y}let io={};class gt{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!On(this))throw Ln("abortReason");return this._abortReason}get signal(){if(!On(this))throw Ln("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(n=void 0){if(!On(this))throw Ln("error");this._controlledWritableStream._state==="writable"&&so(this,n)}[mn](n){let o=this._abortAlgorithm(n);return vr(this),o}[_i](){Me(this)}}Object.defineProperties(gt.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(gt.prototype,r.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function On(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof gt}function oo(e,n,o,l,c,h,y,E){n._controlledWritableStream=e,e._writableStreamController=n,n._queue=void 0,n._queueTotalSize=void 0,Me(n),n._abortReason=void 0,n._abortController=Hu(),n._started=!1,n._strategySizeAlgorithm=E,n._strategyHWM=y,n._writeAlgorithm=l,n._closeAlgorithm=c,n._abortAlgorithm=h;let k=Wn(n);Dn(e,k);let B=o(),x=S(B);P(x,()=>{n._started=!0,Cr(n)},I=>{n._started=!0,kn(e,I)})}function ol(e,n,o,l){let c=Object.create(gt.prototype),h=()=>{},y=()=>S(void 0),E=()=>S(void 0),k=()=>S(void 0);n.start!==void 0&&(h=()=>n.start(c)),n.write!==void 0&&(y=B=>n.write(B,c)),n.close!==void 0&&(E=()=>n.close()),n.abort!==void 0&&(k=B=>n.abort(B)),oo(e,c,h,y,E,k,o,l)}function vr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function al(e){Rn(e,io,0),Cr(e)}function sl(e,n){try{return e._strategySizeAlgorithm(n)}catch(o){return Bn(e,o),1}}function ao(e){return e._strategyHWM-e._queueTotalSize}function ul(e,n,o){try{Rn(e,n,o)}catch(c){Bn(e,c);return}let l=e._controlledWritableStream;if(!Ce(l)&&l._state==="writable"){let c=Wn(e);Dn(l,c)}Cr(e)}function Cr(e){let n=e._controlledWritableStream;if(!e._started||n._inFlightWriteRequest!==void 0)return;if(n._state==="erroring"){qn(n);return}if(e._queue.length===0)return;let l=ku(e);l===io?ll(e):cl(e,l)}function Bn(e,n){e._controlledWritableStream._state==="writable"&&so(e,n)}function ll(e){let n=e._controlledWritableStream;Xu(n),_n(e);let o=e._closeAlgorithm();vr(e),P(o,()=>{Gu(n)},l=>{Ku(n,l)})}function cl(e,n){let o=e._controlledWritableStream;el(o);let l=e._writeAlgorithm(n);P(l,()=>{Qu(o);let c=o._state;if(_n(e),!Ce(o)&&c==="writable"){let h=Wn(e);Dn(o,h)}Cr(e)},c=>{o._state==="writable"&&vr(e),Ju(o,c)})}function Wn(e){return ao(e)<=0}function so(e,n){let o=e._controlledWritableStream;vr(e),Fn(o,n)}function Ar(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Ln(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function ot(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function Ut(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function kr(e){e._closedPromise=_((n,o)=>{e._closedPromise_resolve=n,e._closedPromise_reject=o,e._closedPromiseState="pending"})}function uo(e,n){kr(e),xn(e,n)}function fl(e){kr(e),lo(e)}function xn(e,n){e._closedPromise_reject!==void 0&&(J(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function dl(e,n){uo(e,n)}function lo(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function Fr(e){e._readyPromise=_((n,o)=>{e._readyPromise_resolve=n,e._readyPromise_reject=o}),e._readyPromiseState="pending"}function In(e,n){Fr(e),fo(e,n)}function co(e){Fr(e),zn(e)}function fo(e,n){e._readyPromise_reject!==void 0&&(J(e._readyPromise),e._readyPromise_reject(n),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function hl(e){Fr(e)}function ml(e,n){In(e,n)}function zn(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let ho=typeof DOMException<"u"?DOMException:void 0;function pl(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function yl(){let e=function(o,l){this.message=o||"",this.name=l||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let bl=pl(ho)?ho:yl();function mo(e,n,o,l,c,h){let y=pt(e),E=Ki(n);e._disturbed=!0;let k=!1,B=S(void 0);return _((x,I)=>{let G;if(h!==void 0){if(G=()=>{let v=new bl("Aborted","AbortError"),D=[];l||D.push(()=>n._state==="writable"?Tr(n,v):S(void 0)),c||D.push(()=>e._state==="readable"?Ee(e,v):S(void 0)),ce(()=>Promise.all(D.map(N=>N())),!0,v)},h.aborted){G();return}h.addEventListener("abort",G)}function Te(){return _((v,D)=>{function N(he){he?v():m(Rt(),N,D)}N(!1)})}function Rt(){return k?S(!0):m(E._readyPromise,()=>_((v,D)=>{Wt(y,{_chunkSteps:N=>{B=m(no(E,N),void 0,i),v(!1)},_closeSteps:()=>v(!0),_errorSteps:D})}))}if(Be(e,y._closedPromise,v=>{l?Se(!0,v):ce(()=>Tr(n,v),!0,v)}),Be(n,E._closedPromise,v=>{c?Se(!0,v):ce(()=>Ee(e,v),!0,v)}),ie(e,y._closedPromise,()=>{o?Se():ce(()=>rl(E))}),Ce(n)||n._state==="closed"){let v=new TypeError("the destination writable stream closed before all data could be piped to it");c?Se(!0,v):ce(()=>Ee(e,v),!0,v)}J(Te());function Qe(){let v=B;return m(B,()=>v!==B?Qe():void 0)}function Be(v,D,N){v._state==="errored"?N(v._storedError):C(D,N)}function ie(v,D,N){v._state==="closed"?N():R(D,N)}function ce(v,D,N){if(k)return;k=!0,n._state==="writable"&&!Ce(n)?R(Qe(),he):he();function he(){P(v(),()=>We(D,N),Et=>We(!0,Et))}}function Se(v,D){k||(k=!0,n._state==="writable"&&!Ce(n)?R(Qe(),()=>We(v,D)):We(v,D))}function We(v,D){ro(E),$(y),h!==void 0&&h.removeEventListener("abort",G),v?I(D):x(void 0)}})}class wt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!qr(this))throw Br("desiredSize");return $n(this)}close(){if(!qr(this))throw Br("close");if(!_t(this))throw new TypeError("The stream is not in a state that permits close");Vt(this)}enqueue(n=void 0){if(!qr(this))throw Br("enqueue");if(!_t(this))throw new TypeError("The stream is not in a state that permits enqueue");return Or(this,n)}error(n=void 0){if(!qr(this))throw Br("error");Ue(this,n)}[pn](n){Me(this);let o=this._cancelAlgorithm(n);return Dr(this),o}[yn](n){let o=this._controlledReadableStream;if(this._queue.length>0){let l=_n(this);this._closeRequested&&this._queue.length===0?(Dr(this),Yt(o)):Ht(this),n._chunkSteps(l)}else vi(o,n),Ht(this)}}Object.defineProperties(wt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(wt.prototype,r.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function qr(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof wt}function Ht(e){if(!po(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let o=e._pullAlgorithm();P(o,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Ht(e))},l=>{Ue(e,l)})}function po(e){let n=e._controlledReadableStream;return!_t(e)||!e._started?!1:!!(Ye(n)&&dr(n)>0||$n(e)>0)}function Dr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Vt(e){if(!_t(e))return;let n=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(Dr(e),Yt(n))}function Or(e,n){if(!_t(e))return;let o=e._controlledReadableStream;if(Ye(o)&&dr(o)>0)wn(o,n,!1);else{let l;try{l=e._strategySizeAlgorithm(n)}catch(c){throw Ue(e,c),c}try{Rn(e,n,l)}catch(c){throw Ue(e,c),c}}Ht(e)}function Ue(e,n){let o=e._controlledReadableStream;o._state==="readable"&&(Me(e),Dr(e),go(o,n))}function $n(e){let n=e._controlledReadableStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function Sl(e){return!po(e)}function _t(e){let n=e._controlledReadableStream._state;return!e._closeRequested&&n==="readable"}function yo(e,n,o,l,c,h,y){n._controlledReadableStream=e,n._queue=void 0,n._queueTotalSize=void 0,Me(n),n._started=!1,n._closeRequested=!1,n._pullAgain=!1,n._pulling=!1,n._strategySizeAlgorithm=y,n._strategyHWM=h,n._pullAlgorithm=l,n._cancelAlgorithm=c,e._readableStreamController=n;let E=o();P(S(E),()=>{n._started=!0,Ht(n)},k=>{Ue(n,k)})}function gl(e,n,o,l){let c=Object.create(wt.prototype),h=()=>{},y=()=>S(void 0),E=()=>S(void 0);n.start!==void 0&&(h=()=>n.start(c)),n.pull!==void 0&&(y=()=>n.pull(c)),n.cancel!==void 0&&(E=k=>n.cancel(k)),yo(e,c,h,y,E,o,l)}function Br(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function wl(e,n){return tt(e._readableStreamController)?Rl(e):_l(e)}function _l(e,n){let o=pt(e),l=!1,c=!1,h=!1,y=!1,E,k,B,x,I,G=_(ie=>{I=ie});function Te(){return l?(c=!0,S(void 0)):(l=!0,Wt(o,{_chunkSteps:ce=>{F(()=>{c=!1;let Se=ce,We=ce;h||Or(B._readableStreamController,Se),y||Or(x._readableStreamController,We),l=!1,c&&Te()})},_closeSteps:()=>{l=!1,h||Vt(B._readableStreamController),y||Vt(x._readableStreamController),(!h||!y)&&I(void 0)},_errorSteps:()=>{l=!1}}),S(void 0))}function Rt(ie){if(h=!0,E=ie,y){let ce=Lt([E,k]),Se=Ee(e,ce);I(Se)}return G}function Qe(ie){if(y=!0,k=ie,h){let ce=Lt([E,k]),Se=Ee(e,ce);I(Se)}return G}function Be(){}return B=Nn(Be,Te,Rt),x=Nn(Be,Te,Qe),C(o._closedPromise,ie=>{Ue(B._readableStreamController,ie),Ue(x._readableStreamController,ie),(!h||!y)&&I(void 0)}),[B,x]}function Rl(e){let n=pt(e),o=!1,l=!1,c=!1,h=!1,y=!1,E,k,B,x,I,G=_(v=>{I=v});function Te(v){C(v._closedPromise,D=>{v===n&&(Re(B._readableStreamController,D),Re(x._readableStreamController,D),(!h||!y)&&I(void 0))})}function Rt(){nt(n)&&($(n),n=pt(e),Te(n)),Wt(n,{_chunkSteps:D=>{F(()=>{l=!1,c=!1;let N=D,he=D;if(!h&&!y)try{he=Li(D)}catch(Et){Re(B._readableStreamController,Et),Re(x._readableStreamController,Et),I(Ee(e,Et));return}h||Sr(B._readableStreamController,N),y||Sr(x._readableStreamController,he),o=!1,l?Be():c&&ie()})},_closeSteps:()=>{o=!1,h||It(B._readableStreamController),y||It(x._readableStreamController),B._readableStreamController._pendingPullIntos.length>0&&gr(B._readableStreamController,0),x._readableStreamController._pendingPullIntos.length>0&&gr(x._readableStreamController,0),(!h||!y)&&I(void 0)},_errorSteps:()=>{o=!1}})}function Qe(v,D){je(n)&&($(n),n=Vi(e),Te(n));let N=D?x:B,he=D?B:x;Ji(n,v,{_chunkSteps:Tt=>{F(()=>{l=!1,c=!1;let Pt=D?y:h;if(D?h:y)Pt||wr(N._readableStreamController,Tt);else{let Do;try{Do=Li(Tt)}catch(Mn){Re(N._readableStreamController,Mn),Re(he._readableStreamController,Mn),I(Ee(e,Mn));return}Pt||wr(N._readableStreamController,Tt),Sr(he._readableStreamController,Do)}o=!1,l?Be():c&&ie()})},_closeSteps:Tt=>{o=!1;let Pt=D?y:h,Mr=D?h:y;Pt||It(N._readableStreamController),Mr||It(he._readableStreamController),Tt!==void 0&&(Pt||wr(N._readableStreamController,Tt),!Mr&&he._readableStreamController._pendingPullIntos.length>0&&gr(he._readableStreamController,0)),(!Pt||!Mr)&&I(void 0)},_errorSteps:()=>{o=!1}})}function Be(){if(o)return l=!0,S(void 0);o=!0;let v=vn(B._readableStreamController);return v===null?Rt():Qe(v._view,!1),S(void 0)}function ie(){if(o)return c=!0,S(void 0);o=!0;let v=vn(x._readableStreamController);return v===null?Rt():Qe(v._view,!0),S(void 0)}function ce(v){if(h=!0,E=v,y){let D=Lt([E,k]),N=Ee(e,D);I(N)}return G}function Se(v){if(y=!0,k=v,h){let D=Lt([E,k]),N=Ee(e,D);I(N)}return G}function We(){}return B=So(We,Be,ce),x=So(We,ie,Se),Te(n),[B,x]}function El(e,n){De(e,n);let o=e,l=o?.autoAllocateChunkSize,c=o?.cancel,h=o?.pull,y=o?.start,E=o?.type;return{autoAllocateChunkSize:l===void 0?void 0:Pi(l,`${n} has member 'autoAllocateChunkSize' that`),cancel:c===void 0?void 0:Tl(c,o,`${n} has member 'cancel' that`),pull:h===void 0?void 0:Pl(h,o,`${n} has member 'pull' that`),start:y===void 0?void 0:vl(y,o,`${n} has member 'start' that`),type:E===void 0?void 0:Cl(E,`${n} has member 'type' that`)}}function Tl(e,n,o){return _e(e,o),l=>W(e,n,[l])}function Pl(e,n,o){return _e(e,o),l=>W(e,n,[l])}function vl(e,n,o){return _e(e,o),l=>M(e,n,[l])}function Cl(e,n){if(e=`${e}`,e!=="bytes")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function Al(e,n){De(e,n);let o=e?.mode;return{mode:o===void 0?void 0:kl(o,`${n} has member 'mode' that`)}}function kl(e,n){if(e=`${e}`,e!=="byob")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function Fl(e,n){return De(e,n),{preventCancel:!!e?.preventCancel}}function bo(e,n){De(e,n);let o=e?.preventAbort,l=e?.preventCancel,c=e?.preventClose,h=e?.signal;return h!==void 0&&ql(h,`${n} has member 'signal' that`),{preventAbort:!!o,preventCancel:!!l,preventClose:!!c,signal:h}}function ql(e,n){if(!Mu(e))throw new TypeError(`${n} is not an AbortSignal.`)}function Dl(e,n){De(e,n);let o=e?.readable;bn(o,"readable","ReadableWritablePair"),gn(o,`${n} has member 'readable' that`);let l=e?.writable;return bn(l,"writable","ReadableWritablePair"),Gi(l,`${n} has member 'writable' that`),{readable:o,writable:l}}class He{constructor(n={},o={}){n===void 0?n=null:Ei(n,"First parameter");let l=Er(o,"Second parameter"),c=El(n,"First parameter");if(jn(this),c.type==="bytes"){if(l.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let h=Nt(l,0);Bu(this,c,h)}else{let h=Rr(l),y=Nt(l,1);gl(this,c,y,h)}}get locked(){if(!Ve(this))throw at("locked");return Ye(this)}cancel(n=void 0){return Ve(this)?Ye(this)?d(new TypeError("Cannot cancel a stream that already has a reader")):Ee(this,n):d(at("cancel"))}getReader(n=void 0){if(!Ve(this))throw at("getReader");return Al(n,"First parameter").mode===void 0?pt(this):Vi(this)}pipeThrough(n,o={}){if(!Ve(this))throw at("pipeThrough");Oe(n,1,"pipeThrough");let l=Dl(n,"First parameter"),c=bo(o,"Second parameter");if(Ye(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(St(l.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let h=mo(this,l.writable,c.preventClose,c.preventAbort,c.preventCancel,c.signal);return J(h),l.readable}pipeTo(n,o={}){if(!Ve(this))return d(at("pipeTo"));if(n===void 0)return d("Parameter 1 is required in 'pipeTo'.");if(!bt(n))return d(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let l;try{l=bo(o,"Second parameter")}catch(c){return d(c)}return Ye(this)?d(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):St(n)?d(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):mo(this,n,l.preventClose,l.preventAbort,l.preventCancel,l.signal)}tee(){if(!Ve(this))throw at("tee");let n=wl(this);return Lt(n)}values(n=void 0){if(!Ve(this))throw at("values");let o=Fl(n,"First parameter");return Cu(this,o.preventCancel)}}Object.defineProperties(He.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(He.prototype,r.toStringTag,{value:"ReadableStream",configurable:!0}),typeof r.asyncIterator=="symbol"&&Object.defineProperty(He.prototype,r.asyncIterator,{value:He.prototype.values,writable:!0,configurable:!0});function Nn(e,n,o,l=1,c=()=>1){let h=Object.create(He.prototype);jn(h);let y=Object.create(wt.prototype);return yo(h,y,e,n,o,l,c),h}function So(e,n,o){let l=Object.create(He.prototype);jn(l);let c=Object.create(yt.prototype);return Hi(l,c,e,n,o,0,void 0),l}function jn(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Ve(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof He}function Ye(e){return e._reader!==void 0}function Ee(e,n){if(e._disturbed=!0,e._state==="closed")return S(void 0);if(e._state==="errored")return d(e._storedError);Yt(e);let o=e._reader;o!==void 0&&nt(o)&&(o._readIntoRequests.forEach(c=>{c._closeSteps(void 0)}),o._readIntoRequests=new T);let l=e._readableStreamController[pn](n);return A(l,i)}function Yt(e){e._state="closed";let n=e._reader;n!==void 0&&(Y(n),je(n)&&(n._readRequests.forEach(o=>{o._closeSteps()}),n._readRequests=new T))}function go(e,n){e._state="errored",e._storedError=n;let o=e._reader;o!==void 0&&(z(o,n),je(o)?(o._readRequests.forEach(l=>{l._errorSteps(n)}),o._readRequests=new T):(o._readIntoRequests.forEach(l=>{l._errorSteps(n)}),o._readIntoRequests=new T))}function at(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function wo(e,n){De(e,n);let o=e?.highWaterMark;return bn(o,"highWaterMark","QueuingStrategyInit"),{highWaterMark:Sn(o)}}let _o=e=>e.byteLength;Object.defineProperty(_o,"name",{value:"size",configurable:!0});class Wr{constructor(n){Oe(n,1,"ByteLengthQueuingStrategy"),n=wo(n,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!Eo(this))throw Ro("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Eo(this))throw Ro("size");return _o}}Object.defineProperties(Wr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Wr.prototype,r.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function Ro(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Eo(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof Wr}let To=()=>1;Object.defineProperty(To,"name",{value:"size",configurable:!0});class Lr{constructor(n){Oe(n,1,"CountQueuingStrategy"),n=wo(n,"First parameter"),this._countQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!vo(this))throw Po("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!vo(this))throw Po("size");return To}}Object.defineProperties(Lr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Lr.prototype,r.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Po(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function vo(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof Lr}function Ol(e,n){De(e,n);let o=e?.flush,l=e?.readableType,c=e?.start,h=e?.transform,y=e?.writableType;return{flush:o===void 0?void 0:Bl(o,e,`${n} has member 'flush' that`),readableType:l,start:c===void 0?void 0:Wl(c,e,`${n} has member 'start' that`),transform:h===void 0?void 0:Ll(h,e,`${n} has member 'transform' that`),writableType:y}}function Bl(e,n,o){return _e(e,o),l=>W(e,n,[l])}function Wl(e,n,o){return _e(e,o),l=>M(e,n,[l])}function Ll(e,n,o){return _e(e,o),(l,c)=>W(e,n,[l,c])}class xr{constructor(n={},o={},l={}){n===void 0&&(n=null);let c=Er(o,"Second parameter"),h=Er(l,"Third parameter"),y=Ol(n,"First parameter");if(y.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(y.writableType!==void 0)throw new RangeError("Invalid writableType specified");let E=Nt(h,0),k=Rr(h),B=Nt(c,1),x=Rr(c),I,G=_(Te=>{I=Te});xl(this,G,B,x,E,k),zl(this,y),y.start!==void 0?I(y.start(this._transformStreamController)):I(void 0)}get readable(){if(!Co(this))throw qo("readable");return this._readable}get writable(){if(!Co(this))throw qo("writable");return this._writable}}Object.defineProperties(xr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(xr.prototype,r.toStringTag,{value:"TransformStream",configurable:!0});function xl(e,n,o,l,c,h){function y(){return n}function E(G){return jl(e,G)}function k(G){return Ml(e,G)}function B(){return Ul(e)}e._writable=Vu(y,E,B,k,o,l);function x(){return Hl(e)}function I(G){return zr(e,G),S(void 0)}e._readable=Nn(y,x,I,c,h),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,$r(e,!0),e._transformStreamController=void 0}function Co(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof xr}function Ir(e,n){Ue(e._readable._readableStreamController,n),zr(e,n)}function zr(e,n){Ao(e._transformStreamController),Bn(e._writable._writableStreamController,n),e._backpressure&&$r(e,!1)}function $r(e,n){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=_(o=>{e._backpressureChangePromise_resolve=o}),e._backpressure=n}class Qt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Nr(this))throw jr("desiredSize");let n=this._controlledTransformStream._readable._readableStreamController;return $n(n)}enqueue(n=void 0){if(!Nr(this))throw jr("enqueue");ko(this,n)}error(n=void 0){if(!Nr(this))throw jr("error");$l(this,n)}terminate(){if(!Nr(this))throw jr("terminate");Nl(this)}}Object.defineProperties(Qt.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Qt.prototype,r.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Nr(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof Qt}function Il(e,n,o,l){n._controlledTransformStream=e,e._transformStreamController=n,n._transformAlgorithm=o,n._flushAlgorithm=l}function zl(e,n){let o=Object.create(Qt.prototype),l=h=>{try{return ko(o,h),S(void 0)}catch(y){return d(y)}},c=()=>S(void 0);n.transform!==void 0&&(l=h=>n.transform(h,o)),n.flush!==void 0&&(c=()=>n.flush(o)),Il(e,o,l,c)}function Ao(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function ko(e,n){let o=e._controlledTransformStream,l=o._readable._readableStreamController;if(!_t(l))throw new TypeError("Readable side is not in a state that permits enqueue");try{Or(l,n)}catch(h){throw zr(o,h),o._readable._storedError}Sl(l)!==o._backpressure&&$r(o,!0)}function $l(e,n){Ir(e._controlledTransformStream,n)}function Fo(e,n){let o=e._transformAlgorithm(n);return A(o,void 0,l=>{throw Ir(e._controlledTransformStream,l),l})}function Nl(e){let n=e._controlledTransformStream,o=n._readable._readableStreamController;Vt(o);let l=new TypeError("TransformStream terminated");zr(n,l)}function jl(e,n){let o=e._transformStreamController;if(e._backpressure){let l=e._backpressureChangePromise;return A(l,()=>{let c=e._writable;if(c._state==="erroring")throw c._storedError;return Fo(o,n)})}return Fo(o,n)}function Ml(e,n){return Ir(e,n),S(void 0)}function Ul(e){let n=e._readable,o=e._transformStreamController,l=o._flushAlgorithm();return Ao(o),A(l,()=>{if(n._state==="errored")throw n._storedError;Vt(n._readableStreamController)},c=>{throw Ir(e,c),n._storedError})}function Hl(e){return $r(e,!1),e._backpressureChangePromise}function jr(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function qo(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}t.ByteLengthQueuingStrategy=Wr,t.CountQueuingStrategy=Lr,t.ReadableByteStreamController=yt,t.ReadableStream=He,t.ReadableStreamBYOBReader=$t,t.ReadableStreamBYOBRequest=xt,t.ReadableStreamDefaultController=wt,t.ReadableStreamDefaultReader=Bt,t.TransformStream=xr,t.TransformStreamDefaultController=Qt,t.WritableStream=jt,t.WritableStreamDefaultController=gt,t.WritableStreamDefaultWriter=Mt,Object.defineProperty(t,"__esModule",{value:!0})})});var Io=q(()=>{if(!globalThis.ReadableStream)try{let t=require("node:process"),{emitWarning:r}=t;try{t.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),t.emitWarning=r}catch(i){throw t.emitWarning=r,i}}catch{Object.assign(globalThis,xo())}try{let{Blob:t}=require("buffer");t&&!t.prototype.stream&&(t.prototype.stream=function(i){let a=0,s=this;return new ReadableStream({type:"bytes",async pull(u){let b=await s.slice(a,Math.min(s.size,a+65536)).arrayBuffer();a+=b.byteLength,u.enqueue(new Uint8Array(b)),a===s.size&&u.close()}})})}catch{}});async function*Un(t,r=!0){for(let i of t)if("stream"in i)yield*i.stream();else if(ArrayBuffer.isView(i))if(r){let a=i.byteOffset,s=i.byteOffset+i.byteLength;for(;a!==s;){let u=Math.min(s-a,zo),f=i.buffer.slice(a,a+u);a+=f.byteLength,yield new Uint8Array(f)}}else yield i;else{let a=0,s=i;for(;a!==s.size;){let f=await s.slice(a,Math.min(s.size,a+zo)).arrayBuffer();a+=f.byteLength,yield new Uint8Array(f)}}}var Dd,zo,$o,Xl,Le,Gt=Jt(()=>{Dd=Ae(Io(),1);zo=65536;$o=class Hn{#e=[];#t="";#r=0;#n="transparent";constructor(r=[],i={}){if(typeof r!="object"||r===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof r[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof i!="object"&&typeof i!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");i===null&&(i={});let a=new TextEncoder;for(let u of r){let f;ArrayBuffer.isView(u)?f=new Uint8Array(u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength)):u instanceof ArrayBuffer?f=new Uint8Array(u.slice(0)):u instanceof Hn?f=u:f=a.encode(`${u}`);let b=ArrayBuffer.isView(f)?f.byteLength:f.size;b&&(this.#r+=b,this.#e.push(f))}this.#n=`${i.endings===void 0?"transparent":i.endings}`;let s=i.type===void 0?"":String(i.type);this.#t=/^[\x20-\x7E]*$/.test(s)?s:""}get size(){return this.#r}get type(){return this.#t}async text(){let r=new TextDecoder,i="";for await(let a of Un(this.#e,!1))i+=r.decode(a,{stream:!0});return i+=r.decode(),i}async arrayBuffer(){let r=new Uint8Array(this.size),i=0;for await(let a of Un(this.#e,!1))r.set(a,i),i+=a.length;return r.buffer}stream(){let r=Un(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(i){let a=await r.next();a.done?i.close():i.enqueue(a.value)},async cancel(){await r.return()}})}slice(r=0,i=this.size,a=""){let{size:s}=this,u=r<0?Math.max(s+r,0):Math.min(r,s),f=i<0?Math.max(s+i,0):Math.min(i,s),b=Math.max(f-u,0),g=this.#e,w=[],p=0;for(let S of g){if(p>=b)break;let d=ArrayBuffer.isView(S)?S.byteLength:S.size;if(u&&d<=u)u-=d,f-=d;else{let m;ArrayBuffer.isView(S)?(m=S.subarray(u,Math.min(d,f)),p+=m.byteLength):(m=S.slice(u,Math.min(d,f)),p+=m.size),f-=d,w.push(m),u=0}}let _=new Hn([],{type:String(a).toLowerCase()});return _.#r=b,_.#e=w,_}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](r){return r&&typeof r=="object"&&typeof r.constructor=="function"&&(typeof r.stream=="function"||typeof r.arrayBuffer=="function")&&/^(Blob|File)$/.test(r[Symbol.toStringTag])}};Object.defineProperties($o.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Xl=$o,Le=Xl});var ec,tc,vt,Vn=Jt(()=>{Gt();ec=class extends Le{#e=0;#t="";constructor(r,i,a={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(r,a),a===null&&(a={});let s=a.lastModified===void 0?Date.now():Number(a.lastModified);Number.isNaN(s)||(this.#e=s),this.#t=String(i)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](r){return!!r&&r instanceof Le&&/^(File)$/.test(r[Symbol.toStringTag])}},tc=ec,vt=tc});function Mo(t,r=Le){var i=`${No()}${No()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),a=[],s=`--${i}\r
Content-Disposition: form-data; name="`;return t.forEach((u,f)=>typeof u=="string"?a.push(s+Yn(f)+`"\r
\r
${u.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):a.push(s+Yn(f)+`"; filename="${Yn(u.name,1)}"\r
Content-Type: ${u.type||"application/octet-stream"}\r
\r
`,u,`\r
`)),a.push(`--${i}--`),new r(a,{type:"multipart/form-data; boundary="+i})}var Kt,rc,nc,No,ic,jo,Yn,st,ut,Vr=Jt(()=>{Gt();Vn();({toStringTag:Kt,iterator:rc,hasInstance:nc}=Symbol),No=Math.random,ic="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),jo=(t,r,i)=>(t+="",/^(Blob|File)$/.test(r&&r[Kt])?[(i=i!==void 0?i+"":r[Kt]=="File"?r.name:"blob",t),r.name!==i||r[Kt]=="blob"?new vt([r],i,r):r]:[t,r+""]),Yn=(t,r)=>(r?t:t.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),st=(t,r,i)=>{if(r.length<i)throw new TypeError(`Failed to execute '${t}' on 'FormData': ${i} arguments required, but only ${r.length} present.`)},ut=class{#e=[];constructor(...r){if(r.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[Kt](){return"FormData"}[rc](){return this.entries()}static[nc](r){return r&&typeof r=="object"&&r[Kt]==="FormData"&&!ic.some(i=>typeof r[i]!="function")}append(...r){st("append",arguments,2),this.#e.push(jo(...r))}delete(r){st("delete",arguments,1),r+="",this.#e=this.#e.filter(([i])=>i!==r)}get(r){st("get",arguments,1),r+="";for(var i=this.#e,a=i.length,s=0;s<a;s++)if(i[s][0]===r)return i[s][1];return null}getAll(r,i){return st("getAll",arguments,1),i=[],r+="",this.#e.forEach(a=>a[0]===r&&i.push(a[1])),i}has(r){return st("has",arguments,1),r+="",this.#e.some(i=>i[0]===r)}forEach(r,i){st("forEach",arguments,1);for(var[a,s]of this)r.call(i,s,a,this)}set(...r){st("set",arguments,2);var i=[],a=!0;r=jo(...r),this.#e.forEach(s=>{s[0]===r[0]?a&&(a=!i.push(r)):i.push(s)}),a&&i.push(r),this.#e=i}*entries(){yield*this.#e}*keys(){for(var[r]of this)yield r}*values(){for(var[,r]of this)yield r}}});var Qo=q((Hd,Yo)=>{if(!globalThis.DOMException)try{let{MessageChannel:t}=require("worker_threads"),r=new t().port1,i=new ArrayBuffer;r.postMessage(i,[i,i])}catch(t){t.constructor.name==="DOMException"&&(globalThis.DOMException=t.constructor)}Yo.exports=globalThis.DOMException});var Qr,oc,Qd,Jn=Jt(()=>{Qr=require("node:fs"),oc=Ae(Qo(),1);Vn();Gt();({stat:Qd}=Qr.promises)});var Go={};Oo(Go,{toFormData:()=>dc});function fc(t){let r=t.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!r)return;let i=r[2]||r[3]||"",a=i.slice(i.lastIndexOf("\\")+1);return a=a.replace(/%22/g,'"'),a=a.replace(/&#(\d{4});/g,(s,u)=>String.fromCharCode(u)),a}async function dc(t,r){if(!/multipart/i.test(r))throw new TypeError("Failed to fetch");let i=r.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!i)throw new TypeError("no or bad content-type header, no multipart boundary");let a=new Gn(i[1]||i[2]),s,u,f,b,g,w,p=[],_=new ut,S=C=>{f+=R.decode(C,{stream:!0})},d=C=>{p.push(C)},m=()=>{let C=new vt(p,w,{type:g});_.append(b,C)},P=()=>{_.append(b,f)},R=new TextDecoder("utf-8");R.decode(),a.onPartBegin=function(){a.onPartData=S,a.onPartEnd=P,s="",u="",f="",b="",g="",w=null,p.length=0},a.onHeaderField=function(C){s+=R.decode(C,{stream:!0})},a.onHeaderValue=function(C){u+=R.decode(C,{stream:!0})},a.onHeaderEnd=function(){if(u+=R.decode(),s=s.toLowerCase(),s==="content-disposition"){let C=u.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);C&&(b=C[2]||C[3]||""),w=fc(u),w&&(a.onPartData=d,a.onPartEnd=m)}else s==="content-type"&&(g=u);u="",s=""};for await(let C of t)a.write(C);return a.end(),_}var ke,j,Jo,Je,Jr,Gr,ac,Xt,sc,uc,lc,cc,lt,Gn,Ko=Jt(()=>{Jn();Vr();ke=0,j={START_BOUNDARY:ke++,HEADER_FIELD_START:ke++,HEADER_FIELD:ke++,HEADER_VALUE_START:ke++,HEADER_VALUE:ke++,HEADER_VALUE_ALMOST_DONE:ke++,HEADERS_ALMOST_DONE:ke++,PART_DATA_START:ke++,PART_DATA:ke++,END:ke++},Jo=1,Je={PART_BOUNDARY:Jo,LAST_BOUNDARY:Jo*=2},Jr=10,Gr=13,ac=32,Xt=45,sc=58,uc=97,lc=122,cc=t=>t|32,lt=()=>{},Gn=class{constructor(r){this.index=0,this.flags=0,this.onHeaderEnd=lt,this.onHeaderField=lt,this.onHeadersEnd=lt,this.onHeaderValue=lt,this.onPartBegin=lt,this.onPartData=lt,this.onPartEnd=lt,this.boundaryChars={},r=`\r
--`+r;let i=new Uint8Array(r.length);for(let a=0;a<r.length;a++)i[a]=r.charCodeAt(a),this.boundaryChars[i[a]]=!0;this.boundary=i,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=j.START_BOUNDARY}write(r){let i=0,a=r.length,s=this.index,{lookbehind:u,boundary:f,boundaryChars:b,index:g,state:w,flags:p}=this,_=this.boundary.length,S=_-1,d=r.length,m,P,R=F=>{this[F+"Mark"]=i},C=F=>{delete this[F+"Mark"]},A=(F,M,W,be)=>{(M===void 0||M!==W)&&this[F](be&&be.subarray(M,W))},J=(F,M)=>{let W=F+"Mark";W in this&&(M?(A(F,this[W],i,r),delete this[W]):(A(F,this[W],r.length,r),this[W]=0))};for(i=0;i<a;i++)switch(m=r[i],w){case j.START_BOUNDARY:if(g===f.length-2){if(m===Xt)p|=Je.LAST_BOUNDARY;else if(m!==Gr)return;g++;break}else if(g-1===f.length-2){if(p&Je.LAST_BOUNDARY&&m===Xt)w=j.END,p=0;else if(!(p&Je.LAST_BOUNDARY)&&m===Jr)g=0,A("onPartBegin"),w=j.HEADER_FIELD_START;else return;break}m!==f[g+2]&&(g=-2),m===f[g+2]&&g++;break;case j.HEADER_FIELD_START:w=j.HEADER_FIELD,R("onHeaderField"),g=0;case j.HEADER_FIELD:if(m===Gr){C("onHeaderField"),w=j.HEADERS_ALMOST_DONE;break}if(g++,m===Xt)break;if(m===sc){if(g===1)return;J("onHeaderField",!0),w=j.HEADER_VALUE_START;break}if(P=cc(m),P<uc||P>lc)return;break;case j.HEADER_VALUE_START:if(m===ac)break;R("onHeaderValue"),w=j.HEADER_VALUE;case j.HEADER_VALUE:m===Gr&&(J("onHeaderValue",!0),A("onHeaderEnd"),w=j.HEADER_VALUE_ALMOST_DONE);break;case j.HEADER_VALUE_ALMOST_DONE:if(m!==Jr)return;w=j.HEADER_FIELD_START;break;case j.HEADERS_ALMOST_DONE:if(m!==Jr)return;A("onHeadersEnd"),w=j.PART_DATA_START;break;case j.PART_DATA_START:w=j.PART_DATA,R("onPartData");case j.PART_DATA:if(s=g,g===0){for(i+=S;i<d&&!(r[i]in b);)i+=_;i-=S,m=r[i]}if(g<f.length)f[g]===m?(g===0&&J("onPartData",!0),g++):g=0;else if(g===f.length)g++,m===Gr?p|=Je.PART_BOUNDARY:m===Xt?p|=Je.LAST_BOUNDARY:g=0;else if(g-1===f.length)if(p&Je.PART_BOUNDARY){if(g=0,m===Jr){p&=~Je.PART_BOUNDARY,A("onPartEnd"),A("onPartBegin"),w=j.HEADER_FIELD_START;break}}else p&Je.LAST_BOUNDARY&&m===Xt?(A("onPartEnd"),w=j.END,p=0):g=0;if(g>0)u[g-1]=m;else if(s>0){let F=new Uint8Array(u.buffer,u.byteOffset,u.byteLength);A("onPartData",0,s,F),s=0,R("onPartData"),i--}break;case j.END:break;default:throw new Error(`Unexpected state entered: ${w}`)}J("onHeaderField"),J("onHeaderValue"),J("onPartData"),this.index=g,this.state=w,this.flags=p}end(){if(this.state===j.HEADER_FIELD_START&&this.index===0||this.state===j.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==j.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var X=q(ti=>{"use strict";ti.fromCallback=function(t){return Object.defineProperty(function(...r){if(typeof r[r.length-1]=="function")t.apply(this,r);else return new Promise((i,a)=>{t.call(this,...r,(s,u)=>s!=null?a(s):i(u))})},"name",{value:t.name})};ti.fromPromise=function(t){return Object.defineProperty(function(...r){let i=r[r.length-1];if(typeof i!="function")return t.apply(this,r);t.apply(this,r.slice(0,-1)).then(a=>i(null,a),i)},"name",{value:t.name})}});var pa=q((zh,ma)=>{var Ke=require("constants"),wc=process.cwd,tn=null,_c=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return tn||(tn=wc.call(process)),tn};try{process.cwd()}catch{}typeof process.chdir=="function"&&(ri=process.chdir,process.chdir=function(t){tn=null,ri.call(process,t)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,ri));var ri;ma.exports=Rc;function Rc(t){Ke.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&r(t),t.lutimes||i(t),t.chown=u(t.chown),t.fchown=u(t.fchown),t.lchown=u(t.lchown),t.chmod=a(t.chmod),t.fchmod=a(t.fchmod),t.lchmod=a(t.lchmod),t.chownSync=f(t.chownSync),t.fchownSync=f(t.fchownSync),t.lchownSync=f(t.lchownSync),t.chmodSync=s(t.chmodSync),t.fchmodSync=s(t.fchmodSync),t.lchmodSync=s(t.lchmodSync),t.stat=b(t.stat),t.fstat=b(t.fstat),t.lstat=b(t.lstat),t.statSync=g(t.statSync),t.fstatSync=g(t.fstatSync),t.lstatSync=g(t.lstatSync),t.lchmod||(t.lchmod=function(p,_,S){S&&process.nextTick(S)},t.lchmodSync=function(){}),t.lchown||(t.lchown=function(p,_,S,d){d&&process.nextTick(d)},t.lchownSync=function(){}),_c==="win32"&&(t.rename=function(p){return function(_,S,d){var m=Date.now(),P=0;p(_,S,function R(C){if(C&&(C.code==="EACCES"||C.code==="EPERM")&&Date.now()-m<6e4){setTimeout(function(){t.stat(S,function(A,J){A&&A.code==="ENOENT"?p(_,S,R):d(C)})},P),P<100&&(P+=10);return}d&&d(C)})}}(t.rename)),t.read=function(p){function _(S,d,m,P,R,C){var A;if(C&&typeof C=="function"){var J=0;A=function(F,M,W){if(F&&F.code==="EAGAIN"&&J<10)return J++,p.call(t,S,d,m,P,R,A);C.apply(this,arguments)}}return p.call(t,S,d,m,P,R,A)}return Object.setPrototypeOf&&Object.setPrototypeOf(_,p),_}(t.read),t.readSync=function(p){return function(_,S,d,m,P){for(var R=0;;)try{return p.call(t,_,S,d,m,P)}catch(C){if(C.code==="EAGAIN"&&R<10){R++;continue}throw C}}}(t.readSync);function r(p){p.lchmod=function(_,S,d){p.open(_,Ke.O_WRONLY|Ke.O_SYMLINK,S,function(m,P){if(m){d&&d(m);return}p.fchmod(P,S,function(R){p.close(P,function(C){d&&d(R||C)})})})},p.lchmodSync=function(_,S){var d=p.openSync(_,Ke.O_WRONLY|Ke.O_SYMLINK,S),m=!0,P;try{P=p.fchmodSync(d,S),m=!1}finally{if(m)try{p.closeSync(d)}catch{}else p.closeSync(d)}return P}}function i(p){Ke.hasOwnProperty("O_SYMLINK")?(p.lutimes=function(_,S,d,m){p.open(_,Ke.O_SYMLINK,function(P,R){if(P){m&&m(P);return}p.futimes(R,S,d,function(C){p.close(R,function(A){m&&m(C||A)})})})},p.lutimesSync=function(_,S,d){var m=p.openSync(_,Ke.O_SYMLINK),P,R=!0;try{P=p.futimesSync(m,S,d),R=!1}finally{if(R)try{p.closeSync(m)}catch{}else p.closeSync(m)}return P}):(p.lutimes=function(_,S,d,m){m&&process.nextTick(m)},p.lutimesSync=function(){})}function a(p){return p&&function(_,S,d){return p.call(t,_,S,function(m){w(m)&&(m=null),d&&d.apply(this,arguments)})}}function s(p){return p&&function(_,S){try{return p.call(t,_,S)}catch(d){if(!w(d))throw d}}}function u(p){return p&&function(_,S,d,m){return p.call(t,_,S,d,function(P){w(P)&&(P=null),m&&m.apply(this,arguments)})}}function f(p){return p&&function(_,S,d){try{return p.call(t,_,S,d)}catch(m){if(!w(m))throw m}}}function b(p){return p&&function(_,S,d){typeof S=="function"&&(d=S,S=null);function m(P,R){R&&(R.uid<0&&(R.uid+=4294967296),R.gid<0&&(R.gid+=4294967296)),d&&d.apply(this,arguments)}return S?p.call(t,_,S,m):p.call(t,_,m)}}function g(p){return p&&function(_,S){var d=S?p.call(t,_,S):p.call(t,_);return d&&(d.uid<0&&(d.uid+=4294967296),d.gid<0&&(d.gid+=4294967296)),d}}function w(p){if(!p||p.code==="ENOSYS")return!0;var _=!process.getuid||process.getuid()!==0;return!!(_&&(p.code==="EINVAL"||p.code==="EPERM"))}}});var Sa=q(($h,ba)=>{var ya=require("stream").Stream;ba.exports=Ec;function Ec(t){return{ReadStream:r,WriteStream:i};function r(a,s){if(!(this instanceof r))return new r(a,s);ya.call(this);var u=this;this.path=a,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,s=s||{};for(var f=Object.keys(s),b=0,g=f.length;b<g;b++){var w=f[b];this[w]=s[w]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){u._read()});return}t.open(this.path,this.flags,this.mode,function(p,_){if(p){u.emit("error",p),u.readable=!1;return}u.fd=_,u.emit("open",_),u._read()})}function i(a,s){if(!(this instanceof i))return new i(a,s);ya.call(this),this.path=a,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,s=s||{};for(var u=Object.keys(s),f=0,b=u.length;f<b;f++){var g=u[f];this[g]=s[g]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var wa=q((Nh,ga)=>{"use strict";ga.exports=Pc;var Tc=Object.getPrototypeOf||function(t){return t.__proto__};function Pc(t){if(t===null||typeof t!="object")return t;if(t instanceof Object)var r={__proto__:Tc(t)};else var r=Object.create(null);return Object.getOwnPropertyNames(t).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))}),r}});var Ft=q((jh,oi)=>{var H=require("fs"),vc=pa(),Cc=Sa(),Ac=wa(),rn=require("util"),re,on;typeof Symbol=="function"&&typeof Symbol.for=="function"?(re=Symbol.for("graceful-fs.queue"),on=Symbol.for("graceful-fs.previous")):(re="___graceful-fs.queue",on="___graceful-fs.previous");function kc(){}function Ea(t,r){Object.defineProperty(t,re,{get:function(){return r}})}var dt=kc;rn.debuglog?dt=rn.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(dt=function(){var t=rn.format.apply(rn,arguments);t="GFS4: "+t.split(/\n/).join(`
GFS4: `),console.error(t)});H[re]||(_a=global[re]||[],Ea(H,_a),H.close=function(t){function r(i,a){return t.call(H,i,function(s){s||Ra(),typeof a=="function"&&a.apply(this,arguments)})}return Object.defineProperty(r,on,{value:t}),r}(H.close),H.closeSync=function(t){function r(i){t.apply(H,arguments),Ra()}return Object.defineProperty(r,on,{value:t}),r}(H.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){dt(H[re]),require("assert").equal(H[re].length,0)}));var _a;global[re]||Ea(global,H[re]);oi.exports=ni(Ac(H));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!H.__patched&&(oi.exports=ni(H),H.__patched=!0);function ni(t){vc(t),t.gracefulify=ni,t.createReadStream=F,t.createWriteStream=M;var r=t.readFile;t.readFile=i;function i(T,L,O){return typeof L=="function"&&(O=L,L=null),$(T,L,O);function $(U,Q,V,te){return r(U,Q,function(z){z&&(z.code==="EMFILE"||z.code==="ENFILE")?kt([$,[U,Q,V],z,te||Date.now(),Date.now()]):typeof V=="function"&&V.apply(this,arguments)})}}var a=t.writeFile;t.writeFile=s;function s(T,L,O,$){return typeof O=="function"&&($=O,O=null),U(T,L,O,$);function U(Q,V,te,z,le){return a(Q,V,te,function(Y){Y&&(Y.code==="EMFILE"||Y.code==="ENFILE")?kt([U,[Q,V,te,z],Y,le||Date.now(),Date.now()]):typeof z=="function"&&z.apply(this,arguments)})}}var u=t.appendFile;u&&(t.appendFile=f);function f(T,L,O,$){return typeof O=="function"&&($=O,O=null),U(T,L,O,$);function U(Q,V,te,z,le){return u(Q,V,te,function(Y){Y&&(Y.code==="EMFILE"||Y.code==="ENFILE")?kt([U,[Q,V,te,z],Y,le||Date.now(),Date.now()]):typeof z=="function"&&z.apply(this,arguments)})}}var b=t.copyFile;b&&(t.copyFile=g);function g(T,L,O,$){return typeof O=="function"&&($=O,O=0),U(T,L,O,$);function U(Q,V,te,z,le){return b(Q,V,te,function(Y){Y&&(Y.code==="EMFILE"||Y.code==="ENFILE")?kt([U,[Q,V,te,z],Y,le||Date.now(),Date.now()]):typeof z=="function"&&z.apply(this,arguments)})}}var w=t.readdir;t.readdir=p;function p(T,L,O){return typeof L=="function"&&(O=L,L=null),$(T,L,O);function $(U,Q,V,te){return w(U,Q,function(z,le){z&&(z.code==="EMFILE"||z.code==="ENFILE")?kt([$,[U,Q,V],z,te||Date.now(),Date.now()]):(le&&le.sort&&le.sort(),typeof V=="function"&&V.call(this,z,le))})}}if(process.version.substr(0,4)==="v0.8"){var _=Cc(t);R=_.ReadStream,A=_.WriteStream}var S=t.ReadStream;S&&(R.prototype=Object.create(S.prototype),R.prototype.open=C);var d=t.WriteStream;d&&(A.prototype=Object.create(d.prototype),A.prototype.open=J),Object.defineProperty(t,"ReadStream",{get:function(){return R},set:function(T){R=T},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return A},set:function(T){A=T},enumerable:!0,configurable:!0});var m=R;Object.defineProperty(t,"FileReadStream",{get:function(){return m},set:function(T){m=T},enumerable:!0,configurable:!0});var P=A;Object.defineProperty(t,"FileWriteStream",{get:function(){return P},set:function(T){P=T},enumerable:!0,configurable:!0});function R(T,L){return this instanceof R?(S.apply(this,arguments),this):R.apply(Object.create(R.prototype),arguments)}function C(){var T=this;be(T.path,T.flags,T.mode,function(L,O){L?(T.autoClose&&T.destroy(),T.emit("error",L)):(T.fd=O,T.emit("open",O),T.read())})}function A(T,L){return this instanceof A?(d.apply(this,arguments),this):A.apply(Object.create(A.prototype),arguments)}function J(){var T=this;be(T.path,T.flags,T.mode,function(L,O){L?(T.destroy(),T.emit("error",L)):(T.fd=O,T.emit("open",O))})}function F(T,L){return new t.ReadStream(T,L)}function M(T,L){return new t.WriteStream(T,L)}var W=t.open;t.open=be;function be(T,L,O,$){return typeof O=="function"&&($=O,O=null),U(T,L,O,$);function U(Q,V,te,z,le){return W(Q,V,te,function(Y,mn){Y&&(Y.code==="EMFILE"||Y.code==="ENFILE")?kt([U,[Q,V,te,z],Y,le||Date.now(),Date.now()]):typeof z=="function"&&z.apply(this,arguments)})}}return t}function kt(t){dt("ENQUEUE",t[0].name,t[1]),H[re].push(t),ii()}var nn;function Ra(){for(var t=Date.now(),r=0;r<H[re].length;++r)H[re][r].length>2&&(H[re][r][3]=t,H[re][r][4]=t);ii()}function ii(){if(clearTimeout(nn),nn=void 0,H[re].length!==0){var t=H[re].shift(),r=t[0],i=t[1],a=t[2],s=t[3],u=t[4];if(s===void 0)dt("RETRY",r.name,i),r.apply(null,i);else if(Date.now()-s>=6e4){dt("TIMEOUT",r.name,i);var f=i.pop();typeof f=="function"&&f.call(null,a)}else{var b=Date.now()-u,g=Math.max(u-s,1),w=Math.min(g*1.2,100);b>=w?(dt("RETRY",r.name,i),r.apply(null,i.concat([s]))):H[re].push(t)}nn===void 0&&(nn=setTimeout(ii,0))}}});var ae=q(ze=>{"use strict";var Ta=X().fromCallback,oe=Ft(),Fc=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(t=>typeof oe[t]=="function");Object.assign(ze,oe);Fc.forEach(t=>{ze[t]=Ta(oe[t])});ze.exists=function(t,r){return typeof r=="function"?oe.exists(t,r):new Promise(i=>oe.exists(t,i))};ze.read=function(t,r,i,a,s,u){return typeof u=="function"?oe.read(t,r,i,a,s,u):new Promise((f,b)=>{oe.read(t,r,i,a,s,(g,w,p)=>{if(g)return b(g);f({bytesRead:w,buffer:p})})})};ze.write=function(t,r,...i){return typeof i[i.length-1]=="function"?oe.write(t,r,...i):new Promise((a,s)=>{oe.write(t,r,...i,(u,f,b)=>{if(u)return s(u);a({bytesWritten:f,buffer:b})})})};ze.readv=function(t,r,...i){return typeof i[i.length-1]=="function"?oe.readv(t,r,...i):new Promise((a,s)=>{oe.readv(t,r,...i,(u,f,b)=>{if(u)return s(u);a({bytesRead:f,buffers:b})})})};ze.writev=function(t,r,...i){return typeof i[i.length-1]=="function"?oe.writev(t,r,...i):new Promise((a,s)=>{oe.writev(t,r,...i,(u,f,b)=>{if(u)return s(u);a({bytesWritten:f,buffers:b})})})};typeof oe.realpath.native=="function"?ze.realpath.native=Ta(oe.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var va=q((Uh,Pa)=>{"use strict";var qc=require("path");Pa.exports.checkPath=function(r){if(process.platform==="win32"&&/[<>:"|?*]/.test(r.replace(qc.parse(r).root,""))){let a=new Error(`Path contains invalid characters: ${r}`);throw a.code="EINVAL",a}}});var Fa=q((Hh,ai)=>{"use strict";var Ca=ae(),{checkPath:Aa}=va(),ka=t=>{let r={mode:511};return typeof t=="number"?t:{...r,...t}.mode};ai.exports.makeDir=async(t,r)=>(Aa(t),Ca.mkdir(t,{mode:ka(r),recursive:!0}));ai.exports.makeDirSync=(t,r)=>(Aa(t),Ca.mkdirSync(t,{mode:ka(r),recursive:!0}))});var ve=q((Vh,qa)=>{"use strict";var Dc=X().fromPromise,{makeDir:Oc,makeDirSync:si}=Fa(),ui=Dc(Oc);qa.exports={mkdirs:ui,mkdirsSync:si,mkdirp:ui,mkdirpSync:si,ensureDir:ui,ensureDirSync:si}});var Ze=q((Yh,Oa)=>{"use strict";var Bc=X().fromPromise,Da=ae();function Wc(t){return Da.access(t).then(()=>!0).catch(()=>!1)}Oa.exports={pathExists:Bc(Wc),pathExistsSync:Da.existsSync}});var li=q((Qh,Ba)=>{"use strict";var qt=ae(),Lc=X().fromPromise;async function xc(t,r,i){let a=await qt.open(t,"r+"),s=null;try{await qt.futimes(a,r,i)}finally{try{await qt.close(a)}catch(u){s=u}}if(s)throw s}function Ic(t,r,i){let a=qt.openSync(t,"r+");return qt.futimesSync(a,r,i),qt.closeSync(a)}Ba.exports={utimesMillis:Lc(xc),utimesMillisSync:Ic}});var ht=q((Jh,Ia)=>{"use strict";var Dt=ae(),ee=require("path"),Wa=X().fromPromise;function zc(t,r,i){let a=i.dereference?s=>Dt.stat(s,{bigint:!0}):s=>Dt.lstat(s,{bigint:!0});return Promise.all([a(t),a(r).catch(s=>{if(s.code==="ENOENT")return null;throw s})]).then(([s,u])=>({srcStat:s,destStat:u}))}function $c(t,r,i){let a,s=i.dereference?f=>Dt.statSync(f,{bigint:!0}):f=>Dt.lstatSync(f,{bigint:!0}),u=s(t);try{a=s(r)}catch(f){if(f.code==="ENOENT")return{srcStat:u,destStat:null};throw f}return{srcStat:u,destStat:a}}async function Nc(t,r,i,a){let{srcStat:s,destStat:u}=await zc(t,r,a);if(u){if(or(s,u)){let f=ee.basename(t),b=ee.basename(r);if(i==="move"&&f!==b&&f.toLowerCase()===b.toLowerCase())return{srcStat:s,destStat:u,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(s.isDirectory()&&!u.isDirectory())throw new Error(`Cannot overwrite non-directory '${r}' with directory '${t}'.`);if(!s.isDirectory()&&u.isDirectory())throw new Error(`Cannot overwrite directory '${r}' with non-directory '${t}'.`)}if(s.isDirectory()&&ci(t,r))throw new Error(an(t,r,i));return{srcStat:s,destStat:u}}function jc(t,r,i,a){let{srcStat:s,destStat:u}=$c(t,r,a);if(u){if(or(s,u)){let f=ee.basename(t),b=ee.basename(r);if(i==="move"&&f!==b&&f.toLowerCase()===b.toLowerCase())return{srcStat:s,destStat:u,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(s.isDirectory()&&!u.isDirectory())throw new Error(`Cannot overwrite non-directory '${r}' with directory '${t}'.`);if(!s.isDirectory()&&u.isDirectory())throw new Error(`Cannot overwrite directory '${r}' with non-directory '${t}'.`)}if(s.isDirectory()&&ci(t,r))throw new Error(an(t,r,i));return{srcStat:s,destStat:u}}async function La(t,r,i,a){let s=ee.resolve(ee.dirname(t)),u=ee.resolve(ee.dirname(i));if(u===s||u===ee.parse(u).root)return;let f;try{f=await Dt.stat(u,{bigint:!0})}catch(b){if(b.code==="ENOENT")return;throw b}if(or(r,f))throw new Error(an(t,i,a));return La(t,r,u,a)}function xa(t,r,i,a){let s=ee.resolve(ee.dirname(t)),u=ee.resolve(ee.dirname(i));if(u===s||u===ee.parse(u).root)return;let f;try{f=Dt.statSync(u,{bigint:!0})}catch(b){if(b.code==="ENOENT")return;throw b}if(or(r,f))throw new Error(an(t,i,a));return xa(t,r,u,a)}function or(t,r){return r.ino&&r.dev&&r.ino===t.ino&&r.dev===t.dev}function ci(t,r){let i=ee.resolve(t).split(ee.sep).filter(s=>s),a=ee.resolve(r).split(ee.sep).filter(s=>s);return i.every((s,u)=>a[u]===s)}function an(t,r,i){return`Cannot ${i} '${t}' to a subdirectory of itself, '${r}'.`}Ia.exports={checkPaths:Wa(Nc),checkPathsSync:jc,checkParentPaths:Wa(La),checkParentPathsSync:xa,isSrcSubdir:ci,areIdentical:or}});var Ma=q((Gh,ja)=>{"use strict";var ne=ae(),ar=require("path"),{mkdirs:Mc}=ve(),{pathExists:Uc}=Ze(),{utimesMillis:Hc}=li(),sr=ht();async function Vc(t,r,i={}){typeof i=="function"&&(i={filter:i}),i.clobber="clobber"in i?!!i.clobber:!0,i.overwrite="overwrite"in i?!!i.overwrite:i.clobber,i.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001");let{srcStat:a,destStat:s}=await sr.checkPaths(t,r,"copy",i);if(await sr.checkParentPaths(t,a,r,"copy"),!await $a(t,r,i))return;let f=ar.dirname(r);await Uc(f)||await Mc(f),await Na(s,t,r,i)}async function $a(t,r,i){return i.filter?i.filter(t,r):!0}async function Na(t,r,i,a){let u=await(a.dereference?ne.stat:ne.lstat)(r);if(u.isDirectory())return Gc(u,t,r,i,a);if(u.isFile()||u.isCharacterDevice()||u.isBlockDevice())return Yc(u,t,r,i,a);if(u.isSymbolicLink())return Kc(t,r,i,a);throw u.isSocket()?new Error(`Cannot copy a socket file: ${r}`):u.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${r}`):new Error(`Unknown file: ${r}`)}async function Yc(t,r,i,a,s){if(!r)return za(t,i,a,s);if(s.overwrite)return await ne.unlink(a),za(t,i,a,s);if(s.errorOnExist)throw new Error(`'${a}' already exists`)}async function za(t,r,i,a){if(await ne.copyFile(r,i),a.preserveTimestamps){Qc(t.mode)&&await Jc(i,t.mode);let s=await ne.stat(r);await Hc(i,s.atime,s.mtime)}return ne.chmod(i,t.mode)}function Qc(t){return(t&128)===0}function Jc(t,r){return ne.chmod(t,r|128)}async function Gc(t,r,i,a,s){r||await ne.mkdir(a);let u=await ne.readdir(i);await Promise.all(u.map(async f=>{let b=ar.join(i,f),g=ar.join(a,f);if(!await $a(b,g,s))return;let{destStat:p}=await sr.checkPaths(b,g,"copy",s);return Na(p,b,g,s)})),r||await ne.chmod(a,t.mode)}async function Kc(t,r,i,a){let s=await ne.readlink(r);if(a.dereference&&(s=ar.resolve(process.cwd(),s)),!t)return ne.symlink(s,i);let u=null;try{u=await ne.readlink(i)}catch(f){if(f.code==="EINVAL"||f.code==="UNKNOWN")return ne.symlink(s,i);throw f}if(a.dereference&&(u=ar.resolve(process.cwd(),u)),sr.isSrcSubdir(s,u))throw new Error(`Cannot copy '${s}' to a subdirectory of itself, '${u}'.`);if(sr.isSrcSubdir(u,s))throw new Error(`Cannot overwrite '${u}' with '${s}'.`);return await ne.unlink(i),ne.symlink(s,i)}ja.exports=Vc});var Qa=q((Kh,Ya)=>{"use strict";var se=Ft(),ur=require("path"),Zc=ve().mkdirsSync,Xc=li().utimesMillisSync,lr=ht();function ef(t,r,i){typeof i=="function"&&(i={filter:i}),i=i||{},i.clobber="clobber"in i?!!i.clobber:!0,i.overwrite="overwrite"in i?!!i.overwrite:i.clobber,i.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:a,destStat:s}=lr.checkPathsSync(t,r,"copy",i);if(lr.checkParentPathsSync(t,a,r,"copy"),i.filter&&!i.filter(t,r))return;let u=ur.dirname(r);return se.existsSync(u)||Zc(u),Ua(s,t,r,i)}function Ua(t,r,i,a){let u=(a.dereference?se.statSync:se.lstatSync)(r);if(u.isDirectory())return uf(u,t,r,i,a);if(u.isFile()||u.isCharacterDevice()||u.isBlockDevice())return tf(u,t,r,i,a);if(u.isSymbolicLink())return ff(t,r,i,a);throw u.isSocket()?new Error(`Cannot copy a socket file: ${r}`):u.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${r}`):new Error(`Unknown file: ${r}`)}function tf(t,r,i,a,s){return r?rf(t,i,a,s):Ha(t,i,a,s)}function rf(t,r,i,a){if(a.overwrite)return se.unlinkSync(i),Ha(t,r,i,a);if(a.errorOnExist)throw new Error(`'${i}' already exists`)}function Ha(t,r,i,a){return se.copyFileSync(r,i),a.preserveTimestamps&&nf(t.mode,r,i),fi(i,t.mode)}function nf(t,r,i){return of(t)&&af(i,t),sf(r,i)}function of(t){return(t&128)===0}function af(t,r){return fi(t,r|128)}function fi(t,r){return se.chmodSync(t,r)}function sf(t,r){let i=se.statSync(t);return Xc(r,i.atime,i.mtime)}function uf(t,r,i,a,s){return r?Va(i,a,s):lf(t.mode,i,a,s)}function lf(t,r,i,a){return se.mkdirSync(i),Va(r,i,a),fi(i,t)}function Va(t,r,i){se.readdirSync(t).forEach(a=>cf(a,t,r,i))}function cf(t,r,i,a){let s=ur.join(r,t),u=ur.join(i,t);if(a.filter&&!a.filter(s,u))return;let{destStat:f}=lr.checkPathsSync(s,u,"copy",a);return Ua(f,s,u,a)}function ff(t,r,i,a){let s=se.readlinkSync(r);if(a.dereference&&(s=ur.resolve(process.cwd(),s)),t){let u;try{u=se.readlinkSync(i)}catch(f){if(f.code==="EINVAL"||f.code==="UNKNOWN")return se.symlinkSync(s,i);throw f}if(a.dereference&&(u=ur.resolve(process.cwd(),u)),lr.isSrcSubdir(s,u))throw new Error(`Cannot copy '${s}' to a subdirectory of itself, '${u}'.`);if(lr.isSrcSubdir(u,s))throw new Error(`Cannot overwrite '${u}' with '${s}'.`);return df(s,i)}else return se.symlinkSync(s,i)}function df(t,r){return se.unlinkSync(r),se.symlinkSync(t,r)}Ya.exports=ef});var sn=q((Zh,Ja)=>{"use strict";var hf=X().fromPromise;Ja.exports={copy:hf(Ma()),copySync:Qa()}});var cr=q((Xh,Ka)=>{"use strict";var Ga=Ft(),mf=X().fromCallback;function pf(t,r){Ga.rm(t,{recursive:!0,force:!0},r)}function yf(t){Ga.rmSync(t,{recursive:!0,force:!0})}Ka.exports={remove:mf(pf),removeSync:yf}});var os=q((em,is)=>{"use strict";var bf=X().fromPromise,es=ae(),ts=require("path"),rs=ve(),ns=cr(),Za=bf(async function(r){let i;try{i=await es.readdir(r)}catch{return rs.mkdirs(r)}return Promise.all(i.map(a=>ns.remove(ts.join(r,a))))});function Xa(t){let r;try{r=es.readdirSync(t)}catch{return rs.mkdirsSync(t)}r.forEach(i=>{i=ts.join(t,i),ns.removeSync(i)})}is.exports={emptyDirSync:Xa,emptydirSync:Xa,emptyDir:Za,emptydir:Za}});var ls=q((tm,us)=>{"use strict";var Sf=X().fromPromise,as=require("path"),$e=ae(),ss=ve();async function gf(t){let r;try{r=await $e.stat(t)}catch{}if(r&&r.isFile())return;let i=as.dirname(t),a=null;try{a=await $e.stat(i)}catch(s){if(s.code==="ENOENT"){await ss.mkdirs(i),await $e.writeFile(t,"");return}else throw s}a.isDirectory()?await $e.writeFile(t,""):await $e.readdir(i)}function wf(t){let r;try{r=$e.statSync(t)}catch{}if(r&&r.isFile())return;let i=as.dirname(t);try{$e.statSync(i).isDirectory()||$e.readdirSync(i)}catch(a){if(a&&a.code==="ENOENT")ss.mkdirsSync(i);else throw a}$e.writeFileSync(t,"")}us.exports={createFile:Sf(gf),createFileSync:wf}});var ms=q((rm,hs)=>{"use strict";var _f=X().fromPromise,cs=require("path"),Xe=ae(),fs=ve(),{pathExists:Rf}=Ze(),{areIdentical:ds}=ht();async function Ef(t,r){let i;try{i=await Xe.lstat(r)}catch{}let a;try{a=await Xe.lstat(t)}catch(f){throw f.message=f.message.replace("lstat","ensureLink"),f}if(i&&ds(a,i))return;let s=cs.dirname(r);await Rf(s)||await fs.mkdirs(s),await Xe.link(t,r)}function Tf(t,r){let i;try{i=Xe.lstatSync(r)}catch{}try{let u=Xe.lstatSync(t);if(i&&ds(u,i))return}catch(u){throw u.message=u.message.replace("lstat","ensureLink"),u}let a=cs.dirname(r);return Xe.existsSync(a)||fs.mkdirsSync(a),Xe.linkSync(t,r)}hs.exports={createLink:_f(Ef),createLinkSync:Tf}});var ys=q((nm,ps)=>{"use strict";var et=require("path"),fr=ae(),{pathExists:Pf}=Ze(),vf=X().fromPromise;async function Cf(t,r){if(et.isAbsolute(t)){try{await fr.lstat(t)}catch(u){throw u.message=u.message.replace("lstat","ensureSymlink"),u}return{toCwd:t,toDst:t}}let i=et.dirname(r),a=et.join(i,t);if(await Pf(a))return{toCwd:a,toDst:t};try{await fr.lstat(t)}catch(u){throw u.message=u.message.replace("lstat","ensureSymlink"),u}return{toCwd:t,toDst:et.relative(i,t)}}function Af(t,r){if(et.isAbsolute(t)){if(!fr.existsSync(t))throw new Error("absolute srcpath does not exist");return{toCwd:t,toDst:t}}let i=et.dirname(r),a=et.join(i,t);if(fr.existsSync(a))return{toCwd:a,toDst:t};if(!fr.existsSync(t))throw new Error("relative srcpath does not exist");return{toCwd:t,toDst:et.relative(i,t)}}ps.exports={symlinkPaths:vf(Cf),symlinkPathsSync:Af}});var gs=q((im,Ss)=>{"use strict";var bs=ae(),kf=X().fromPromise;async function Ff(t,r){if(r)return r;let i;try{i=await bs.lstat(t)}catch{return"file"}return i&&i.isDirectory()?"dir":"file"}function qf(t,r){if(r)return r;let i;try{i=bs.lstatSync(t)}catch{return"file"}return i&&i.isDirectory()?"dir":"file"}Ss.exports={symlinkType:kf(Ff),symlinkTypeSync:qf}});var Es=q((om,Rs)=>{"use strict";var Df=X().fromPromise,ws=require("path"),qe=ae(),{mkdirs:Of,mkdirsSync:Bf}=ve(),{symlinkPaths:Wf,symlinkPathsSync:Lf}=ys(),{symlinkType:xf,symlinkTypeSync:If}=gs(),{pathExists:zf}=Ze(),{areIdentical:_s}=ht();async function $f(t,r,i){let a;try{a=await qe.lstat(r)}catch{}if(a&&a.isSymbolicLink()){let[b,g]=await Promise.all([qe.stat(t),qe.stat(r)]);if(_s(b,g))return}let s=await Wf(t,r);t=s.toDst;let u=await xf(s.toCwd,i),f=ws.dirname(r);return await zf(f)||await Of(f),qe.symlink(t,r,u)}function Nf(t,r,i){let a;try{a=qe.lstatSync(r)}catch{}if(a&&a.isSymbolicLink()){let b=qe.statSync(t),g=qe.statSync(r);if(_s(b,g))return}let s=Lf(t,r);t=s.toDst,i=If(s.toCwd,i);let u=ws.dirname(r);return qe.existsSync(u)||Bf(u),qe.symlinkSync(t,r,i)}Rs.exports={createSymlink:Df($f),createSymlinkSync:Nf}});var qs=q((am,Fs)=>{"use strict";var{createFile:Ts,createFileSync:Ps}=ls(),{createLink:vs,createLinkSync:Cs}=ms(),{createSymlink:As,createSymlinkSync:ks}=Es();Fs.exports={createFile:Ts,createFileSync:Ps,ensureFile:Ts,ensureFileSync:Ps,createLink:vs,createLinkSync:Cs,ensureLink:vs,ensureLinkSync:Cs,createSymlink:As,createSymlinkSync:ks,ensureSymlink:As,ensureSymlinkSync:ks}});var un=q((sm,Ds)=>{function jf(t,{EOL:r=`
`,finalEOL:i=!0,replacer:a=null,spaces:s}={}){let u=i?r:"";return JSON.stringify(t,a,s).replace(/\n/g,r)+u}function Mf(t){return Buffer.isBuffer(t)&&(t=t.toString("utf8")),t.replace(/^\uFEFF/,"")}Ds.exports={stringify:jf,stripBom:Mf}});var Ls=q((um,Ws)=>{var Ot;try{Ot=Ft()}catch{Ot=require("fs")}var ln=X(),{stringify:Os,stripBom:Bs}=un();async function Uf(t,r={}){typeof r=="string"&&(r={encoding:r});let i=r.fs||Ot,a="throws"in r?r.throws:!0,s=await ln.fromCallback(i.readFile)(t,r);s=Bs(s);let u;try{u=JSON.parse(s,r?r.reviver:null)}catch(f){if(a)throw f.message=`${t}: ${f.message}`,f;return null}return u}var Hf=ln.fromPromise(Uf);function Vf(t,r={}){typeof r=="string"&&(r={encoding:r});let i=r.fs||Ot,a="throws"in r?r.throws:!0;try{let s=i.readFileSync(t,r);return s=Bs(s),JSON.parse(s,r.reviver)}catch(s){if(a)throw s.message=`${t}: ${s.message}`,s;return null}}async function Yf(t,r,i={}){let a=i.fs||Ot,s=Os(r,i);await ln.fromCallback(a.writeFile)(t,s,i)}var Qf=ln.fromPromise(Yf);function Jf(t,r,i={}){let a=i.fs||Ot,s=Os(r,i);return a.writeFileSync(t,s,i)}var Gf={readFile:Hf,readFileSync:Vf,writeFile:Qf,writeFileSync:Jf};Ws.exports=Gf});var Is=q((lm,xs)=>{"use strict";var cn=Ls();xs.exports={readJson:cn.readFile,readJsonSync:cn.readFileSync,writeJson:cn.writeFile,writeJsonSync:cn.writeFileSync}});var fn=q((cm,Ns)=>{"use strict";var Kf=X().fromPromise,di=ae(),zs=require("path"),$s=ve(),Zf=Ze().pathExists;async function Xf(t,r,i="utf-8"){let a=zs.dirname(t);return await Zf(a)||await $s.mkdirs(a),di.writeFile(t,r,i)}function ed(t,...r){let i=zs.dirname(t);di.existsSync(i)||$s.mkdirsSync(i),di.writeFileSync(t,...r)}Ns.exports={outputFile:Kf(Xf),outputFileSync:ed}});var Ms=q((fm,js)=>{"use strict";var{stringify:td}=un(),{outputFile:rd}=fn();async function nd(t,r,i={}){let a=td(r,i);await rd(t,a,i)}js.exports=nd});var Hs=q((dm,Us)=>{"use strict";var{stringify:id}=un(),{outputFileSync:od}=fn();function ad(t,r,i){let a=id(r,i);od(t,a,i)}Us.exports=ad});var Ys=q((hm,Vs)=>{"use strict";var sd=X().fromPromise,ue=Is();ue.outputJson=sd(Ms());ue.outputJsonSync=Hs();ue.outputJSON=ue.outputJson;ue.outputJSONSync=ue.outputJsonSync;ue.writeJSON=ue.writeJson;ue.writeJSONSync=ue.writeJsonSync;ue.readJSON=ue.readJson;ue.readJSONSync=ue.readJsonSync;Vs.exports=ue});var Zs=q((mm,Ks)=>{"use strict";var ud=ae(),Qs=require("path"),{copy:ld}=sn(),{remove:Gs}=cr(),{mkdirp:cd}=ve(),{pathExists:fd}=Ze(),Js=ht();async function dd(t,r,i={}){let a=i.overwrite||i.clobber||!1,{srcStat:s,isChangingCase:u=!1}=await Js.checkPaths(t,r,"move",i);await Js.checkParentPaths(t,s,r,"move");let f=Qs.dirname(r);return Qs.parse(f).root!==f&&await cd(f),hd(t,r,a,u)}async function hd(t,r,i,a){if(!a){if(i)await Gs(r);else if(await fd(r))throw new Error("dest already exists.")}try{await ud.rename(t,r)}catch(s){if(s.code!=="EXDEV")throw s;await md(t,r,i)}}async function md(t,r,i){return await ld(t,r,{overwrite:i,errorOnExist:!0,preserveTimestamps:!0}),Gs(t)}Ks.exports=dd});var nu=q((pm,ru)=>{"use strict";var eu=Ft(),mi=require("path"),pd=sn().copySync,tu=cr().removeSync,yd=ve().mkdirpSync,Xs=ht();function bd(t,r,i){i=i||{};let a=i.overwrite||i.clobber||!1,{srcStat:s,isChangingCase:u=!1}=Xs.checkPathsSync(t,r,"move",i);return Xs.checkParentPathsSync(t,s,r,"move"),Sd(r)||yd(mi.dirname(r)),gd(t,r,a,u)}function Sd(t){let r=mi.dirname(t);return mi.parse(r).root===r}function gd(t,r,i,a){if(a)return hi(t,r,i);if(i)return tu(r),hi(t,r,i);if(eu.existsSync(r))throw new Error("dest already exists.");return hi(t,r,i)}function hi(t,r,i){try{eu.renameSync(t,r)}catch(a){if(a.code!=="EXDEV")throw a;return wd(t,r,i)}}function wd(t,r,i){return pd(t,r,{overwrite:i,errorOnExist:!0,preserveTimestamps:!0}),tu(t)}ru.exports=bd});var ou=q((ym,iu)=>{"use strict";var _d=X().fromPromise;iu.exports={move:_d(Zs()),moveSync:nu()}});var su=q((bm,au)=>{"use strict";au.exports={...ae(),...sn(),...os(),...qs(),...Ys(),...ve(),...ou(),...fn(),...Ze(),...cr()}});var vd={};Oo(vd,{default:()=>Pd,getRandomWallpaper:()=>Ru});module.exports=Kl(vd);var da=Ae(require("node:http"),1),ha=Ae(require("node:https"),1),ft=Ae(require("node:zlib"),1),ye=Ae(require("node:stream"),1),rr=require("node:buffer");function Zl(t){if(!/^data:/i.test(t))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');t=t.replace(/\r?\n/g,"");let r=t.indexOf(",");if(r===-1||r<=4)throw new TypeError("malformed data: URI");let i=t.substring(5,r).split(";"),a="",s=!1,u=i[0]||"text/plain",f=u;for(let p=1;p<i.length;p++)i[p]==="base64"?s=!0:(f+=`;${i[p]}`,i[p].indexOf("charset=")===0&&(a=i[p].substring(8)));!i[0]&&!a.length&&(f+=";charset=US-ASCII",a="US-ASCII");let b=s?"base64":"ascii",g=unescape(t.substring(r+1)),w=Buffer.from(g,b);return w.type=u,w.typeFull=f,w.charset=a,w}var Wo=Zl;var ge=Ae(require("node:stream"),1),Ie=require("node:util"),me=require("node:buffer");Gt();Vr();var xe=class extends Error{constructor(r,i){super(r),Error.captureStackTrace(this,this.constructor),this.type=i}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var fe=class extends xe{constructor(r,i,a){super(r,i),a&&(this.code=this.errno=a.code,this.erroredSysCall=a.syscall)}};var Yr=Symbol.toStringTag,Qn=t=>typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&typeof t.sort=="function"&&t[Yr]==="URLSearchParams",Zt=t=>t&&typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&/^(Blob|File)$/.test(t[Yr]),Uo=t=>typeof t=="object"&&(t[Yr]==="AbortSignal"||t[Yr]==="EventTarget"),Ho=(t,r)=>{let i=new URL(r).hostname,a=new URL(t).hostname;return i===a||i.endsWith(`.${a}`)},Vo=(t,r)=>{let i=new URL(r).protocol,a=new URL(t).protocol;return i===a};var hc=(0,Ie.promisify)(ge.default.pipeline),de=Symbol("Body internals"),Fe=class{constructor(r,{size:i=0}={}){let a=null;r===null?r=null:Qn(r)?r=me.Buffer.from(r.toString()):Zt(r)||me.Buffer.isBuffer(r)||(Ie.types.isAnyArrayBuffer(r)?r=me.Buffer.from(r):ArrayBuffer.isView(r)?r=me.Buffer.from(r.buffer,r.byteOffset,r.byteLength):r instanceof ge.default||(r instanceof ut?(r=Mo(r),a=r.type.split("=")[1]):r=me.Buffer.from(String(r))));let s=r;me.Buffer.isBuffer(r)?s=ge.default.Readable.from(r):Zt(r)&&(s=ge.default.Readable.from(r.stream())),this[de]={body:r,stream:s,boundary:a,disturbed:!1,error:null},this.size=i,r instanceof ge.default&&r.on("error",u=>{let f=u instanceof xe?u:new fe(`Invalid response body while trying to fetch ${this.url}: ${u.message}`,"system",u);this[de].error=f})}get body(){return this[de].stream}get bodyUsed(){return this[de].disturbed}async arrayBuffer(){let{buffer:r,byteOffset:i,byteLength:a}=await Kn(this);return r.slice(i,i+a)}async formData(){let r=this.headers.get("content-type");if(r.startsWith("application/x-www-form-urlencoded")){let a=new ut,s=new URLSearchParams(await this.text());for(let[u,f]of s)a.append(u,f);return a}let{toFormData:i}=await Promise.resolve().then(()=>(Ko(),Go));return i(this.body,r)}async blob(){let r=this.headers&&this.headers.get("content-type")||this[de].body&&this[de].body.type||"",i=await this.arrayBuffer();return new Le([i],{type:r})}async json(){let r=await this.text();return JSON.parse(r)}async text(){let r=await Kn(this);return new TextDecoder().decode(r)}buffer(){return Kn(this)}};Fe.prototype.buffer=(0,Ie.deprecate)(Fe.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(Fe.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Ie.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function Kn(t){if(t[de].disturbed)throw new TypeError(`body used already for: ${t.url}`);if(t[de].disturbed=!0,t[de].error)throw t[de].error;let{body:r}=t;if(r===null)return me.Buffer.alloc(0);if(!(r instanceof ge.default))return me.Buffer.alloc(0);let i=[],a=0;try{for await(let s of r){if(t.size>0&&a+s.length>t.size){let u=new fe(`content size at ${t.url} over limit: ${t.size}`,"max-size");throw r.destroy(u),u}a+=s.length,i.push(s)}}catch(s){throw s instanceof xe?s:new fe(`Invalid response body while trying to fetch ${t.url}: ${s.message}`,"system",s)}if(r.readableEnded===!0||r._readableState.ended===!0)try{return i.every(s=>typeof s=="string")?me.Buffer.from(i.join("")):me.Buffer.concat(i,a)}catch(s){throw new fe(`Could not create Buffer from response body for ${t.url}: ${s.message}`,"system",s)}else throw new fe(`Premature close of server response while trying to fetch ${t.url}`)}var Ct=(t,r)=>{let i,a,{body:s}=t[de];if(t.bodyUsed)throw new Error("cannot clone body after it is used");return s instanceof ge.default&&typeof s.getBoundary!="function"&&(i=new ge.PassThrough({highWaterMark:r}),a=new ge.PassThrough({highWaterMark:r}),s.pipe(i),s.pipe(a),t[de].stream=i,s=a),s},mc=(0,Ie.deprecate)(t=>t.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),Kr=(t,r)=>t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":Qn(t)?"application/x-www-form-urlencoded;charset=UTF-8":Zt(t)?t.type||null:me.Buffer.isBuffer(t)||Ie.types.isAnyArrayBuffer(t)||ArrayBuffer.isView(t)?null:t instanceof ut?`multipart/form-data; boundary=${r[de].boundary}`:t&&typeof t.getBoundary=="function"?`multipart/form-data;boundary=${mc(t)}`:t instanceof ge.default?null:"text/plain;charset=UTF-8",Zo=t=>{let{body:r}=t[de];return r===null?0:Zt(r)?r.size:me.Buffer.isBuffer(r)?r.length:r&&typeof r.getLengthSync=="function"&&r.hasKnownLength&&r.hasKnownLength()?r.getLengthSync():null},Xo=async(t,{body:r})=>{r===null?t.end():await hc(r,t)};var Zn=require("node:util"),er=Ae(require("node:http"),1),Zr=typeof er.default.validateHeaderName=="function"?er.default.validateHeaderName:t=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(t)){let r=new TypeError(`Header name must be a valid HTTP token [${t}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}},Xn=typeof er.default.validateHeaderValue=="function"?er.default.validateHeaderValue:(t,r)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let i=new TypeError(`Invalid character in header content ["${t}"]`);throw Object.defineProperty(i,"code",{value:"ERR_INVALID_CHAR"}),i}},pe=class t extends URLSearchParams{constructor(r){let i=[];if(r instanceof t){let a=r.raw();for(let[s,u]of Object.entries(a))i.push(...u.map(f=>[s,f]))}else if(r!=null)if(typeof r=="object"&&!Zn.types.isBoxedPrimitive(r)){let a=r[Symbol.iterator];if(a==null)i.push(...Object.entries(r));else{if(typeof a!="function")throw new TypeError("Header pairs must be iterable");i=[...r].map(s=>{if(typeof s!="object"||Zn.types.isBoxedPrimitive(s))throw new TypeError("Each header pair must be an iterable object");return[...s]}).map(s=>{if(s.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...s]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return i=i.length>0?i.map(([a,s])=>(Zr(a),Xn(a,String(s)),[String(a).toLowerCase(),String(s)])):void 0,super(i),new Proxy(this,{get(a,s,u){switch(s){case"append":case"set":return(f,b)=>(Zr(f),Xn(f,String(b)),URLSearchParams.prototype[s].call(a,String(f).toLowerCase(),String(b)));case"delete":case"has":case"getAll":return f=>(Zr(f),URLSearchParams.prototype[s].call(a,String(f).toLowerCase()));case"keys":return()=>(a.sort(),new Set(URLSearchParams.prototype.keys.call(a)).keys());default:return Reflect.get(a,s,u)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(r){let i=this.getAll(r);if(i.length===0)return null;let a=i.join(", ");return/^content-encoding$/i.test(r)&&(a=a.toLowerCase()),a}forEach(r,i=void 0){for(let a of this.keys())Reflect.apply(r,i,[this.get(a),a,this])}*values(){for(let r of this.keys())yield this.get(r)}*entries(){for(let r of this.keys())yield[r,this.get(r)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((r,i)=>(r[i]=this.getAll(i),r),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((r,i)=>{let a=this.getAll(i);return i==="host"?r[i]=a[0]:r[i]=a.length>1?a:a[0],r},{})}};Object.defineProperties(pe.prototype,["get","entries","forEach","values"].reduce((t,r)=>(t[r]={enumerable:!0},t),{}));function ea(t=[]){return new pe(t.reduce((r,i,a,s)=>(a%2===0&&r.push(s.slice(a,a+2)),r),[]).filter(([r,i])=>{try{return Zr(r),Xn(r,String(i)),!0}catch{return!1}}))}var pc=new Set([301,302,303,307,308]),Xr=t=>pc.has(t);var Pe=Symbol("Response internals"),we=class t extends Fe{constructor(r=null,i={}){super(r,i);let a=i.status!=null?i.status:200,s=new pe(i.headers);if(r!==null&&!s.has("Content-Type")){let u=Kr(r,this);u&&s.append("Content-Type",u)}this[Pe]={type:"default",url:i.url,status:a,statusText:i.statusText||"",headers:s,counter:i.counter,highWaterMark:i.highWaterMark}}get type(){return this[Pe].type}get url(){return this[Pe].url||""}get status(){return this[Pe].status}get ok(){return this[Pe].status>=200&&this[Pe].status<300}get redirected(){return this[Pe].counter>0}get statusText(){return this[Pe].statusText}get headers(){return this[Pe].headers}get highWaterMark(){return this[Pe].highWaterMark}clone(){return new t(Ct(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(r,i=302){if(!Xr(i))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new t(null,{headers:{location:new URL(r).toString()},status:i})}static error(){let r=new t(null,{status:0,statusText:""});return r[Pe].type="error",r}static json(r=void 0,i={}){let a=JSON.stringify(r);if(a===void 0)throw new TypeError("data is not JSON serializable");let s=new pe(i&&i.headers);return s.has("content-type")||s.set("content-type","application/json"),new t(a,{...i,headers:s})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(we.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var la=require("node:url"),ca=require("node:util");var ta=t=>{if(t.search)return t.search;let r=t.href.length-1,i=t.hash||(t.href[r]==="#"?"#":"");return t.href[r-i.length]==="?"?"?":""};var na=require("node:net");function ra(t,r=!1){return t==null||(t=new URL(t),/^(about|blob|data):$/.test(t.protocol))?"no-referrer":(t.username="",t.password="",t.hash="",r&&(t.pathname="",t.search=""),t)}var ia=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),oa="strict-origin-when-cross-origin";function aa(t){if(!ia.has(t))throw new TypeError(`Invalid referrerPolicy: ${t}`);return t}function yc(t){if(/^(http|ws)s:$/.test(t.protocol))return!0;let r=t.host.replace(/(^\[)|(]$)/g,""),i=(0,na.isIP)(r);return i===4&&/^127\./.test(r)||i===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(r)?!0:t.host==="localhost"||t.host.endsWith(".localhost")?!1:t.protocol==="file:"}function At(t){return/^about:(blank|srcdoc)$/.test(t)||t.protocol==="data:"||/^(blob|filesystem):$/.test(t.protocol)?!0:yc(t)}function sa(t,{referrerURLCallback:r,referrerOriginCallback:i}={}){if(t.referrer==="no-referrer"||t.referrerPolicy==="")return null;let a=t.referrerPolicy;if(t.referrer==="about:client")return"no-referrer";let s=t.referrer,u=ra(s),f=ra(s,!0);u.toString().length>4096&&(u=f),r&&(u=r(u)),i&&(f=i(f));let b=new URL(t.url);switch(a){case"no-referrer":return"no-referrer";case"origin":return f;case"unsafe-url":return u;case"strict-origin":return At(u)&&!At(b)?"no-referrer":f.toString();case"strict-origin-when-cross-origin":return u.origin===b.origin?u:At(u)&&!At(b)?"no-referrer":f;case"same-origin":return u.origin===b.origin?u:"no-referrer";case"origin-when-cross-origin":return u.origin===b.origin?u:f;case"no-referrer-when-downgrade":return At(u)&&!At(b)?"no-referrer":u;default:throw new TypeError(`Invalid referrerPolicy: ${a}`)}}function ua(t){let r=(t.get("referrer-policy")||"").split(/[,\s]+/),i="";for(let a of r)a&&ia.has(a)&&(i=a);return i}var Z=Symbol("Request internals"),tr=t=>typeof t=="object"&&typeof t[Z]=="object",bc=(0,ca.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),ct=class t extends Fe{constructor(r,i={}){let a;if(tr(r)?a=new URL(r.url):(a=new URL(r),r={}),a.username!==""||a.password!=="")throw new TypeError(`${a} is an url with embedded credentials.`);let s=i.method||r.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(s)&&(s=s.toUpperCase()),!tr(i)&&"data"in i&&bc(),(i.body!=null||tr(r)&&r.body!==null)&&(s==="GET"||s==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let u=i.body?i.body:tr(r)&&r.body!==null?Ct(r):null;super(u,{size:i.size||r.size||0});let f=new pe(i.headers||r.headers||{});if(u!==null&&!f.has("Content-Type")){let w=Kr(u,this);w&&f.set("Content-Type",w)}let b=tr(r)?r.signal:null;if("signal"in i&&(b=i.signal),b!=null&&!Uo(b))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let g=i.referrer==null?r.referrer:i.referrer;if(g==="")g="no-referrer";else if(g){let w=new URL(g);g=/^about:(\/\/)?client$/.test(w)?"client":w}else g=void 0;this[Z]={method:s,redirect:i.redirect||r.redirect||"follow",headers:f,parsedURL:a,signal:b,referrer:g},this.follow=i.follow===void 0?r.follow===void 0?20:r.follow:i.follow,this.compress=i.compress===void 0?r.compress===void 0?!0:r.compress:i.compress,this.counter=i.counter||r.counter||0,this.agent=i.agent||r.agent,this.highWaterMark=i.highWaterMark||r.highWaterMark||16384,this.insecureHTTPParser=i.insecureHTTPParser||r.insecureHTTPParser||!1,this.referrerPolicy=i.referrerPolicy||r.referrerPolicy||""}get method(){return this[Z].method}get url(){return(0,la.format)(this[Z].parsedURL)}get headers(){return this[Z].headers}get redirect(){return this[Z].redirect}get signal(){return this[Z].signal}get referrer(){if(this[Z].referrer==="no-referrer")return"";if(this[Z].referrer==="client")return"about:client";if(this[Z].referrer)return this[Z].referrer.toString()}get referrerPolicy(){return this[Z].referrerPolicy}set referrerPolicy(r){this[Z].referrerPolicy=aa(r)}clone(){return new t(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(ct.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var fa=t=>{let{parsedURL:r}=t[Z],i=new pe(t[Z].headers);i.has("Accept")||i.set("Accept","*/*");let a=null;if(t.body===null&&/^(post|put)$/i.test(t.method)&&(a="0"),t.body!==null){let b=Zo(t);typeof b=="number"&&!Number.isNaN(b)&&(a=String(b))}a&&i.set("Content-Length",a),t.referrerPolicy===""&&(t.referrerPolicy=oa),t.referrer&&t.referrer!=="no-referrer"?t[Z].referrer=sa(t):t[Z].referrer="no-referrer",t[Z].referrer instanceof URL&&i.set("Referer",t.referrer),i.has("User-Agent")||i.set("User-Agent","node-fetch"),t.compress&&!i.has("Accept-Encoding")&&i.set("Accept-Encoding","gzip, deflate, br");let{agent:s}=t;typeof s=="function"&&(s=s(r));let u=ta(r),f={path:r.pathname+u,method:t.method,headers:i[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:t.insecureHTTPParser,agent:s};return{parsedURL:r,options:f}};var en=class extends xe{constructor(r,i="aborted"){super(r,i)}};Vr();Jn();var Sc=new Set(["data:","http:","https:"]);async function Ge(t,r){return new Promise((i,a)=>{let s=new ct(t,r),{parsedURL:u,options:f}=fa(s);if(!Sc.has(u.protocol))throw new TypeError(`node-fetch cannot load ${t}. URL scheme "${u.protocol.replace(/:$/,"")}" is not supported.`);if(u.protocol==="data:"){let m=Wo(s.url),P=new we(m,{headers:{"Content-Type":m.typeFull}});i(P);return}let b=(u.protocol==="https:"?ha.default:da.default).request,{signal:g}=s,w=null,p=()=>{let m=new en("The operation was aborted.");a(m),s.body&&s.body instanceof ye.default.Readable&&s.body.destroy(m),!(!w||!w.body)&&w.body.emit("error",m)};if(g&&g.aborted){p();return}let _=()=>{p(),d()},S=b(u.toString(),f);g&&g.addEventListener("abort",_);let d=()=>{S.abort(),g&&g.removeEventListener("abort",_)};S.on("error",m=>{a(new fe(`request to ${s.url} failed, reason: ${m.message}`,"system",m)),d()}),gc(S,m=>{w&&w.body&&w.body.destroy(m)}),process.version<"v14"&&S.on("socket",m=>{let P;m.prependListener("end",()=>{P=m._eventsCount}),m.prependListener("close",R=>{if(w&&P<m._eventsCount&&!R){let C=new Error("Premature close");C.code="ERR_STREAM_PREMATURE_CLOSE",w.body.emit("error",C)}})}),S.on("response",m=>{S.setTimeout(0);let P=ea(m.rawHeaders);if(Xr(m.statusCode)){let F=P.get("Location"),M=null;try{M=F===null?null:new URL(F,s.url)}catch{if(s.redirect!=="manual"){a(new fe(`uri requested responds with an invalid redirect URL: ${F}`,"invalid-redirect")),d();return}}switch(s.redirect){case"error":a(new fe(`uri requested responds with a redirect, redirect mode is set to error: ${s.url}`,"no-redirect")),d();return;case"manual":break;case"follow":{if(M===null)break;if(s.counter>=s.follow){a(new fe(`maximum redirect reached at: ${s.url}`,"max-redirect")),d();return}let W={headers:new pe(s.headers),follow:s.follow,counter:s.counter+1,agent:s.agent,compress:s.compress,method:s.method,body:Ct(s),signal:s.signal,size:s.size,referrer:s.referrer,referrerPolicy:s.referrerPolicy};if(!Ho(s.url,M)||!Vo(s.url,M))for(let T of["authorization","www-authenticate","cookie","cookie2"])W.headers.delete(T);if(m.statusCode!==303&&s.body&&r.body instanceof ye.default.Readable){a(new fe("Cannot follow redirect with body being a readable stream","unsupported-redirect")),d();return}(m.statusCode===303||(m.statusCode===301||m.statusCode===302)&&s.method==="POST")&&(W.method="GET",W.body=void 0,W.headers.delete("content-length"));let be=ua(P);be&&(W.referrerPolicy=be),i(Ge(new ct(M,W))),d();return}default:return a(new TypeError(`Redirect option '${s.redirect}' is not a valid value of RequestRedirect`))}}g&&m.once("end",()=>{g.removeEventListener("abort",_)});let R=(0,ye.pipeline)(m,new ye.PassThrough,F=>{F&&a(F)});process.version<"v12.10"&&m.on("aborted",_);let C={url:s.url,status:m.statusCode,statusText:m.statusMessage,headers:P,size:s.size,counter:s.counter,highWaterMark:s.highWaterMark},A=P.get("Content-Encoding");if(!s.compress||s.method==="HEAD"||A===null||m.statusCode===204||m.statusCode===304){w=new we(R,C),i(w);return}let J={flush:ft.default.Z_SYNC_FLUSH,finishFlush:ft.default.Z_SYNC_FLUSH};if(A==="gzip"||A==="x-gzip"){R=(0,ye.pipeline)(R,ft.default.createGunzip(J),F=>{F&&a(F)}),w=new we(R,C),i(w);return}if(A==="deflate"||A==="x-deflate"){let F=(0,ye.pipeline)(m,new ye.PassThrough,M=>{M&&a(M)});F.once("data",M=>{(M[0]&15)===8?R=(0,ye.pipeline)(R,ft.default.createInflate(),W=>{W&&a(W)}):R=(0,ye.pipeline)(R,ft.default.createInflateRaw(),W=>{W&&a(W)}),w=new we(R,C),i(w)}),F.once("end",()=>{w||(w=new we(R,C),i(w))});return}if(A==="br"){R=(0,ye.pipeline)(R,ft.default.createBrotliDecompress(),F=>{F&&a(F)}),w=new we(R,C),i(w);return}w=new we(R,C),i(w)}),Xo(S,s).catch(a)})}function gc(t,r){let i=rr.Buffer.from(`0\r
\r
`),a=!1,s=!1,u;t.on("response",f=>{let{headers:b}=f;a=b["transfer-encoding"]==="chunked"&&!b["content-length"]}),t.on("socket",f=>{let b=()=>{if(a&&!s){let w=new Error("Premature close");w.code="ERR_STREAM_PREMATURE_CLOSE",r(w)}},g=w=>{s=rr.Buffer.compare(w.slice(-5),i)===0,!s&&u&&(s=rr.Buffer.compare(u.slice(-3),i.slice(0,3))===0&&rr.Buffer.compare(w.slice(-2),i.slice(3))===0),u=w};f.prependListener("close",b),f.on("data",g),t.on("close",()=>{f.removeListener("close",b),f.removeListener("data",g)})})}var ei=(t=0,r=8)=>`https://www.bing.com/HPImageArchive.aspx?format=js&idx=${t}&n=${r}&pid=hp&uhd=1&uhdwidth=3840&uhdheight=2160`,nr=(t,r="raw",i=3840,a=2160)=>{let s;switch(r){case"raw":{s=t.replace("&w=3840&h=2160&rs=1&c=4","");break}case"full":{s=t;break}case"regular":{s=t.replace("3840","2560").replace("2160","1440");break}case"small":{s=t.replace("3840","1920").replace("2160","1080");break}default:{s=t.replace("3840",i+"").replace("2160",a+"");break}}return"https://www.bing.com"+s};var ir=t=>{let i=t.indexOf("_");return t.substring(11,i)};var K=require("@raycast/api"),Ne=Ae(su());var uu=Ae(require("node:process"),1),lu=require("node:util"),pi=require("node:child_process"),Rd=(0,lu.promisify)(pi.execFile);async function yi(t,{humanReadableOutput:r=!0}={}){if(uu.default.platform!=="darwin")throw new Error("macOS only");let i=r?[]:["-ss"],{stdout:a}=await Rd("osascript",["-e",t,i]);return a.trim()}var Si=require("os");var cu=require("@raycast/api"),{layout:gm,columns:wm,applyTo:fu,downloadSize:du,downloadDirectory:dn,autoDownload:hu,includeDownloadedWallpapers:mu}=(0,cu.getPreferenceValues)();var pu=(a=>(a.ALL="All",a.ONLINE="Online",a.DOWNLOADED="Downloaded",a))(pu||{}),Rm=Object.entries(pu),yu=[".png",".jpg",".heic"];var gi=require("path");var bi=t=>`
      set temp_folder to (POSIX path of "${t}")
      set q_temp_folder to quoted form of temp_folder
      
      set x to alias (POSIX file temp_folder)

      try
        tell application "System Events"
          tell ${fu} desktop
            set picture to (x as text)
            return "ok"
          end tell
        end tell
      on error
        return "error"
      end try
    `;var hn=K.environment.supportPath,Ed=t=>!(t!=null&&String(t).length>0),bu=t=>`${hn.endsWith("/")?hn:`${hn}/`}${t}.png`;async function Td(t,r){let i=bu(t);if((0,Ne.existsSync)(i))return i;let a=await Ge(r).catch(async s=>{await(0,K.showToast)(K.Toast.Style.Failure,String(s))});if(a){let s=await a.arrayBuffer();Ne.default.writeFile(bu(t),Buffer.from(s),async u=>{u&&await(0,K.showToast)(K.Toast.Style.Failure,String(u))})}return i}var wi=async(t,r,i=!0)=>{let a=i?await(0,K.showToast)(K.Toast.Style.Animated,"Downloading wallpaper..."):void 0;await Ne.default.emptydir(hn);try{let s=await Td(t,r);a&&(a.title="Setting wallpaper...");let u=await yi(bi(s));u!=="ok"?i&&a&&(a.style=K.Toast.Style.Failure,a.title=u):a&&(a.style=K.Toast.Style.Success,a.title="Set wallpaper successfully!")}catch(s){console.error(s),a&&(a.style=K.Toast.Style.Failure,a.title="Something went wrong.",a.message="Try with another image or check your internet connection.")}},Su=async(t,r=!0)=>{let i=r?await(0,K.showToast)(K.Toast.Style.Animated,"Setting wallpaper..."):void 0;try{let a=await yi(bi(t));a!=="ok"?r&&i&&(i.style=K.Toast.Style.Failure,i.title=a):i&&(i.style=K.Toast.Style.Success,i.title="Set wallpaper successfully!")}catch(a){console.error(a),i&&(i.style=K.Toast.Style.Failure,i.title="Something went wrong.",i.message="Try with another image.")}},gu=()=>{let t=dn;return dn.startsWith("~")&&(t=dn.replace("~",`${(0,Si.homedir)()}`)),Ed(t)||!Ne.default.pathExistsSync(t)?(0,Si.homedir)()+"/Downloads":t.endsWith("/")?t.substring(0,-1):t};async function wu(t,r){r.forEach(i=>{let a=`${gu()}/${ir(i.url)}-${i.startdate}.png`;Ne.default.existsSync(a)||Ge(nr(i.url,t)).then(function(s){return s.arrayBuffer()}).then(function(s){Ne.default.writeFile(a,Buffer.from(s),async u=>{u&&console.error(String(u))})})})}function _u(){let t=[];try{let r=gu();return Ne.default.readdirSync(r).forEach(a=>{yu.includes((0,gi.parse)(a).ext)&&!a.startsWith(".")&&t.push({name:(0,gi.parse)(a).name,path:r+"/"+a})}),t}catch(r){return console.error(r),t}}var mt=require("@raycast/api");var Pd=async()=>{mt.environment.launchType===mt.LaunchType.UserInitiated&&await(0,mt.showHUD)("Downloading and setting wallpaper..."),await Ru()},Ru=async()=>{let t=await Ge(ei(0,8)).catch(async i=>{console.error(i)}),r=await Ge(ei(8,8)).catch(async i=>{console.error(i)});if(!(typeof t>"u"||typeof r>"u"))try{let i=(await t.json()).images,a=(await r.json()).images;a.shift();let s=i.concat(a);if(hu&&await wu(du,s),mu){let u=_u();if(s.length+u.length!=0){let f=Math.floor(Math.random()*(s.length+u.length));if(f<s.length){let b=s[f];await wi(ir(b.url)+"-"+b.startdate,nr(b.url,"raw"),!1)}else{let b=u[f-s.length];await Su(b.path,!1)}}else await(0,mt.showHUD)("No wallpaper found.")}else{let u=Math.floor(Math.random()*s.length),f=s[u];await wi(ir(f.url)+"-"+f.startdate,nr(f.url,"raw"),!1)}}catch(i){console.error(i)}};0&&(module.exports={getRandomWallpaper});
/*! Bundled license information:

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)
*/
